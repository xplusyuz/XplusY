<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="UTF-8">
<title>Admin - Balans Tahriri</title>
<style>
  body { font-family:sans-serif; background:#f5f5f5; padding:20px; }
  table { width:100%; border-collapse: collapse; margin-top:20px; }
  th, td { border:1px solid #ccc; padding:10px; text-align:left; }
  th { background:#10b981; color:white; }
  input[type=number] { width:80px; }
  .btn { padding:5px 10px; background:#10b981; color:white; border:none; border-radius:5px; cursor:pointer; }
</style>
</head>
<body>
<h2>Foydalanuvchilar Balansi</h2>
<table>
  <thead>
    <tr>
      <th>ID</th>
      <th>Ism</th>
      <th>Username</th>
      <th>Balans</th>
      <th>Saqlash</th>
    </tr>
  </thead>
  <tbody id="userTable"></tbody>
</table>

<script>
let users = JSON.parse(localStorage.getItem("users")) || [];

function renderTable() {
  const tbody = document.getElementById("userTable");
  tbody.innerHTML = "";
  users.forEach((u, i) => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${u.id}</td>
      <td>${u.first_name}</td>
      <td>${u.username || ""}</td>
      <td><input type="number" value="${u.balans}" id="bal${i}"></td>
      <td><button class="btn" onclick="saveBalance(${i})">Saqlash</button></td>
    `;
    tbody.appendChild(tr);
  });
}

function saveBalance(index) {
  const input = document.getElementById(`bal${index}`);
  users[index].balans = parseInt(input.value) || 0;
  localStorage.setItem("users", JSON.stringify(users));
  alert("Balans saqlandi!");
}

renderTable();
</script>
</body>
</html>
