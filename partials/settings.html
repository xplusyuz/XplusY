
<div class="container">
  <div class="banner"><h2>⚙️ Sozlamalar</h2></div>
  <div class="grid cols-2" style="margin-top:12px">
    <div class="card">
      <h3>Promo kod</h3>
      <form id="promo-form" class="grid">
        <input name="code" placeholder="PROMO2025" class="card">
        <input name="amount" type="number" placeholder="+Olmos miqdori" class="card">
        <button class="btn primary">Tasdiqlash</button>
      </form>
      <div class="muted">Adminlar uchun tranzaksiya orqali "gems" qo'shish.</div>
    </div>
  </div>
</div>
<script type="module">
  import { redeemPromo } from '/js/promo-transactions.js';
  import { $, showModal } from '/js/common.js';
  $('#promo-form').addEventListener('submit', async (e)=>{
    e.preventDefault();
    const fd = new FormData(e.target);
    try{ await redeemPromo(fd.get('code'), Number(fd.get('amount')||0)); await showModal({title:'OK', body:'Promo qabul qilindi'}); }
    catch(err){ await showModal({title:'Xato', body:err.message}); }
  });
</script>
