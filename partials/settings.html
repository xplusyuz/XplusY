<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Settings — Balans to‘ldirish</title>
  <style>
    :root{--bg:#0f172a;--card:#111827;--text:#e5e7eb;--muted:#9ca3af;--green:#10b981;--red:#ef4444;--border:#1f2937;}
    *{box-sizing:border-box} html,body{margin:0;padding:0;background:#0a0f1e;color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial}
    .wrap{max-width:920px;margin:24px auto;padding:16px}
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:16px;box-shadow:0 8px 24px rgba(0,0,0,.15);}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:16px}
    .row-1{display:grid;grid-template-columns:1fr;gap:16px}
    @media(max-width:800px){.row{grid-template-columns:1fr}}
    h1{font-size:22px;margin:0 0 8px}
    h2{font-size:18px;margin:0 0 12px}
    label{display:block;font-size:14px;color:var(--muted);margin-bottom:6px}
    input[type="number"],input[type="text"],textarea{width:100%;padding:12px;border-radius:12px;border:1px solid var(--border);background:#0b1224;color:var(--text);outline:none}
    input[type="file"]{width:100%}
    textarea{min-height:92px;resize:vertical}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:12px 16px;border-radius:12px;border:1px solid var(--border);background:#0b1224;color:var(--text);cursor:pointer;text-decoration:none}
    .btn-primary{background:linear-gradient(180deg,#16a34a,#059669);border-color:#0b5b3a}
    .btn-danger{background:linear-gradient(180deg,#ef4444,#dc2626);border-color:#7f1d1d}
    .btn-ghost{background:#0b1224}
    .muted{color:var(--muted)}
    .hr{height:1px;background:var(--border);margin:16px 0}
    .paygrid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
    @media(max-width:520px){.paygrid{grid-template-columns:1fr}}
    .paybtn{display:flex;gap:12px;align-items:center;border:1px solid var(--border);background:#0b1224;padding:12px;border-radius:14px;text-decoration:none;color:var(--text)}
    .paybtn img{width:28px;height:28px;object-fit:cover;border-radius:8px}
    .adm-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    @media(max-width:900px){.adm-grid{grid-template-columns:1fr}}
    .adm-card{background:#0b1224;border:1px solid var(--border);border-radius:14px;padding:12px}
    .sub{font-size:13px;color:var(--muted);margin-top:6px}
    .badge{display:inline-block;padding:2px 8px;border-radius:999px;font-size:12px;border:1px solid var(--border);}
    .badge-pending{background:#0b1224}
    .badge-approved{background:rgba(16,185,129,.15);border-color:#065f46;color:#a7f3d0}
    .badge-rejected{background:rgba(239,68,68,.12);border-color:#7f1d1d;color:#fecaca}
    .actions{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
    .thumb{max-height:140px;border-radius:10px;border:1px solid #1f2937}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Balans to‘ldirish</h1>
      <p class="muted">Quyidagi to‘lov usullaridan birini tanlang va to‘lovdan so‘ng chek (rasm yoki PDF)ni yuklang. Admin tekshiradi va balansingiz tasdiqlanadi.</p>

      <div class="paygrid" style="margin-top:10px">
        <a class="paybtn" id="btn-xazna" href="#" target="_blank" rel="noopener">
          <img src="https://i.imgur.com/6y7f8Fq.png" alt="Xazna"/>
          <div><b>Xazna</b><div class="muted">P2P to‘lov</div></div>
        </a>
        <a class="paybtn" id="btn-click" href="#" target="_blank" rel="noopener">
          <img src="https://i.imgur.com/LiXf7vR.png" alt="Click"/>
          <div><b>Click</b><div class="muted">Onlayn to‘lov</div></div>
        </a>
      </div>

      <div class="hr"></div>

      <form id="topupForm" class="row">
        <div>
          <label>Summasi (so‘m)</label>
          <input type="number" name="amount" placeholder="50000" min="1000" step="1000" required>
        </div>
        <div>
          <label>Izoh (ixtiyoriy)</label>
          <input type="text" name="note" placeholder="Masalan: 20.09.2025 dagi to‘lov">
        </div>
        <div>
          <label>Chek (rasm yoki PDF)</label>
          <input type="file" name="file" id="topupFile" accept="image/*,application/pdf">
          <div class="sub">Ruxsat etilgan formatlar: PNG, JPG, WEBP, PDF. Maksimal: 5 MB.</div>
        </div>
        <div style="display:flex;align-items:flex-end">
          <button type="submit" class="btn btn-primary">Yuborish</button>
        </div>
      </form>
    </div>

    <div class="hr"></div>

    <div class="card" id="adminPanel" style="display:none">
      <h2>Admin — To‘lov arizalari</h2>
      <div id="admList" class="adm-grid"></div>
    </div>
  </div>

  <!-- Firebase modular CDN (agar loyihangizda allaqachon ulangan bo'lsa, bu blokni olib tashlang) -->
  <script type="module">
    // Agar loyihangizda firebase allaqachon initializatsiya qilingan bo‘lsa (common.js),
    // quyidagi import va init qismni olib tashlang yoki moslashtiring.
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-app.js";
    import {
      getAuth, onAuthStateChanged
    } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-auth.js";
    import {
      getFirestore, collection, doc, getDoc, getDocs, setDoc, updateDoc, serverTimestamp, query, orderBy, limit
    } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-firestore.js";
    import {
      getStorage, ref as sRef, uploadBytes, getDownloadURL
    } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-storage.js";

    // TODO: Loyihangizning configini kiriting yoki bu blokni olib tashlang (agar allaqachon bor bo'lsa)
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT.firebaseapp.com",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_PROJECT.appspot.com",
      appId: "YOUR_APP_ID"
    };
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);
    const storage = getStorage(app);

    // Telegram sozlamalari (placeholders)
    window.__SETTINGS_CFG__ = {
      TG_BOT_TOKEN: "PASTE_TELEGRAM_BOT_TOKEN",
      TG_CHAT_ID_MAIN: "PASTE_CHAT_ID",
      PAY_XAZNA: "https://pay.xazna.uz/p2p/f5edea87-06a5-4d48-a01d-885cf843eb8f",
      PAY_CLICK: "https://indoor.click.uz/pay?id=0081656&t=0"
    };

    // settings.js dagi kodni shu yerga yuklaymiz
  </script>

  <script type="module" src="./settings.js"></script>
</body>
</html>
