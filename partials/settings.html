<h1>Sozlamalar</h1>
<section class="grid">
  <article class="card"><h2>👤 Profil</h2><p class="sub">Shaxsiy ma’lumotlar</p><button class="btn ghost" data-open="profileModal">Ko‘rish</button></article>
  <article class="card"><h2>📊 Natijalar</h2><p class="sub">So‘nggi 20 natija</p><button class="btn ghost" data-open="resultsModal">Ko‘rish</button></article>
  <article class="card"><h2>💳 Balans to‘ldirish</h2><p class="sub">Payme/Click/Xazna (demo)</p><button class="btn ghost" data-open="balanceModal">Ochish</button></article>
  <article class="card"><h2>🏆 Yutuqlar</h2><p class="sub">Badjlar</p><button class="btn ghost" data-open="badgesModal">Ko‘rish</button></article>
  <article class="card"><h2>🎁 Promo kod</h2><p class="sub">Bonus olish</p><button class="btn ghost" data-open="promoModal">Kiritish</button></article>
  <article class="card hidden" id="cardAdmin"><h2>🛠️ Admin sahifa</h2><p class="sub">Foydalanuvchilarni tahrirlash</p><button class="btn danger" data-open="adminModal">Kirish</button></article>
  <button class="btn" data-action="signout">Chiqish</button>
</section>
<div class="modal hidden" id="profileModal"><div class="dialog"><div class="head"><h3>Profil</h3><button class="icon-btn" data-close>&times;</button></div><div class="body"><form id="profileForm" class="form-grid"><div class="field"><label>Numeric ID</label><input id="pf_numericId" type="text" readonly/></div><div class="field"><label>Ism</label><input id="pf_firstName" type="text"/></div><div class="field"><label>Familiya</label><input id="pf_lastName" type="text"/></div><div class="field"><label>Otasining ismi</label><input id="pf_middleName" type="text"/></div><div class="field"><label>Tug‘ilgan sana</label><input id="pf_dob" type="date"/></div><div class="field"><label>Viloyat</label><input id="pf_region" type="text"/></div><div class="field"><label>Tuman/Shahar</label><input id="pf_district" type="text"/></div><div class="field"><label>Telefon</label><input id="pf_phone" type="tel"/></div><div class="field"><label>💵 Balans</label><input id="pf_balance" type="number" readonly/></div><div class="field"><label>💎 Olmos</label><input id="pf_gems" type="number" readonly/></div></form></div><div class="foot"><button id="profileEdit" class="btn">✏️ Tahrirlash</button><button id="profileSave" class="btn primary">Saqlash</button></div></div></div>
<div class="modal hidden" id="resultsModal"><div class="dialog"><div class="head"><h3>Natijalar</h3><button class="icon-btn" data-close>&times;</button></div><div class="body"><div id="resultsList" class="grid"></div></div></div></div>
<div class="modal hidden" id="balanceModal"><div class="dialog"><div class="head"><h3>Balans to‘ldirish</h3><button class="icon-btn" data-close>&times;</button></div><div class="body"><p>Quyidagi usullardan birini tanlang (demo):</p><div class="grid" style="grid-template-columns:repeat(3,1fr)"><button class="btn ghost">Payme</button><button class="btn ghost">Click</button><button class="btn ghost">Xazna</button></div><p class="hint">Haqiqiy to‘lov integratsiyasi backend orqali ulanadi.</p></div></div></div>
<div class="modal hidden" id="badgesModal"><div class="dialog"><div class="head"><h3>Yutuqlar</h3><button class="icon-btn" data-close>&times;</button></div><div class="body"><div id="badgesWrap" class="grid" style="grid-template-columns:repeat(2,1fr)"></div></div></div></div>
<div class="modal hidden" id="promoModal"><div class="dialog"><div class="head"><h3>Promo kod</h3><button class="icon-btn" data-close>&times;</button></div><div class="body"><div style="display:flex;gap:8px"><input id="promoInput" type="text" placeholder="Kodni kiriting"/><button id="promoApply" class="btn primary">Qo‘llash</button></div><p id="promoMsg" class="hint"></p></div></div></div>
<div class="modal hidden" id="adminGateModal"><div class="dialog"><div class="head"><h3>Admin kirish</h3><button class="icon-btn" data-close>&times;</button></div><div class="body"><p>Faqat 1000001 va 1000002 uchun. Kodni kiriting:</p><div style="display:flex;gap:8px"><input id="adminCode" type="password" placeholder="Kirish kodi"/><button id="adminEnter" class="btn danger">Kirish</button></div><p class="hint">Kod: <code>Math@1999</code>.</p></div></div></div>
<div class="modal hidden" id="adminModal"><div class="dialog" style="width:min(980px,100%)"><div class="head"><h3>🛠️ Admin panel</h3><button class="icon-btn" data-close>&times;</button></div><div class="body"><!-- Tabs -->
<div class="grid" style="grid-template-columns:repeat(3,1fr);gap:8px;margin-bottom:10px">
  <button class="btn ghost" id="tabUsers">👥 Users</button>
  <button class="btn ghost" id="tabPromo">🎁 Promo</button>
  <button class="btn ghost" id="tabCSV">💳 Payments</button>
</div>

<!-- USERS pane -->
<section id="paneUsers">
  <div style="display:flex;gap:8px;margin-bottom:10px">
    <input id="adm_query" type="text" placeholder="numericId yoki telefon"/>
    <button id="adm_search" class="btn">Qidirish</button>
    <button id="adm_list_all" class="btn ghost">Top 50</button>
  </div>
  <div id="adm_table" class="grid"></div>
</section>

<!-- PROMO pane -->
<section id="panePromo" class="hidden">
  <h4 style="margin:6px 0 10px">Promo kod yaratish</h4>
  <div class="form-grid">
    <div class="field"><label>Kod</label><input id="pr_code" type="text" placeholder="MASALAX10"/></div>
    <div class="field"><label>Balans + (so‘m)</label><input id="pr_balance" type="number" value="0"/></div>
    <div class="field"><label>Olmos +</label><input id="pr_gems" type="number" value="0"/></div>
    <div class="field"><label>Foizli skidka (%)</label><input id="pr_percent" type="number" value="0"/></div>
    <div class="field"><label>Muddati (yyyy-mm-dd)</label><input id="pr_expires" type="date"/></div>
    <div class="field"><label>Maks. ishlatish soni</label><input id="pr_max" type="number" value="1"/></div>
    <div class="field"><label>Bir foydalanuvchiga limit</label><input id="pr_peruser" type="number" value="1"/></div>
    <div class="field"><label>Faol</label><select id="pr_active"><option value="true">Ha</option><option value="false">Yo‘q</option></select></div>
  </div>
  <div class="foot" style="justify-content:flex-start">
    <button id="pr_create" class="btn primary">Yaratish</button>
    <span id="pr_msg" class="sub"></span>
  </div>
</section>

<!-- CSV pane -->
<section id="panePayments" class="hidden">
  <h4 style="margin:6px 0 10px">CSV fayllar</h4>
  <div style="display:flex;gap:8px;align-items:center;margin-bottom:10px">
    <select id="csv_select"></select>
    <button id="csv_refresh" class="btn ghost">Yangila</button>
    <button id="csv_new" class="btn">Yangi CSV</button>
  </div>
  <textarea id="csv_text" style="width:100%;min-height:320px;border:1px solid var(--border-1);border-radius:12px;padding:12px;font-family:ui-monospace,Consolas"></textarea>
  <div class="foot" style="justify-content:flex-start">
    <button id="csv_save" class="btn primary">Saqlash</button>
    <span id="csv_msg" class="sub"></span>
  </div>
</section></div></div></div></div>


<!-- Top-up Modal -->
<div class="modal hidden" id="topUpModal">
  <div class="dialog" style="width:min(980px,100%)">
    <div class="head">
      <h3>💳 Balans to‘ldirish</h3>
      <button class="icon-btn" data-close>&times;</button>
    </div>
    <div class="body">
      <div class="grid" style="grid-template-columns:repeat(2,minmax(0,1fr));gap:12px">
        <!-- Methods -->
        <section class="card">
          <h4 style="margin:0 0 8px">To‘lov usullari</h4>
          <div class="grid" style="grid-template-columns:repeat(2,minmax(0,1fr));gap:10px">
            <a class="btn primary" href="https://indoor.click.uz/pay?id=0081656&t=0" target="_blank" rel="noopener">CLICK — onlayn</a>
            <a class="btn" href="https://pay.xazna.uz/p2p/f5edea87-06a5-4d48-a01d-885cf843eb8f" target="_blank" rel="noopener">Xazna — p2p</a>
            <div class="card" style="text-align:center">
              <img src="./assets/Click QR kode.png" alt="CLICK QR" style="max-width:100%;border-radius:12px">
              <div class="sub">USSD: <b>*880*081656*summa#</b></div>
            </div>
            <div class="card" style="text-align:center">
              <img src="./assets/Bank karta.png" alt="Karta" style="max-width:100%;border-radius:12px">
              <div class="sub"><b>Sattorov Sohibjon</b><br>4916 9903 0103 2469</div>
            </div>
          </div>
        </section>

        <!-- Receipt upload -->
        <section class="card">
          <h4 style="margin:0 0 8px">Chekni yuborish</h4>
          <div class="form-grid">
            <div class="field"><label>Summasi (so‘m)</label><input id="pay_amount" type="number" min="1000" step="1000" placeholder="10000"></div>
            <div class="field"><label>Izoh (ixtiyoriy)</label><input id="pay_note" type="text" placeholder="To‘lov maqsadi"></div>
            <div class="field"><label>Chek fayl</label><input id="pay_file" type="file" accept="image/*,application/pdf"></div>
          </div>
          <p class="sub">Chek va ma’lumotlar <a href="https://t.me/MathCenter_Pay_bot" target="_blank" rel="noopener">@MathCenter_Pay_bot</a> orqali sizga yuboriladi.</p>
          <div class="foot" style="justify-content:flex-start">
            <button id="pay_submit" class="btn primary">Yuborish</button>
            <span id="pay_msg" class="sub"></span>
          </div>
        </section>
      </div>

      <!-- History -->
      <section class="card" style="margin-top:12px">
        <h4 style="margin:0 0 8px">To‘ldirishlar tarixi</h4>
        <div id="pay_history" class="grid"></div>
      </section>
    </div>
  </div>
</div>
