<!-- partials/tests.html (v4: CSV-driven filters) -->
<section id="tests-page" class="page">
  <div class="wrap">
    <header class="eh-head">
      <h1 class="eh-title">🧮 Testlar</h1>
      <div id="testsUserBadge" class="eh-pill hidden">Kirish talab qilinadi</div>
    </header>

    <!-- CSV-driven filters -->
    <div class="eh-filters">
      <input id="testsSearch" class="eh-input" type="search" placeholder="Qidirish (sarlavha/meta)..." />
      <div id="testsDynamicFilters" class="eh-facetbar"></div>
    </div>

    <!-- Katalog -->
    <section id="testsCatalog" class="screen">
      <div class="eh-note" id="testsDirNote">
        <b>Eslatma:</b> Brauzer papkani to‘g‘ridan-to‘g‘ri sanay olmaydi. Shu sababli <code>csv/tests.csv</code> manifestidan foydalanamiz.
      </div>
      <div class="eh-grid" id="testsCards"></div>
    </section>

    <!-- Test -->
    <section id="testsRun" class="screen hidden">
      <div class="eh-topbar">
        <div class="eh-row">
          <div class="eh-title-small" id="testsTitle">—</div>
          <div class="eh-timer" id="testsTimer">00:00</div>
        </div>
        <div class="eh-progress"><div id="testsProgress"></div></div>
      </div>

      <div class="eh-qwrap">
        <img id="testsQimg" class="eh-qimg hidden" alt="savol rasmi" />
        <div id="testsQtext" class="eh-qtext">—</div>
        <div id="testsChoices" class="eh-choices"></div>
        <div class="eh-navs">
          <button class="eh-btn" id="testsPrev">⬅️ Oldingi</button>
          <div style="display:flex;gap:8px">
            <button class="eh-btn ghost" id="testsBackToCatalog">📚 Katalog</button>
            <button class="eh-btn" id="testsNext">Keyingi ➡️</button>
            <button class="eh-btn primary" id="testsFinish">✅ Yakunlash</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Natija -->
    <section id="testsResult" class="screen hidden">
      <h2>📈 Natija</h2>
      <div id="testsSummary" class="eh-note"></div>
      <h3>Savol tahlili</h3>
      <table class="eh-table" id="testsDetail"></table>
      <div style="margin-top:12px">
        <button class="eh-btn" id="testsBackBtn">⬅️ Katalogga qaytish</button>
      </div>
    </section>
  </div>

  <!-- To'lov dialogi -->
  <dialog id="testsConfirm">
    <div class="dlg-head">To‘lov tasdiqlanishi</div>
    <div class="dlg-body" id="testsConfirmBody"></div>
    <div class="dlg-actions">
      <button class="eh-btn" id="testsCancelPay">Bekor qilish</button>
      <button class="eh-btn primary" id="testsOkPay">Tasdiqlayman</button>
    </div>
  </dialog>
</section>
