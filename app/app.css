:root{
  --brand:#2E8B57;--brand2:#1F6B45;
  --bg:#f4f8f6;--text:#0d1b14;--muted:#375c4c;--card:#ffffff;
  --frame:#d8e7dd;--frame-strong:#b7d6c5;--chip:#eaf6f0;--chip-b:#cfe7db;
  --radius:16px; --ring:#8ad1b1;
}
:root.dark{
  --bg:#0e1512; --text:#EAF7EE; --muted:#A5C7B4; --card:#142018;
  --frame:#244b39; --frame-strong:#2f6b52; --chip:#132a20; --chip-b:#2a5742; --ring:#2fbf7d;
}
*{box-sizing:border-box}
html,body{margin:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}

/* -------- AUTH GUARD -------- */
html.auth-checking #app{display:none}
html.auth-checking #authGate{display:flex}

#authGate{
  position:fixed; inset:0; z-index:9999; display:none;
  align-items:center; justify-content:center; padding:24px;
  background:linear-gradient(135deg, rgba(14,21,18,.85), rgba(31,107,69,.85));
  backdrop-filter: blur(10px);
}
#authCard{
  width:min(560px,96vw);
  background:var(--card);
  border:1px solid var(--frame-strong);
  border-radius:18px;
  padding:20px;
  box-shadow:0 24px 64px rgba(0,0,0,.35);
}
#authCard h2{ margin:0 0 6px; font-size:22px }
#authCard p{ margin:0 0 14px; color:var(--muted) }
.auth-row{ display:flex; gap:10px; justify-content:flex-end; margin-top:8px }

/* ====== PREMIUM GLASS BUTTONS ====== */
.btn{
  position:relative; display:inline-flex; align-items:center; justify-content:center; gap:8px;
  padding:10px 14px; border:none; border-radius:12px; cursor:pointer; text-decoration:none;
  font-weight:800; color:#fff; isolation:isolate;
  background:linear-gradient(135deg,var(--brand),var(--brand2));
  box-shadow:0 6px 18px rgba(46,139,87,.25), inset 0 0 0 1px #ffffff22;
  transition:transform .12s ease, box-shadow .12s ease, filter .12s ease;
  backdrop-filter:saturate(120%);
}
.btn::before{
  content:""; position:absolute; inset:0; border-radius:inherit; z-index:-1;
  background:radial-gradient(120% 120% at -10% -10%, rgba(255,255,255,.55), transparent 40%),
             radial-gradient(120% 120% at 110% 110%, rgba(255,255,255,.18), transparent 55%);
  opacity:.9; pointer-events:none;
}
.btn:hover{ transform:translateY(-1px); box-shadow:0 10px 28px rgba(46,139,87,.32), inset 0 0 0 1px #ffffff33 }
.btn:active{ transform:translateY(0); filter:saturate(1.05) }
.btn:focus-visible{ outline:none; box-shadow:0 0 0 4px color-mix(in srgb, var(--ring) 30%, transparent), 0 10px 28px rgba(46,139,87,.32) }

/* Ghost (glass) button */
.btn.ghost{
  background:linear-gradient(180deg,#fff,#f5faf7);
  color:var(--brand2);
  border:1px solid var(--frame);
  box-shadow:0 4px 12px rgba(0,0,0,.06);
}
.dark .btn.ghost{
  background:linear-gradient(180deg,#1a2a21,#17261f);
  color:#c8f0dc; border-color:#2a5742;
}
.btn.ghost:hover{ box-shadow:0 8px 20px rgba(0,0,0,.12) }

/* Badge-like small chip buttons (re-use) */
.uc-pill{display:inline-flex;align-items:center;gap:6px;padding:7px 12px;border-radius:999px;background:var(--chip);border:1px solid var(--chip-b);font-size:13px}
.uc-pill .uc-pill-label{opacity:.7}

/* Ichki UI */
.glass{background:rgba(255,255,255,.6);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px)}
.dark .glass{background:rgba(20,32,24,.55)}
.grad-border{position:relative}
.grad-border::before{
  content:""; position:absolute; inset:0; padding:1px; border-radius:14px;
  background:linear-gradient(135deg, #9ce8c0, #2E8B57 40%, #39B6FF);
  -webkit-mask:linear-gradient(#000 0 0) content-box,linear-gradient(#000 0 0);
  -webkit-mask-composite:xor; mask-composite:exclude; pointer-events:none;
}

/* Appbar */
.appbar{position:sticky;top:0;z-index:90;background:linear-gradient(135deg,var(--brand),var(--brand2));color:#fff;padding:10px 12px;display:flex;align-items:center;gap:10px;box-shadow:0 8px 24px rgba(0,0,0,.12)}
.logo{width:60px;height:60px;border-radius:14px;background:#fff2;display:grid;place-items:center;font-weight:800;overflow:hidden}
.logo img{width:100%;height:100%;object-fit:contain}
.title{font-weight:800;font-size:18px}
.sub{font-size:12px;opacity:.9}
.spacer{flex:1}
.iconbtn{background:#ffffff22;border:1px solid #ffffff33;color:#fff;border-radius:12px;padding:8px 10px;font-weight:700;cursor:pointer}

/* MOBILE header tweaks */
@media (max-width:600px){
  .logo{width:60px;height:60px;border-radius:10px}
  .title{font-size:16px}
  .sub{font-size:10px}
  .uc-chip{scale:.9}
}

/* === Compact User Chip === */
.uc-chip{display:flex;align-items:center;gap:10px;background:var(--card);border:1px solid var(--frame);border-radius:20px;padding:6px 8px 6px 6px;box-shadow:0 10px 24px rgba(0,0,0,.1);transition:.15s ease}
.uc-chip:hover{transform:translateY(-1px);box-shadow:0 16px 36px rgba(0,0,0,.12)}
.uc-ava{width:44px;height:44px;border-radius:50%;background:linear-gradient(135deg,var(--brand),var(--brand2));color:#fff;font-weight:900;display:grid;place-items:center;overflow:hidden;box-shadow:inset 0 0 0 2px #ffffff22}
.uc-ava img{width:100%;height:100%;object-fit:cover}
.uc-more{width:32px;height:32px;border-radius:10px;border:1px solid var(--frame);background:linear-gradient(180deg,#fff,#f5faf7);cursor:pointer;display:grid;place-items:center;font-size:20px;font-weight:900;color:var(--brand)}

/* === Popover === */
.uc-popover-mask{position:fixed;inset:0;background:rgba(0,0,0,.35);display:none;z-index:998}
.uc-popover{
  position:fixed;right:14px;top:84px;z-index:999;width:min(520px,94vw);
  background:var(--card);border:1px solid var(--frame-strong);
  border-radius:18px;padding:16px;box-shadow:0 24px 64px rgba(0,0,0,.25);
  display:none;
  background-image:
    radial-gradient(1200px 600px at 10% -20%, rgba(46,139,87,.08), transparent 55%),
    radial-gradient(1200px 600px at 110% 120%, rgba(57,182,255,.08), transparent 55%);
}
.uc-pop-head{display:flex;align-items:center;gap:12px;margin-bottom:10px}
.uc-ava.lg{width:56px;height:56px}
.uc-namebox .uc-fullname{font-weight:900;font-size:18px}
.uc-namebox .uc-sub{color:var(--muted);font-size:12px}
.uc-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin:10px 0 12px}
@media(max-width:560px){.uc-grid{grid-template-columns:1fr}}
.uc-kv{background:var(--chip);border:1px solid var(--chip-b);border-radius:12px;padding:10px 12px}
.uc-kv .k{font-size:12px;color:var(--muted);margin-bottom:4px}
.uc-kv .v{font-weight:700}
.uc-actions{display:flex;gap:10px;justify-content:flex-end}
.btn-primary{padding:10px 14px;border:none;border-radius:12px;background:linear-gradient(135deg,var(--brand),var(--brand2));color:#fff;font-weight:800;cursor:pointer}
.btn-ghost{padding:10px 14px;border:1px solid var(--frame);border-radius:12px;background:#fff;cursor:pointer}
.dark .uc-chip{background:rgba(20,32,24,.65)}
.dark .uc-popover{background:rgba(20,32,24,.85)}

/* Filters (TOP) */
.filters{margin:10px 12px;padding:10px;background:var(--card);border:1px solid var(--frame);border-radius:14px;box-shadow:0 8px 18px rgba(0,0,0,.06)}
.filters h4{margin:0 0 8px;font-size:14px;opacity:.75}
.chips{display:flex;flex-wrap:wrap;gap:8px}
.chip{display:inline-flex;align-items:center;gap:6px;padding:7px 10px;border-radius:999px;background:var(--chip);border:1px solid var(--chip-b);font-size:12px;cursor:pointer}
.chip[aria-pressed="true"]{background:linear-gradient(135deg,var(--brand),var(--brand2));border-color:#0000;color:#fff}
.chip.sm{font-size:11px;padding:5px 8px}

/* Banner */
.banner{margin:14px 12px;border-radius:18px;overflow:hidden;border:1px solid var(--frame);box-shadow:0 8px 22px rgba(0,0,0,.08);background:linear-gradient(135deg,#f0fff6,#e7f6ee);padding:26px 16px}
.banner h1{margin:0 0 8px;font-size:32px}
.banner p{margin:0;font-size:16px;color:var(--muted)}

/* Leaderboard */
.board{background:var(--card);border:1px solid var(--frame);border-radius:16px;margin:10px 12px;padding:12px;border:none}
.board h3{margin:0 0 8px;font-size:16px}
.group{border:none;border-radius:14px;overflow:hidden;margin:10px 0;box-shadow:0 8px 24px rgba(0,0,0,.06)}
.groupBody{padding:12px}
.groupHead{border:none;border-radius:14px;padding:14px 16px;color:var(--muted);font-weight:900;display:flex;align-items:center;justify-content:space-between;gap:10px}
.dark .groupHead{color:#c7ffe7}
.groupHead.tier-bronze{background:linear-gradient(135deg,#fff1e6,#ffd9c2)}
.groupHead.tier-silver{background:linear-gradient(135deg,#f4f7fb,#dfe7f4)}
.groupHead.tier-gold{background:linear-gradient(135deg,#fff4cc,#ffe48a)}
.groupHead.tier-emerald{background:linear-gradient(135deg,#e3f8ee,#c9f1df)}
.groupHead.tier-diamond{background:linear-gradient(135deg,#e8f8ff,#d8f1ff)}
.tier-badge{font-weight:900;padding:6px 10px;border-radius:999px;border:1px solid var(--frame);background:rgba(255,255,255,.4)}
.rank{display:grid;grid-template-columns:54px 1fr auto;gap:12px;align-items:center;padding:10px;border-radius:12px;border:1px solid var(--frame);margin-bottom:8px;background:var(--card);box-shadow:0 2px 6px rgba(0,0,0,.04);transition:.2s;border:none;position:relative}
.rank:hover{transform:scale(1.02);box-shadow:0 10px 28px rgba(46,139,87,.28)}
.rnk{font-weight:900;background:var(--chip);border:1px solid var(--frame);padding:6px 10px;border-radius:10px}
.medal{font-size:22px;line-height:1}
.m1,.m2,.m3{display:inline-block;width:40px;text-align:center;animation:pulse 1.8s ease-in-out infinite alternate}
@keyframes pulse{0%{filter:drop-shadow(0 0 0 rgba(255,200,0,.0))}100%{filter:drop-shadow(0 0 8px rgba(255,200,0,.35))}}
.stars{display:inline-flex;gap:3px;vertical-align:middle}
.tier-bronze .stars{--s:16}.tier-silver .stars{--s:17}.tier-gold .stars{--s:18}.tier-emerald .stars{--s:20}.tier-diamond .stars{--s:24}
.stars svg{width:calc(var(--s)*1px);height:calc(var(--s)*1px)}
.pager{display:flex;align-items:center;justify-content:space-between;gap:10px;margin:8px 0}
.pbtn{background:var(--chip);border:1px solid var(--frame);border-radius:10px;padding:8px 12px;font-weight:800;cursor:pointer}
.pbtn[disabled]{opacity:.5;cursor:not-allowed}
.pinfo{font-size:12px;color:var(--muted)}

/* Cards grid */
.container{padding:6px 12px 90px}
.grid{display:grid;grid-template-columns:1fr;gap:12px}
@media(min-width:560px){.grid{grid-template-columns:repeat(2,1fr)}}
@media(min-width:900px){.grid{grid-template-columns:repeat(3,1fr)}}
.card{background:var(--card);border:1px solid var(--frame);border-radius:14px;overflow:hidden;box-shadow:0 10px 24px rgba(0,0,0,.06);position:relative;transition:transform .18s ease, box-shadow .18s ease}
.card:hover{transform:translateY(-3px);box-shadow:0 14px 36px rgba(0,0,0,.12)}
.thumb{aspect-ratio:16/9;background:linear-gradient(135deg,#e9f5ef,#f6fbf8);display:grid;place-items:center}
.dark .thumb{background:linear-gradient(135deg,#122019,#0f1714)}
.badge{position:absolute;top:10px;left:10px;border-radius:999px;padding:6px 10px;background:linear-gradient(135deg,#2E8B57,#1F6B45);color:#fff;font-weight:800}
.badge::after{content:"";position:absolute;inset:-1px;border-radius:999px;background:conic-gradient(from 0deg,#7fffd4 0%, transparent 20%, transparent 60%, #7fffd4 80%, #7fffd4 100%);-webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);-webkit-mask-composite:xor; mask-composite:exclude; animation:shimmer 2.6s linear infinite;}
@keyframes shimmer{to{transform:rotate(360deg)}}
.body{padding:12px}
.name{font-size:16px;font-weight:900;margin:0 0 6px}
.desc{font-size:13px;color:var(--muted);margin:0 0 10px}
.actions{display:flex;gap:8px}
.btn[disabled]{opacity:.5;cursor:not-allowed}
.meta{font-size:12px;color:var(--muted);margin-top:6px;display:flex;gap:10px;align-items:center}
.countdown{font-weight:800}

/* === PREMIUM GLASS PROFILE MODAL === */
.modal-mask {
  position: fixed;
  inset: 0;
  background: linear-gradient(135deg, rgba(14,21,18,.35), rgba(31,107,69,.35));
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 20px;
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}
.modal {
  background: rgba(255,255,255,.58);
  border: 1px solid var(--frame-strong);
  border-radius: 18px;
  box-shadow: 0 24px 64px rgba(0,0,0,.35);
  padding: 18px;
  width: min(760px, 96vw);
  max-height: 90vh;
  overflow-y: auto;
  animation: glassPop .22s ease-out;
  backdrop-filter: saturate(140%) blur(16px);
  -webkit-backdrop-filter: saturate(140%) blur(16px);
}
.premium-modal{
  position:relative;
  background-image:
    radial-gradient(1200px 600px at 10% -20%, rgba(46,139,87,.10), transparent 55%),
    radial-gradient(1200px 600px at 110% 120%, rgba(57,182,255,.10), transparent 55%);
}
.dark .modal{
  background: rgba(20,32,24,.78);
  box-shadow: 0 28px 72px rgba(0,0,0,.55);
}
.dark .premium-modal{
  background-image:
    radial-gradient(1200px 600px at 10% -20%, rgba(46,139,87,.14), transparent 55%),
    radial-gradient(1200px 600px at 110% 120%, rgba(57,182,255,.14), transparent 55%);
}
.premium-modal::after{
  content:""; position:absolute; inset:-1px; border-radius:inherit; pointer-events:none;
  background:radial-gradient(600px 240px at 0% 0%, rgba(255,255,255,.18), transparent 60%),
             radial-gradient(600px 240px at 100% 100%, rgba(255,255,255,.08), transparent 60%);
}
.modal h3{
  margin:0 0 12px; font-size:18px; letter-spacing:.2px;
  background:linear-gradient(135deg, var(--brand), #39B6FF);
  -webkit-background-clip:text; background-clip:text; color:transparent;
}

/* FORM (modal ichida) */
.grid2, .grid3 { display:grid; gap:10px }
.grid2 { grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)) }
.grid3 { grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)) }
@media(max-width:560px){ .grid2,.grid3{ grid-template-columns:1fr } }
.ctl label{font-size:12px;color:var(--muted);display:block;margin-bottom:6px}
.ctl input, .ctl select, .ctl textarea{
  width:100%; padding:11px 12px; border:1px solid var(--frame); border-radius:12px; font:inherit;
  background:rgba(255,255,255,.7); color:var(--text); outline:none;
  transition:border .15s, box-shadow .15s, background .15s;
}
.dark .ctl input, .dark .ctl select, .dark .ctl textarea{ background:rgba(20,32,24,.6) }
.ctl input:focus, .ctl select:focus, .ctl textarea:focus{
  border-color:var(--ring); box-shadow:0 0 0 4px color-mix(in srgb, var(--ring) 25%, transparent);
}
.row{display:flex;gap:10px;justify-content:flex-end;margin-top:14px}
.danger{flex:1;color:#c62828;font-size:12px;display:flex;align-items:center}
.modal-open{overflow:hidden}

/* Animatsiya */
@keyframes glassPop{ from{transform:translateY(8px) scale(.98); opacity:0} to{transform:translateY(0) scale(1); opacity:1} }
@media (prefers-reduced-motion: reduce){ .modal{ animation:none } }

/* Helpers */
.inline-actions{display:flex;gap:8px;align-items:center}
.linklike{font-size:12px;color:var(--brand2);cursor:pointer;text-decoration:underline}
.hidden{display:none !important}

/* Light rejimda ball qora */
body:not(.dark) .uc-pill b { color:#000; }
