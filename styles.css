*{box-sizing:border-box}
html,body{margin:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
.modal-open{overflow:hidden}

/* THEME TOKENS */
:root{
  --brand:#2E8B57;--brand2:#1F6B45;
  --bg:#f4f8f6;--text:#0d1b14;--muted:#375c4c;--card:#ffffff;
  --frame:#d8e7dd;--frame-strong:#b7d6c5;--chip:#eaf6f0;--chip-b:#cfe7db;
  --radius:16px; --ring:#8ad1b1;
}
:root.dark{
  --bg:#0e1512; --text:#EAF7EE; --muted:#A5C7B4; --card:#142018;
  --frame:#244b39; --frame-strong:#2f6b52; --chip:#132a20; --chip-b:#2a5742; --ring:#2fbf7d;
}

/* Appbar */
.appbar{position:sticky;top:0;z-index:90;background:linear-gradient(135deg,var(--brand),var(--brand2));color:#fff;padding:10px 12px;display:flex;align-items:center;gap:10px;box-shadow:0 8px 24px rgba(0,0,0,.12)}
.logo{display:flex;align-items:center;justify-content:center;height:48px;width:48px;border-radius:12px;overflow:hidden}
.logo img{width:100%;height:100%;object-fit:contain}
.title{font-weight:800;font-size:18px}
.spacer{flex:1}
.iconbtn{background:#ffffff22;border:1px solid #ffffff33;color:#fff;border-radius:12px;padding:8px 10px;font-weight:700;cursor:pointer}

/* USER BAR */
.userbar{
  background:var(--card);border:1px solid var(--frame);border-radius:14px;margin:10px 12px;padding:12px;
  display:grid;grid-template-columns:56px 1fr auto;grid-template-areas:
    "ava name chip"
    "ava meta chip";
  column-gap:12px;row-gap:6px;box-shadow:0 8px 20px #0001
}
@media(max-width:560px){
  .userbar{
    grid-template-columns:56px 1fr;grid-template-areas:
      "ava name"
      "ava mstats"
      "chip chip";
  }
}
.ava{grid-area:ava;width:56px;height:56px;border-radius:50%;background:linear-gradient(135deg,var(--brand),var(--brand2));display:grid;place-items:center;color:#fff;font-weight:900;overflow:hidden}
.ava img{width:100%;height:100%;object-fit:cover}
.uinfo{grid-area:name}
.uinfo b{display:block;font-size:16px;line-height:1.15}
.uinfo .meta{grid-area:meta;color:var(--muted);font-size:12px}
.uvals{grid-area:chip;text-align:right;align-self:center}
.chip{display:inline-flex;align-items:center;gap:6px;padding:7px 10px;border-radius:999px;background:var(--chip);border:1px solid var(--chip-b);font-size:12px}
.link{color:inherit;text-decoration:underline dotted}
.ustars{display:inline-flex;gap:3px;margin-left:8px;vertical-align:middle}
.btn-primary{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:12px;font-weight:800;background:linear-gradient(135deg,var(--brand),var(--brand2));color:#fff;border:1px solid #0000;box-shadow:0 6px 16px rgba(46,139,87,.25)}
.btn-primary:hover{filter:brightness(1.02)} .btn-primary:active{transform:translateY(1px)}

/* Banner */
.banner{margin:10px 12px;border-radius:18px;overflow:hidden;border:1px solid var(--frame);box-shadow:0 8px 22px rgba(0,0,0,.08);background:linear-gradient(135deg,#f0fff6,#e7f6ee)}
.dark .banner{background:linear-gradient(135deg,#11231b,#0d1914)}

/* Glass + gradient border */
.glass{background:rgba(255,255,255,.6);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px)}
.dark .glass{background:rgba(20,32,24,.55)}
.grad-border{position:relative}
.grad-border::before{
  content:""; position:absolute; inset:0; padding:1px; border-radius:14px;
  background:linear-gradient(135deg, #9ce8c0, #2E8B57 40%, #39B6FF);
  -webkit-mask:linear-gradient(#000 0 0) content-box,linear-gradient(#000 0 0);
  -webkit-mask-composite:xor; mask-composite:exclude; pointer-events:none;
}

/* ==== FILTERLAR ==== */
.filters{margin:10px 12px;padding:10px;background:var(--card);border:1px solid var(--frame);
  border-radius:14px;box-shadow:0 8px 18px rgba(0,0,0,.06)}
.filters h4{margin:0 0 8px;font-size:14px;opacity:.75}
.chips{display:flex;flex-wrap:wrap;gap:8px}
.chip.filter{cursor:pointer;background:var(--chip);border:1px solid var(--chip-b)}
.chip.filter[aria-pressed="true"]{background:linear-gradient(135deg,var(--brand),var(--brand2));border-color:#0000;color:#fff}
.chip.sm{font-size:11px;padding:5px 8px;border-radius:999px;background:var(--chip);border:1px solid var(--chip-b)}

/* Leaderboard */
.board{background:var(--card);border:1px solid var(--frame);border-radius:16px;margin:10px 12px;padding:12px;border:none}
.board h3{margin:0 0 8px;font-size:16px}
.group{border:none;border-radius:14px;overflow:hidden;margin:10px 0;box-shadow:0 8px 24px rgba(0,0,0,.06)}
.board .group + .group{margin-top:14px}
.groupBody{padding:12px}
.groupHead{position:relative;border:none;border-radius:14px;padding:14px 16px;color:var(--muted);font-weight:900;display:flex;align-items:center;justify-content:space-between;gap:10px}
.dark .groupHead{color:#c7ffe7}
.groupHead.tier-bronze{background:linear-gradient(135deg,#fff1e6,#ffd9c2)}
.groupHead.tier-silver{background:linear-gradient(135deg,#f4f7fb,#dfe7f4)}
.groupHead.tier-gold{background:linear-gradient(135deg,#fff4cc,#ffe48a)}
.groupHead.tier-emerald{background:linear-gradient(135deg,#e3f8ee,#c9f1df)}
.groupHead.tier-diamond{background:linear-gradient(135deg,#e8f8ff,#d8f1ff)}
.tier-badge{font-weight:900;padding:6px 10px;border-radius:999px;border:1px solid var(--frame);background:rgba(255,255,255,.4)}
.legend{display:flex;align-items:center;gap:8px;font-size:12px;opacity:.9}

.rank{display:grid;grid-template-columns:54px 1fr auto;gap:12px;align-items:center;padding:10px;border-radius:12px;border:1px solid var(--frame);margin-bottom:8px;background:var(--card);box-shadow:0 2px 6px rgba(0,0,0,.04);transition:.2s;border:none;position:relative}
.rank:hover{transform:scale(1.02);box-shadow:0 10px 28px rgba(46,139,87,.28)}
.rnk{font-weight:900;background:var(--chip);border:1px solid var(--frame);padding:6px 10px;border-radius:10px}
.medal{font-size:22px;line-height:1}
.m1,.m2,.m3{display:inline-block;width:40px;text-align:center}
@keyframes pulse-glow{0%{filter:drop-shadow(0 0 0 rgba(255,200,0,.0))}100%{filter:drop-shadow(0 0 8px rgba(255,200,0,.55))}}
.m1,.m2,.m3{animation:pulse-glow 1.6s ease-in-out infinite alternate}

/* Stars / Diamonds */
.stars{display:inline-flex;gap:3px;vertical-align:middle}
.tier-bronze .stars{--s:16}
.tier-silver .stars{--s:17}
.tier-gold .stars{--s:18}
.tier-emerald .stars{--s:20}
.tier-diamond .stars{--s:24}
.stars svg{width:calc(var(--s)*1px);height:calc(var(--s)*1px)}

/* Pager */
.pager{display:flex;align-items:center;justify-content:space-between;gap:10px;margin:8px 0}
.pager .pbtn{background:var(--chip);border:1px solid var(--frame);border-radius:10px;padding:8px 12px;font-weight:800;cursor:pointer}
.pager .pbtn[disabled]{opacity:.5;cursor:not-allowed}
.pager .pinfo{font-size:12px;color:var(--muted)}

/* Cards grid */
.container{padding:6px 12px 90px}
.grid{display:grid;grid-template-columns:1fr;gap:12px}
@media(min-width:560px){.grid{grid-template-columns:repeat(2,1fr)}}
@media(min-width:900px){.grid{grid-template-columns:repeat(3,1fr)}}
.card{background:var(--card);border:1px solid var(--frame);border-radius:14px;overflow:hidden;box-shadow:0 10px 24px rgba(0,0,0,.06);position:relative;transition:transform .18s ease, box-shadow .18s ease}
.card:hover{transform:translateY(-3px);box-shadow:0 14px 36px rgba(0,0,0,.12)}
.thumb{aspect-ratio:16/9;background:linear-gradient(135deg,#e9f5ef,#f6fbf8);display:grid;place-items:center}
.dark .thumb{background:linear-gradient(135deg,#122019,#0f1714)}
.badge{position:absolute;top:10px;left:10px;border-radius:999px;padding:6px 10px;background:linear-gradient(135deg,#2E8B57,#1F6B45);color:#fff;font-weight:800}
.badge::after{content:"";position:absolute;inset:-1px;border-radius:999px;background:conic-gradient(from 0deg,#7fffd4 0%, transparent 20%, transparent 60%, #7fffd4 80%, #7fffd4 100%);-webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);-webkit-mask-composite:xor; mask-composite:exclude; animation:shimmer 2.6s linear infinite;}
@keyframes shimmer{to{transform:rotate(360deg)}}
.body{padding:12px}
.name{font-size:16px;font-weight:900;margin:0 0 6px}
.desc{font-size:13px;color:var(--muted);margin:0 0 10px}
.actions{display:flex;gap:8px}
.btn{flex:1;display:inline-flex;align-items:center;justify-content:center;gap:8px;background:linear-gradient(135deg,var(--brand),var(--brand2));color:#fff;border:none;border-radius:12px;padding:10px 14px;font-weight:800;cursor:pointer;text-decoration:none}
.btn[disabled]{opacity:.5;cursor:not-allowed}
.btn.ghost{background:#fff;color:#1F6B45;border:1px solid var(--frame)}
.meta{font-size:12px;color:var(--muted);margin-top:6px;display:flex;gap:10px;align-items:center}
.countdown{font-weight:800}

/* Diamond shine & TOP-3 glow */
.tier-diamond .stars{ position:relative; overflow:visible }
.tier-diamond .stars::after{ content:""; position:absolute; top:-25%; bottom:-25%; left:-30%; width:40%; transform:skewX(-20deg); background:linear-gradient(90deg, transparent, rgba(255,255,255,.75), transparent); filter:blur(0.5px); pointer-events:none; animation:shineSweep 2.8s ease-in-out infinite; }
@keyframes shineSweep{ 0%{left:-30%;opacity:0} 8%{opacity:.9} 60%{left:110%;opacity:0} 100%{left:110%;opacity:0} }
.tier-diamond .stars svg{ filter:drop-shadow(0 0 6px rgba(57,182,255,.45)); animation:diamondTwinkle 2.2s ease-in-out infinite alternate; }
@keyframes diamondTwinkle{ 0%{ transform:scale(1); opacity:.95 } 100%{ transform:scale(1.03); opacity:1 } }
.rank.top-1{ box-shadow:0 10px 28px rgba(255,215,0,.35), 0 0 24px rgba(255,215,0,.22) inset; animation:crownPulseGold 1.8s ease-in-out infinite; }
.rank.top-2{ box-shadow:0 10px 28px rgba(150,180,210,.35), 0 0 24px rgba(180,200,220,.20) inset; animation:crownPulseSilver 1.9s ease-in-out infinite; }
.rank.top-3{ box-shadow:0 10px 28px rgba(198,148,98,.35), 0 0 24px rgba(198,148,98,.20) inset; animation:crownPulseBronze 2.0s ease-in-out infinite; }
@keyframes crownPulseGold{ 0%{transform:scale(1)} 100%{transform:scale(1.01)} }
@keyframes crownPulseSilver{ 0%{transform:scale(1)} 100%{transform:scale(1.009)} }
@keyframes crownPulseBronze{ 0%{transform:scale(1)} 100%{transform:scale(1.008)} }

/* MODAL */
.modal-mask{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.45);z-index:999}
.modal{width:min(840px,94%);max-height:90vh;overflow:auto;background:var(--card);border-radius:18px;border:1px solid var(--frame-strong);box-shadow:0 24px 64px rgba(0,0,0,.35);padding:18px;background-image: radial-gradient(1200px 600px at 10% -20%, rgba(46,139,87,.08), transparent 55%), radial-gradient(1200px 600px at 110% 120%, rgba(57,182,255,.08), transparent 55%);}
.ctl label{font-size:12px;color:var(--muted);display:block;margin-bottom:6px}
.ctl input,.ctl textarea,.ctl select{width:100%;padding:11px 12px;border:1px solid var(--frame);border-radius:12px;font:inherit;background:var(--card);color:var(--text);outline:none;transition:border .15s, box-shadow .15s}
.ctl input:focus{ border-color:var(--ring); box-shadow:0 0 0 4px color-mix(in srgb, var(--ring) 25%, transparent) }
.grid2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.grid3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px}
@media(max-width:560px){ .grid2,.grid3{grid-template-columns:1fr} }
.row{display:flex;gap:8px;justify-content:flex-end;margin-top:14px}
.danger{color:#c62828;font-size:12px;margin-right:auto}
.btn-ghost{background:#ffffff; border:1px solid var(--frame); border-radius:12px; padding:9px 12px; cursor:pointer}
.btn-solid{background:linear-gradient(135deg,var(--brand),var(--brand2));color:#fff;border:none;border-radius:12px;padding:10px 14px;font-weight:800;cursor:pointer}

/* === MOBILE USER CHIPS === */
.mstats{display:none;margin-top:6px;gap:6px;flex-wrap:wrap}
.mchip{display:inline-flex;align-items:center;gap:6px;max-width:100%;padding:6px 10px;border-radius:999px;background:var(--chip);border:1px solid var(--chip-b);font-size:12px;line-height:1;white-space:nowrap}
.mchip .txt{display:inline-block;max-width:180px;text-overflow:ellipsis;overflow:hidden}
@media(max-width:560px){
  .uinfo .meta{display:none}
  .mstats{display:flex}
  .mchip .txt{max-width:120px}
}
