/* ===========================
   LeaderMath — Premium Styles
   (Light/Dark ranglar uyg‘unligi + accessibility + motion-safe)
   =========================== */

/* 1) Reset & base */
*{box-sizing:border-box}
html,body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
:root{ color-scheme: light dark } /* brauzerga ishora */

/* 2) Rang tokenlari (light) */
:root{
  /* Brand */
  --brand:#2E8B57;       /* SeaGreen */
  --brand2:#1F6B45;      /* deeper green */
  --brand-accent:#39B6FF;

  /* Yoritilgan fon/text */
  --bg:#f5faf7;
  --surface:#ffffff;
  --text:#0c1a14;
  --muted:#376053;

  /* Chegaralar & oynavon qatlamlar */
  --frame:#dbeae1;
  --frame-strong:#b7d6c5;
  --chip:#eef7f2;
  --chip-b:#d1e8de;

  /* Effektyopish */
  --ring:#85d2b2;
  --radius:16px;

  /* Soyalar */
  --sh-card:0 10px 24px rgba(0,0,0,.08);
  --sh-card-hover:0 18px 42px rgba(0,0,0,.12);
  --sh-appbar:0 8px 24px rgba(0,0,0,.12);
  --sh-modal:0 24px 64px rgba(0,0,0,.35);

  /* Gradient border */
  --g-border:linear-gradient(135deg,#a6efd0,var(--brand) 50%,var(--brand-accent));

  /* Banner bg */
  --banner:linear-gradient(135deg,#f0fff6,#e8f6ef);

  /* Thumb bg */
  --thumb:linear-gradient(135deg,#e9f6ef,#f7fbf9);

  /* Tier ranglari (light) */
  --tier-bronze-1:#c69462; --tier-bronze-2:#9a6b3f; --tier-bronze-3:#7c4f2e;
  --tier-silver-1:#dde3ec; --tier-silver-2:#bfc6d4; --tier-silver-3:#9aa6b2;
  --tier-gold-1:#ffe082;   --tier-gold-2:#ffc107;   --tier-gold-3:#ff8f00;
  --tier-emerald-1:#9ce8c0;--tier-emerald-2:#2e8b57;--tier-emerald-3:#1f6b45;
  --tier-diamond-1:#b3eaff;--tier-diamond-2:#39b6ff;--tier-diamond-3:#0077ff;

  /* Selection & scroll */
  --selection-bg:color-mix(in srgb, var(--brand) 28%, #fff);
  --selection-tx:#06361f;

  /* Transitions */
  --tr-fast:.18s ease;
  --tr-slow:.35s ease;

  /* Container */
  --container-w:1200px;
}

/* 3) Rang tokenlari (dark) */
:root.dark{
  --bg:#0e1512;
  --surface:#142018;
  --text:#eaf7ee;
  --muted:#a5c7b4;

  --frame:#244b39;
  --frame-strong:#2f6b52;
  --chip:#122820;
  --chip-b:#2a5742;

  --ring:#2fbf7d;

  --sh-card:0 10px 28px rgba(0,0,0,.36);
  --sh-card-hover:0 22px 46px rgba(0,0,0,.5);
  --sh-appbar:0 10px 26px rgba(0,0,0,.45);
  --sh-modal:0 28px 70px rgba(0,0,0,.65);

  --g-border:linear-gradient(135deg,#1aa374,var(--brand) 55%,#2aa2ff);

  --banner:linear-gradient(135deg,#11231b,#0d1914);
  --thumb:linear-gradient(135deg,#102018,#0e1713);

  /* Tier ranglari (dark, biroz desaturatsiya + glow) */
  --tier-bronze-1:#b8845a; --tier-bronze-2:#8f633f; --tier-bronze-3:#6f4a2f;
  --tier-silver-1:#cfd7e5; --tier-silver-2:#aeb8c7; --tier-silver-3:#8a95a6;
  --tier-gold-1:#ffd86a;   --tier-gold-2:#f5b700;   --tier-gold-3:#e08900;
  --tier-emerald-1:#89e0b6;--tier-emerald-2:#2e8b57;--tier-emerald-3:#1b5e3e;
  --tier-diamond-1:#a7e5ff;--tier-diamond-2:#2faef9;--tier-diamond-3:#0070ef;

  --selection-bg:color-mix(in srgb, var(--brand) 42%, transparent);
  --selection-tx:#ddffee;
}

/* 4) Global qoidalar */
html,body{background:var(--bg);color:var(--text)}
::selection{background:var(--selection-bg);color:var(--selection-tx)}
:focus-visible{outline:3px solid color-mix(in srgb,var(--ring) 65%, transparent);outline-offset:2px;border-radius:8px}

/* Smooth-ish, motion-safe */
@media (prefers-reduced-motion:no-preference){
  *{transition:background-color var(--tr-fast), color var(--tr-fast), border-color var(--tr-fast), box-shadow var(--tr-fast), transform var(--tr-fast)}
}

/* Custom scrollbar (WebKit) */
*::-webkit-scrollbar{height:10px;width:10px}
*::-webkit-scrollbar-track{background:color-mix(in srgb,var(--bg) 70%, #000)}
*::-webkit-scrollbar-thumb{background:color-mix(in srgb,var(--brand) 55%, #000);border:2px solid transparent;border-radius:999px;background-clip:content-box}
*::-webkit-scrollbar-thumb:hover{background:color-mix(in srgb,var(--brand) 70%, #000);}

/* Body modifiers */
.modal-open{overflow:hidden}

/* 5) Appbar */
.appbar{
  position:sticky;top:0;z-index:90;
  background:linear-gradient(135deg,var(--brand),var(--brand2));
  color:#fff;padding:10px 12px;display:flex;align-items:center;gap:10px;
  box-shadow:var(--sh-appbar)
}
.logo{display:flex;align-items:center;justify-content:center;height:48px;width:48px;border-radius:12px;overflow:hidden;border:1px solid #ffffff33;background:#ffffff14}
.logo img{width:100%;height:100%;object-fit:contain}
.title{font-weight:800;font-size:18px;letter-spacing:.2px}
.spacer{flex:1}
.iconbtn{
  background:#ffffff22;border:1px solid #ffffff33;color:#fff;border-radius:12px;padding:8px 10px;
  font-weight:700;cursor:pointer;backdrop-filter:blur(4px)
}
.iconbtn:hover{background:#ffffff2e}
.iconbtn:active{transform:translateY(1px)}

/* 6) Userbar */
.userbar{
  background:var(--surface);border:1px solid var(--frame);border-radius:14px;margin:10px 12px;padding:12px;
  display:grid;grid-template-columns:56px 1fr auto;grid-template-areas:"ava name chip" "ava meta chip";
  column-gap:12px;row-gap:6px;box-shadow:var(--sh-card)
}
@media(max-width:560px){
  .userbar{grid-template-columns:56px 1fr;grid-template-areas:"ava name" "ava mstats" "chip chip"}
}
.ava{
  grid-area:ava;width:56px;height:56px;border-radius:50%;
  background:linear-gradient(135deg,var(--brand),var(--brand2));
  display:grid;place-items:center;color:#fff;font-weight:900;overflow:hidden;
  box-shadow:0 6px 16px rgba(0,0,0,.18), inset 0 0 0 1px #ffffff22
}
.ava img{width:100%;height:100%;object-fit:cover}
.uinfo{grid-area:name}
.uinfo b{display:block;font-size:16px;line-height:1.15}
.uinfo .meta{grid-area:meta;color:var(--muted);font-size:12px}
.uvals{grid-area:chip;text-align:right;align-self:center}
.chip{
  display:inline-flex;align-items:center;gap:6px;padding:7px 10px;border-radius:999px;
  background:var(--chip);border:1px solid var(--chip-b);font-size:12px
}
.link{color:inherit;text-decoration:underline dotted;text-underline-offset:3px}
.ustars{display:inline-flex;gap:3px;margin-left:8px;vertical-align:middle}
.btn-primary{
  display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:12px;font-weight:800;
  background:linear-gradient(135deg,var(--brand),var(--brand2));color:#fff;border:1px solid #0000;
  box-shadow:0 6px 16px rgba(46,139,87,.25)
}
.btn-primary:hover{filter:brightness(1.05)}
.btn-primary:active{transform:translateY(1px)}

/* 7) Banner */
.banner{
  margin:10px 12px;border-radius:18px;overflow:hidden;border:1px solid var(--frame);
  box-shadow:var(--sh-card);background:var(--banner);position:relative
}
/* gradient halo */
.banner::after{
  content:"";position:absolute;inset:-1px;border-radius:18px;
  background:radial-gradient(600px 220px at 10% -10%, rgba(46,139,87,.08), transparent 60%),
             radial-gradient(600px 220px at 110% 110%, rgba(57,182,255,.08), transparent 60%);
  pointer-events:none
}

/* 8) Glass + gradient border util */
.glass{
  background:color-mix(in srgb, var(--surface) 88%, transparent);
  backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px)
}
:root.dark .glass{background:color-mix(in srgb, var(--surface) 70%, transparent)}
.grad-border{position:relative}
.grad-border::before{
  content:""; position:absolute; inset:0; padding:1px; border-radius:14px;
  background:var(--g-border);
  -webkit-mask:linear-gradient(#000 0 0) content-box,linear-gradient(#000 0 0);
  -webkit-mask-composite:xor; mask-composite:exclude; pointer-events:none;
}

/* 9) Filtrlar */
.filters{
  margin:10px 12px;padding:10px;background:var(--surface);border:1px solid var(--frame);
  border-radius:14px;box-shadow:var(--sh-card)
}
.filters h4{margin:0 0 8px;font-size:14px;opacity:.8}
.chips{display:flex;flex-wrap:wrap;gap:8px}
.chip.filter{cursor:pointer}
.chip.filter[aria-pressed="true"]{
  background:linear-gradient(135deg,var(--brand),var(--brand2));border-color:#0000;color:#fff;
  box-shadow:0 6px 16px rgba(46,139,87,.25)
}
.chip.sm{font-size:11px;padding:5px 8px}

/* 10) Leaderboard */
.board{
  background:var(--surface);border:1px solid var(--frame);border-radius:16px;margin:10px 12px;padding:12px;border:none;
  box-shadow:var(--sh-card)
}
.board h3{margin:0 0 8px;font-size:16px}
.group{border:none;border-radius:14px;overflow:hidden;margin:10px 0;box-shadow:var(--sh-card)}
.board .group + .group{margin-top:14px}
.groupBody{padding:12px}
.groupHead{
  position:relative;border:none;border-radius:14px;padding:14px 16px;color:var(--muted);font-weight:900;
  display:flex;align-items:center;justify-content:space-between;gap:10px
}
:root.dark .groupHead{color:#c7ffe7}

/* Tier bg (light & dark auto) */
.groupHead.tier-bronze{background:linear-gradient(135deg,var(--tier-bronze-1),color-mix(in srgb,var(--tier-bronze-2) 60%, transparent))}
.groupHead.tier-silver{background:linear-gradient(135deg,var(--tier-silver-1),color-mix(in srgb,var(--tier-silver-2) 60%, transparent))}
.groupHead.tier-gold{background:linear-gradient(135deg,var(--tier-gold-1),color-mix(in srgb,var(--tier-gold-2) 58%, transparent))}
.groupHead.tier-emerald{background:linear-gradient(135deg,var(--tier-emerald-1),color-mix(in srgb,var(--tier-emerald-2) 60%, transparent))}
.groupHead.tier-diamond{background:linear-gradient(135deg,var(--tier-diamond-1),color-mix(in srgb,var(--tier-diamond-2) 60%, transparent))}

.tier-badge{
  font-weight:900;padding:6px 10px;border-radius:999px;border:1px solid var(--frame);
  background:color-mix(in srgb,#fff 55%, transparent)
}
:root.dark .tier-badge{background:color-mix(in srgb,#fff 12%, transparent)}
.legend{display:flex;align-items:center;gap:8px;font-size:12px;opacity:.9}

.rank{
  display:grid;grid-template-columns:54px 1fr auto;gap:12px;align-items:center;padding:10px;border-radius:12px;
  border:1px solid var(--frame);margin-bottom:8px;background:var(--surface);box-shadow:0 2px 6px rgba(0,0,0,.04);
  transition:transform var(--tr-fast), box-shadow var(--tr-fast);border:none;position:relative
}
.rank:hover{transform:translateY(-2px) scale(1.01);box-shadow:var(--sh-card-hover)}
.rnk{font-weight:900;background:var(--chip);border:1px solid var(--frame);padding:6px 10px;border-radius:10px}
.medal{font-size:22px;line-height:1}
.m1,.m2,.m3{display:inline-block;width:40px;text-align:center}
@keyframes pulse-glow{0%{filter:drop-shadow(0 0 0 rgba(255,200,0,.0))}100%{filter:drop-shadow(0 0 8px rgba(255,200,0,.55))}}
.m1,.m2,.m3{animation:pulse-glow 1.6s ease-in-out infinite alternate}

/* Yulduz/dimond o‘lchamlar */
.stars{display:inline-flex;gap:3px;vertical-align:middle}
.tier-bronze .stars{--s:16}
.tier-silver .stars{--s:17}
.tier-gold .stars{--s:18}
.tier-emerald .stars{--s:20}
.tier-diamond .stars{--s:24}
.stars svg{width:calc(var(--s)*1px);height:calc(var(--s)*1px)}

/* Pager */
.pager{display:flex;align-items:center;justify-content:space-between;gap:10px;margin:8px 0}
.pager .pbtn{
  background:var(--chip);border:1px solid var(--frame);border-radius:10px;padding:8px 12px;font-weight:800;cursor:pointer
}
.pager .pbtn:hover{box-shadow:0 6px 16px rgba(46,139,87,.18)}
.pager .pbtn[disabled]{opacity:.5;cursor:not-allowed}
.pager .pinfo{font-size:12px;color:var(--muted)}

/* 11) Cards grid */
.container{padding:6px 12px 90px;display:flex;justify-content:center}
#sections{width:100%;max-width:var(--container-w)}
.grid{display:grid;grid-template-columns:1fr;gap:12px}
@media(min-width:560px){.grid{grid-template-columns:repeat(2,1fr)}}
@media(min-width:1024px){.grid{grid-template-columns:repeat(3,1fr)}}

.card{
  background:var(--surface);border:1px solid var(--frame);border-radius:14px;overflow:hidden;
  box-shadow:var(--sh-card);position:relative;transition:transform var(--tr-fast), box-shadow var(--tr-fast)
}
.card:hover{transform:translateY(-3px);box-shadow:var(--sh-card-hover)}
.thumb{aspect-ratio:16/9;background:var(--thumb);display:grid;place-items:center}
.badge{
  position:absolute;top:10px;left:10px;border-radius:999px;padding:6px 10px;
  background:linear-gradient(135deg,var(--brand),var(--brand2));color:#fff;font-weight:800
}
.badge::after{
  content:"";position:absolute;inset:-1px;border-radius:999px;
  background:conic-gradient(from 0deg,#7fffd4 0%, transparent 20%, transparent 60%, #7fffd4 80%, #7fffd4 100%);
  -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite:xor; mask-composite:exclude; animation:shimmer 2.6s linear infinite;
  pointer-events:none
}
@keyframes shimmer{to{transform:rotate(360deg)}}
.body{padding:12px}
.name{font-size:16px;font-weight:900;margin:0 0 6px}
.desc{font-size:13px;color:var(--muted);margin:0 0 10px}
.actions{display:flex;gap:8px}
.btn{
  flex:1;display:inline-flex;align-items:center;justify-content:center;gap:8px;
  background:linear-gradient(135deg,var(--brand),var(--brand2));color:#fff;border:none;border-radius:12px;
  padding:10px 14px;font-weight:800;cursor:pointer;text-decoration:none
}
.btn:hover{filter:brightness(1.04)}
.btn[disabled]{opacity:.55;cursor:not-allowed}
.btn.ghost{background:color-mix(in srgb,#fff 75%, transparent);color:var(--brand2);border:1px solid var(--frame)}
.meta{font-size:12px;color:var(--muted);margin-top:6px;display:flex;gap:10px;align-items:center}
.countdown{font-weight:800}

/* 12) Diamond shine & TOP-3 glow */
.tier-diamond .stars{ position:relative; overflow:visible }
.tier-diamond .stars::after{
  content:""; position:absolute; top:-25%; bottom:-25%; left:-30%; width:40%; transform:skewX(-20deg);
  background:linear-gradient(90deg, transparent, rgba(255,255,255,.75), transparent);
  filter:blur(.5px); pointer-events:none; animation:shineSweep 2.8s ease-in-out infinite;
}
@keyframes shineSweep{
  0%{left:-30%;opacity:0} 8%{opacity:.9} 60%{left:110%;opacity:0} 100%{left:110%;opacity:0}
}
.tier-diamond .stars svg{ filter:drop-shadow(0 0 6px color-mix(in srgb,var(--tier-diamond-2) 45%, transparent)); animation:diamondTwinkle 2.2s ease-in-out infinite alternate }
@keyframes diamondTwinkle{ 0%{ transform:scale(1); opacity:.95 } 100%{ transform:scale(1.03); opacity:1 } }
.rank.top-1{ box-shadow:0 10px 28px rgba(255,215,0,.35), 0 0 24px rgba(255,215,0,.22) inset; animation:crownPulseGold 1.8s ease-in-out infinite }
.rank.top-2{ box-shadow:0 10px 28px rgba(150,180,210,.35), 0 0 24px rgba(180,200,220,.20) inset; animation:crownPulseSilver 1.9s ease-in-out infinite }
.rank.top-3{ box-shadow:0 10px 28px rgba(198,148,98,.35), 0 0 24px rgba(198,148,98,.20) inset; animation:crownPulseBronze 2.0s ease-in-out infinite }
@keyframes crownPulseGold{ 0%{transform:scale(1)} 100%{transform:scale(1.01)} }
@keyframes crownPulseSilver{ 0%{transform:scale(1)} 100%{transform:scale(1.009)} }
@keyframes crownPulseBronze{ 0%{transform:scale(1)} 100%{transform:scale(1.008)} }

/* 13) Modal */
.modal-mask{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.45);z-index:999}
.modal{
  width:min(840px,94%);max-height:90vh;overflow:auto;background:var(--surface);border-radius:18px;border:1px solid var(--frame-strong);
  box-shadow:var(--sh-modal);padding:18px;
  background-image:
    radial-gradient(1200px 600px at 10% -20%, color-mix(in srgb, var(--brand) 10%, transparent), transparent 55%),
    radial-gradient(1200px 600px at 110% 120%, color-mix(in srgb, var(--tier-diamond-2) 12%, transparent), transparent 55%);
}
.ctl label{font-size:12px;color:var(--muted);display:block;margin-bottom:6px}
.ctl input,.ctl textarea,.ctl select{
  width:100%;padding:11px 12px;border:1px solid var(--frame);border-radius:12px;font:inherit;background:var(--surface);color:var(--text);
  outline:none;transition:border var(--tr-fast), box-shadow var(--tr-fast)
}
.ctl input:focus{ border-color:var(--ring); box-shadow:0 0 0 4px color-mix(in srgb, var(--ring) 25%, transparent) }
.grid2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.grid3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px}
@media(max-width:560px){ .grid2,.grid3{grid-template-columns:1fr} }
.row{display:flex;gap:8px;justify-content:flex-end;margin-top:14px}
.danger{color:#cc3a3a;font-size:12px;margin-right:auto}
.btn-ghost{background:#ffffff; border:1px solid var(--frame); border-radius:12px; padding:9px 12px; cursor:pointer}
:root.dark .btn-ghost{background:color-mix(in srgb,#fff 7%, transparent)}
.btn-solid{
  background:linear-gradient(135deg,var(--brand),var(--brand2));color:#fff;border:none;border-radius:12px;padding:10px 14px;font-weight:800;cursor:pointer
}

/* 14) Mobile user chips */
.mstats{display:none;margin-top:6px;gap:6px;flex-wrap:wrap}
.mchip{
  display:inline-flex;align-items:center;gap:6px;max-width:100%;
  padding:6px 10px;border-radius:999px;background:var(--chip);border:1px solid var(--chip-b);
  font-size:12px;line-height:1;white-space:nowrap
}
.mchip .txt{display:inline-block;max-width:180px;text-overflow:ellipsis;overflow:hidden}
@media(max-width:560px){
  .uinfo .meta{display:none}
  .mstats{display:flex}
  .mchip .txt{max-width:120px}
}

/* 15) Utility: container max width */
.container{display:flex;justify-content:center}
#sections{width:100%;max-width:var(--container-w)}
