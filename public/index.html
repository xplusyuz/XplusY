<!DOCTYPE html><html lang='uz'><head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover">
<title>LeaderMath.UZ — Kirish</title>
<link rel="icon" href="logo.png" sizes="192x192" />
<link rel="apple-touch-icon" href="logo.png" />
<meta name="theme-color" content="#0ea5e9">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.min.js"></script>
<link rel="stylesheet" href="assets/index1-ui.css">
<link rel="stylesheet" href="assets/index1-adapter.css">

</head><body>
  <!-- SCROLL PROGRESS -->
  <div class="scroll-progress"><div class="scroll-progress-bar" id="scrollProgress"></div></div>
  <!-- SCROLL TO TOP -->
  <button class="scroll-to-top" id="scrollToTop"><i class="fa-solid fa-arrow-up"></i></button>

  <!-- 3D CANVAS -->
  <canvas id="three-canvas"></canvas>

  <div class="app">
    <header>
      <div class="header-card">
        <img src="logo.png" alt="LeaderMath.UZ" class="logo-img">
        <div class="header-text">
          <div class="header-title">LeaderMath.UZ</div>
          <div class="header-sub">Premium login + index1 UI</div>
        </div>
        <div class="header-tag"><i class="fa-solid fa-mobile-screen-button"></i>Mobil optimallashtirilgan</div>
      </div>
    </header>

    <main>
      
<section class="section-shell" style="text-align:center;">
  <div class="section-title"><i class="fa-solid fa-right-to-bracket"></i> Kirish</div>
  <div class="section-sub" style="margin-top:10px;">Bir bosishda ID+Parol yaratiladi yoki mavjud ID bilan kirasiz.</div>
</section>

<section class="section-shell">
  <div class="section-header">
    <div class="section-title-wrap">
      <div class="section-title"><i class="fa-solid fa-key"></i> Login</div>
      <div class="section-sub">Sodda, ixcham, 1:1 index1 UI</div>
    </div>
    <div class="section-chip" id="dt">—</div>
  </div>

  <div style="max-width:520px; margin:0 auto; display:flex; flex-direction:column; gap:12px;">
    <input id="inId" placeholder="ID (masalan: LM-000001)" autocomplete="username">
    <input id="inPw" placeholder="Parol" type="password" autocomplete="current-password">
    <button class="btn" id="btnLogin"><i class="fa-solid fa-arrow-right-to-bracket"></i> Kirish</button>

    <div style="display:flex; gap:10px; justify-content:center; flex-wrap:wrap; margin-top:6px;">
      <button class="pill" id="btnStart"><i class="fa-solid fa-wand-magic-sparkles"></i> Men yangiman</button>
      <button class="pill" id="autoGo"><i class="fa-solid fa-bolt"></i> Avto kirish</button>
      <span class="pill" id="autoGoHint" style="cursor:default; opacity:.9;">—</span>
    </div>

    <div style="display:flex; gap:10px; justify-content:center; flex-wrap:wrap; margin-top:10px;">
      <a class="footer-link" id="goApp" href="app.html"><i class="fa-solid fa-house"></i> App</a>
    </div>
  </div>
</section>

<div class="toast" id="toast"></div>

<!-- Credentials modal (existing ids) -->
<div id="credModal" class="modalBackdrop" style="display:none;">
  <div class="section-shell" style="max-width:520px; margin:auto; position:relative;">
    <button class="close-btn" id="credClose" style="top:18px; right:18px;"><i class="fa-solid fa-xmark"></i></button>
    <div class="section-title" id="credTitle" style="text-align:left;"><i class="fa-solid fa-id-card"></i> ID va Parol</div>
    <div class="section-sub" style="text-align:left; margin-top:8px;">Yozib oling (keyin profil ichidan ham ko‘rasiz).</div>
    <div style="margin-top:14px; display:flex; flex-direction:column; gap:10px;">
      <div style="display:flex; gap:10px; align-items:center;">
        <input id="credId" readonly>
        <button class="pill" id="copyId"><i class="fa-solid fa-copy"></i></button>
      </div>
      <div style="display:flex; gap:10px; align-items:center;">
        <input id="credPw" readonly>
        <button class="pill" id="copyPw"><i class="fa-solid fa-copy"></i></button>
      </div>
      <button class="btn" id="copyBoth"><i class="fa-solid fa-copy"></i> Ikkalasini nusxa olish</button>
    </div>
    <div style="display:flex; justify-content:center; margin-top:14px;">
      <a class="footer-link" id="goApp" href="app.html"><i class="fa-solid fa-arrow-right"></i> App’ga o‘tish</a>
    </div>
  </div>
</div>

    </main>

    <footer>
      <div class="footer-card">
        <div class="footer-left">
          <div class="footer-name">LeaderMath.UZ</div>
          <div style="color:var(--muted);font-size:13px;">Premium glass • 3D фон • Yagona index1 UI</div>
          <div style="font-size: 12px; color: var(--muted); margin-top: 10px;">© 2025 LeaderMath.UZ</div>
        </div>
        <div class="footer-right">
          <a href="app.html" class="footer-link"><i class="fa-solid fa-house"></i> App</a>
          <a href="challenge.html" class="footer-link"><i class="fa-solid fa-bolt"></i> Challenge</a>
          <a href="exam.html" class="footer-link"><i class="fa-solid fa-graduation-cap"></i> Exam</a>
        </div>
      </div>
    </footer>
  </div>

  <!-- MODAL (optional, for data-link cards) -->
  <div id="page-modal">
    <div class="modal-inner">
      <button class="close-btn" id="modal-close"><i class="fa-solid fa-xmark"></i></button>
      <iframe class="modal-frame" id="modal-frame" src=""></iframe>
    </div>
  </div>

  <script src="assets/index1-ui.js"></script>
  <script type='module'>

  import { registerAuto, login } from "./assets/js/auth.js";
  const $=id=>document.getElementById(id);
  const toast=(t)=>{ const el=$("toast"); el.textContent=t; el.style.display="block";
    clearTimeout(window.__t); window.__t=setTimeout(()=>el.style.display="none", 2600); };

  function fmtUZ(){
    const d=new Date();
    return d.toLocaleDateString("uz-UZ",{weekday:"long", year:"numeric", month:"long", day:"numeric"})+
      " • " + d.toLocaleTimeString("uz-UZ",{hour:"2-digit",minute:"2-digit"});
  }
  $("dt").textContent=fmtUZ(); setInterval(()=>$("dt").textContent=fmtUZ(), 1000*30);

  $("btnStart").onclick = async ()=>{
    try{
      $("btnStart").disabled=true;
      const r = await registerAuto();
      // Login token is set by registerAuto(); show credentials in a small modal for saving.
      $("inId").value = r.loginId;
      $("inPw").value = r.password;
      showCredModal(r.loginId, r.password);
    }catch(e){ toast(e.message||"Xatolik"); }
    finally{ $("btnStart").disabled=false; }
  };

  $("btnLogin").onclick = async ()=>{
    try{
      const id=$("inId").value.trim();
      const pw=$("inPw").value;
      if(!id||!pw) return toast("ID va Parolni kiriting");
      $("btnLogin").disabled=true;
      await login(id,pw);
      location.href="./app.html";
    }catch(e){ toast("Kirish xato: "+(e.message||"")); }
    finally{ $("btnLogin").disabled=false; }
  };

  // --- Credentials modal helpers ---
  let autoTimer=null;
  function openModal(){
    const m=$("credModal");
    m.classList.add("open");
    m.setAttribute("aria-hidden","false");
  }
  function closeModal(){
    const m=$("credModal");
    m.classList.remove("open");
    m.setAttribute("aria-hidden","true");
    if(autoTimer) { clearInterval(autoTimer); autoTimer=null; }
  }
  async function copyText(t){
    try{ await navigator.clipboard.writeText(t); toast("✅ Nusxalandi"); }
    catch{ toast("⚠️ Nusxalab bo‘lmadi"); }
  }
  function prettyId(raw){
    // Always show full ID (including possible LM- prefix) so user can write it down.
    const s = String(raw||"").trim();
    return s || "—";
  }
  function showCredModal(id,pw){
    $("credId").textContent = prettyId(id);
    $("credPw").textContent = String(pw||"—");
    openModal();

    // countdown
    let s=10;
    $("autoGo").textContent=String(s);
    autoTimer=setInterval(()=>{
      s--; $("autoGo").textContent=String(Math.max(s,0));
      if(s<=0){ clearInterval(autoTimer); autoTimer=null; location.href="./app.html"; }
    },1000);
  }

  $("credClose").onclick = closeModal;
  $("goApp").onclick = ()=> location.href="./app.html";
  $("copyId").onclick = ()=> copyText($("credId").textContent.trim());
  $("copyPw").onclick = ()=> copyText($("credPw").textContent.trim());
  $("copyBoth").onclick = ()=> copyText(`ID: ${$("credId").textContent.trim()}\nParol: ${$("credPw").textContent.trim()}`);
  $("credModal").addEventListener("click", (e)=>{ if(e.target && e.target.hasAttribute("data-close")) closeModal(); });

</script>
</body></html>