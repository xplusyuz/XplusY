<!DOCTYPE html>

<html lang="uz">
<head>
<script src="./firebase-web-config.js"></script>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>LeaderMath.UZ â€” Admin</title>


<link href="assets/index1-ui.css" rel="stylesheet"/><link href="assets/index1-adapter.css" rel="stylesheet"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/><meta content="#0ea5e9" name="theme-color"/></head>
<body><div class="scroll-progress"><div class="scroll-progress-bar" id="scrollProgress"></div></div><button class="scroll-to-top" id="scrollToTop"><i class="fa-solid fa-arrow-up"></i></button><canvas id="three-canvas"></canvas>
<!-- Google Admin Gate -->
<div class="gateOverlay" id="googleGate" style="display:none;">
<div class="glass" style="max-width:420px; padding:18px;">
<div class="h1" style="margin-bottom:6px;">Admin kirish</div>
<div class="muted" style="font-size:13px; line-height:1.5; margin-bottom:14px;">
        Faqat <b>sohibjonmath@gmail.com</b> Google akkaunti orqali kirish mumkin.
      </div>
<button class="btn primary" id="btnGoogleLogin" style="width:100%; justify-content:center;">ğŸ” Google bilan kirish</button>
<div class="muted" id="gateMsg" style="margin-top:10px; font-size:12px;"></div>
</div>
</div>
<canvas class="seasonCanvas" id="seasonCanvas"></canvas>
<div class="toast" id="toast"></div>
<div class="adm">
<!-- Sidebar -->
<aside class="glass admSide">
<div class="admBrand">
<div aria-hidden="true" class="admLogoDot"></div>
<div>
<div class="h1" style="font-size:18px;font-weight:900;">LeaderMath Admin</div>
<div class="muted" id="adminSub" style="font-size:12px; margin-top:2px;">â€”</div>
</div>
</div>
<div aria-label="Admin boâ€˜limlari" class="admNav" role="tablist">
<button aria-selected="true" class="tabBtn active" id="tabUsers" role="tab" type="button">ğŸ‘¥ Users</button>
<button aria-selected="false" class="tabBtn" id="tabComments" role="tab" type="button">ğŸ’¬ Sharhlar</button>
<button aria-selected="false" class="tabBtn" id="tabNotify" role="tab" type="button">ğŸ”” Notif</button>
<button aria-selected="false" class="tabBtn" id="tabSent" role="tab" type="button">ğŸ§¾ Tarix</button>
</div>
<div class="admFoot">
<div class="pill">Admin ID: <b id="adminId">â€”</b></div>
<button class="btn" id="btnBack" type="button">â¬… App</button>
<button class="btn" id="btnLogout" style="border-color: rgba(232,77,110,.25) !important;" type="button">Chiqish</button>
</div>
</aside>
<!-- Main -->
<main class="admMain">
<header class="glass admTop">
<input class="lbSearch" id="q" placeholder="Qidirish: ID / ism (users) â€¦"/>
<div style="display:flex; gap:10px; align-items:center; flex-wrap:wrap;">
<button class="btn btnPrimary" id="quickNotify" type="button">+ Notif</button>
<button class="btn" id="refresh" type="button">âŸ³</button>
</div>
</header>
<section class="admGrid">
<div class="glass admPanel" id="panelLeft">
<!-- USERS -->
<div class="adminPane" id="paneUsers">
<div class="panelHead" style="margin-bottom:10px;">
<div>
<div class="nameLine">Foydalanuvchilar</div>
<div class="small">Checkbox bilan tanlang â€¢ Notif yuborishda ishlatiladi</div>
</div>
<div style="display:flex; gap:10px; align-items:center; flex-wrap:wrap;">
<input class="lbSearch" id="userSearch" placeholder="LM-000001 yoki ismâ€¦"/>
<button class="btn" id="usersReload" type="button">Yangilash</button>
</div>
</div>
<table aria-label="Users" class="table">
<thead>
<tr>
<th style="width:70px;">Tanla</th>
<th>Foydalanuvchi</th>
<th style="width:100px;">ğŸ† Ball</th>
<th style="width:120px;">ğŸ’° Balans</th>
</tr>
</thead>
<tbody id="usersBody">
<tr><td class="small" colspan="4">Yuklanmoqdaâ€¦</td></tr>
</tbody>
</table>
<div style="display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap; margin-top:10px;">
<div class="small">Tanlanganlar: <b id="selCount">0</b></div>
<button class="btn" id="usersLoadMore" type="button">Yana yuklash</button>
</div>
</div>
<!-- COMMENTS -->
<div class="adminPane" id="paneComments" style="display:none;">
<div class="panelHead" style="margin-bottom:10px;">
<div>
<div class="nameLine">Sharhlar moderatsiya</div>
<div class="small">Izohlarni oâ€˜chirish / tahrirlash â€¢ Like/Reply sonlari koâ€˜rinadi</div>
</div>
<button class="btn" id="commentsReload" type="button">Yangilash</button>
</div>
<ul class="commentList" id="adminCommentList" style="margin:0;"></ul>
<div style="margin-top:10px;">
<button class="btn" id="commentsLoadMore" type="button">Yana yuklash</button>
</div>
</div>
<!-- NOTIFY -->
<div class="adminPane" id="paneNotify" style="display:none;">
<div class="panelHead" style="margin-bottom:10px;">
<div>
<div class="nameLine">Bildirishnoma yuborish</div>
<div class="small">Umumiy / shaxsiy / tanlanganlarga</div>
</div>
</div>
<div class="row" style="align-items:flex-end; margin-bottom:10px;">
<div style="flex:1;">
<div class="small" style="margin-bottom:6px;">Kimga?</div>
<select class="input" id="audience" style="height:44px;">
<option value="all">Barchaga (umumiy)</option>
<option value="single">Bitta foydalanuvchiga (shaxsiy)</option>
<option value="selected">Tanlanganlarga</option>
</select>
</div>
<div style="flex:1;">
<div class="small" style="margin-bottom:6px;">Login ID (single)</div>
<input class="input" id="singleId" placeholder="LM-000001"/>
</div>
</div>
<input class="input" id="ntTitle" maxlength="60" placeholder="Sarlavha (60)"/>
<div style="height:10px;"></div>
<textarea class="editArea" id="ntBody" maxlength="240" placeholder="Matn (240)"></textarea>
<div class="editBar">
<button class="btn btnPrimary" id="sendNotif" type="button">Yuborish</button>
</div>
<div class="small" style="opacity:.9; line-height:1.5;">
<b>Tanlanganlarga</b> yuborish uchun â€œUsersâ€ tabida checkbox bilan tanlang.
            </div>
</div>
<!-- SENT HISTORY -->
<div class="adminPane" id="paneSent" style="display:none;">
<div class="panelHead" style="margin-bottom:10px;">
<div>
<div class="nameLine">Tarix</div>
<div class="small">Yuborilgan bildirishnomalar â€¢ oâ€˜qiganlar (read receipts)</div>
</div>
<button class="btn" id="sentReload" type="button">Yangilash</button>
</div>
<ul class="notifList" id="sentList" style="margin:0;"></ul>
<div style="margin-top:10px;">
<button class="btn" id="sentLoadMore" type="button">Yana yuklash</button>
</div>
</div>
</div>
<!-- Right panel: quick hints + status -->
<div class="glass admPanel" id="panelRight">
<div class="nameLine">Tezkor boshqaruv</div>
<div class="small" style="margin-top:4px; line-height:1.6;">
            â€¢ Users: tanlang â†’ Notifâ€™da â€œTanlanganlargaâ€ yuboring<br/>
            â€¢ Sharhlar: tartib va tozalash (moderatsiya)<br/>
            â€¢ Tarix: yuborilgan xabarlar va oâ€˜qiganlar roâ€˜yxati
          </div>
<div class="hr" style="margin:14px 0;"></div>
<div class="pill" style="display:flex; justify-content:space-between;">
<span>Tip</span>
<span>Qidiruv: <b>#ID</b> yoki <b>ism</b></span>
</div>
<div style="height:12px;"></div>
<div class="glass" style="padding:12px; border-radius:18px;">
<div class="small" style="opacity:.9; line-height:1.6;">
              Dizayn: bir xil â€œUI kitâ€ â€” toza, interaktiv va mobilga mos. 
              Agar ranglarni yanada â€œbahorâ€ kayfiyatiga oâ€˜tkazsak ham boâ€˜ladi.
            </div>
</div>
</div>
</section>
</main>
</div>
<script src="assets/js/seasons.js" type="module"></script>
<script>
    // Optional: set window.FIREBASE_WEB_CONFIG here (or create a separate file) to enable Google login.
    // window.FIREBASE_WEB_CONFIG = { apiKey:"...", authDomain:"...", projectId:"...", appId:"..." };
  </script>
<script src="assets/js/firebase_google_admin.js" type="module"></script>
<script src="assets/js/admin.js" type="module"></script>
<script>
    // Small helpers: quick buttons mapped to existing logic
    (function(){
      const $=(id)=>document.getElementById(id);
      const q=$("q");
      if(q){
        q.addEventListener("input", ()=>{
          const us=$("userSearch");
          if(us) us.value = q.value;
          const ev = new Event("input",{bubbles:true});
          if(us) us.dispatchEvent(ev);
        });
      }
      $("refresh")?.addEventListener("click", ()=>{
        $("usersReload")?.click();
        $("commentsReload")?.click();
        $("sentReload")?.click();
      });
      $("quickNotify")?.addEventListener("click", ()=>{
        $("tabNotify")?.click();
        setTimeout(()=>$("ntTitle")?.focus(), 150);
      });
    })();
  </script>
<script src="assets/index1-ui.js"></script></body>
</html>
