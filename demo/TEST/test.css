:root{
  --brand:#2E8B57; --brand2:#1F6B45;
  --bg:#f6faf8; --text:#0f172a; --muted:#667a72; --frame:#e3efe8;
}
*{ box-sizing:border-box }

body{
  margin:0; background:var(--bg); color:var(--text);
  font:16px/1.5 Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;
}

/* ===== Header ===== */
header{
  position:sticky; top:0; background:#fff;
  border-bottom:1px solid var(--frame); z-index:10;
  backdrop-filter:saturate(120%);
}
.wrap{ max-width:960px; margin:0 auto; padding:14px }
.row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap }
header .wrap{ position:relative }
header::after{
  content:""; position:sticky; top:0; height:0; display:block;
  box-shadow:0 12px 24px rgba(0,0,0,.06);
}

/* ===== Chips / Badges ===== */
.chip{
  border:1px solid #d8e9df; background:#f4fbf7;
  padding:6px 10px; border-radius:999px; font-weight:600;
}
.chip.good{ background:#e8f5ee; border-color:#c7ead6; color:#0f5132 }
.chip.warn{ background:#fff4e5; border-color:#ffe0b2; color:#8a4b03 }
.chip.bad{  background:#fdecea; border-color:#f5c2c7; color:#842029 }

/* ===== Buttons ===== */
.btn{
  padding:10px 14px; border-radius:12px; border:1px solid var(--brand);
  background:linear-gradient(135deg,var(--brand),var(--brand2));
  color:#fff; cursor:pointer; font-weight:700; text-decoration:none; display:inline-block;
  transition:transform .12s ease, box-shadow .12s ease, filter .12s ease;
}
.btn:hover{ transform:translateY(-1px); box-shadow:0 8px 20px rgba(46,139,87,.25) }
.btn:active{ transform:none; filter:saturate(1.05) }
.btn:focus-visible{ outline:none; box-shadow:0 0 0 4px rgba(46,139,87,.25) }
.btn.ghost{ background:#fff; color:var(--brand) }

/* ===== Cards ===== */
.card{
  background:#fff; border:1px solid var(--frame); border-radius:16px;
  padding:16px; margin:16px 0;
}

/* ===== Options ===== */
.opt{
  display:flex; gap:10px; align-items:flex-start; padding:10px 12px;
  border:1px solid #edf3ee; border-radius:12px; background:#fbfdfc; margin:8px 0;
  transition: box-shadow .2s ease, background .2s ease, border-color .2s ease, transform .1s ease;
}
.opt:hover{
  border-color:var(--brand); box-shadow:0 0 0 4px rgba(46,139,87,.12); background:#fff
}
.opt.active{ border-color:var(--brand); background:#f2fbf6; box-shadow:0 0 0 3px rgba(46,139,87,.18) }
.opt.correct{ border-color:#22c55e; background:#ecfdf5 }
.opt.wrong{ border-color:#ef4444; background:#fef2f2 }

/* ===== Navigation dots ===== */
.navdots{ display:flex; flex-wrap:wrap; gap:8px; margin-top:8px }
.dot{
  min-width:36px; height:36px; border-radius:10px; border:1px solid var(--frame);
  display:grid; place-items:center; background:#fff; cursor:pointer; padding:0 10px;
  transition: box-shadow .15s, transform .1s, border-color .15s;
}
.dot:hover{ border-color:var(--brand); box-shadow:0 0 0 3px rgba(46,139,87,.12) }
.dot.active{ border-color:var(--brand); box-shadow:0 0 0 3px rgba(46,139,87,.18) }
.dot.answered{ background:#1F6B45; color:#fff; border-color:#0f3c28 }
.dot.visited:not(.answered):not(.active){ background:#f5f8f7 }

/* ===== Question image (frameless, crisp) ===== */
#qImage,
.qimg.clean{
  width:min(860px,100%); max-height:80vh; display:block; margin:10px auto;
  border:none; outline:none; box-shadow:none; background:transparent;
  border-radius:0;               /* to‘liq “ramkasiz” */
  image-rendering:auto;
  -webkit-user-drag:none; user-select:none; pointer-events:none;  /* olib chiqib ketishni qiyinlashtiradi */
}
.qimg.inline{ display:inline-block; vertical-align:middle; margin:0 2px }

/* ===== Stats ===== */
.stats-grid{ display:grid; grid-template-columns:repeat(auto-fit,minmax(180px,1fr)); gap:10px }
.stat{ border:1px solid var(--frame); border-radius:12px; padding:10px; background:#fff }

/* ===== Detail table ===== */
.tbl{ width:100%; border-collapse:separate; border-spacing:0 8px }
.tbl th{ font-weight:700; text-align:left; color:#64748b; font-size:14px }
.tbl td,.tbl th{ padding:8px 10px; background:#fff; border-radius:10px }
.tbl tr:hover td{ box-shadow:0 2px 10px rgba(0,0,0,.06) }

/* ===== Helpers ===== */
.hidden{ display:none!important }

/* Printni bloklash */
@media print{ body{ display:none } }

/* ===== Mobile polish ===== */
@media (max-width:600px){
  .wrap{ padding:12px }
  .btn{ padding:9px 12px; border-radius:10px }
  .dot{ min-width:34px; height:34px; border-radius:9px }
  #qImage,.qimg.clean{ max-height:60vh }
}
/* ===== Loading Screen ===== */
.loading-screen {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 1000;
}

.loading-spinner {
  width: 50px;
  height: 50px;
  border: 5px solid rgba(255, 255, 255, 0.3);
  border-radius: 50%;
  border-top-color: #fff;
  animation: spin 1s ease-in-out infinite;
  margin-bottom: 20px;
}

.loading-text {
  color: #fff;
  font-weight: 600;
  font-size: 1rem;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* ===== User Info ===== */
.user-info {
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.15);
  padding: 5px 10px;
  border-radius: 20px;
  margin: 0 10px;
  border: 1px solid rgba(255, 255, 255, 0.25);
  max-width: 180px;
}

.user-name {
  font-weight: 600;
  font-size: 0.7rem;
  display: flex;
  align-items: center;
  gap: 4px;
  color: #333;
}
/* ===== Loading Screen ===== */
#loading-screen {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 1000;
}

.loading-spinner {
  width: 50px;
  height: 50px;
  border: 5px solid rgba(255, 255, 255, 0.3);
  border-radius: 50%;
  border-top-color: #fff;
  animation: spin 1s ease-in-out infinite;
  margin-bottom: 20px;
}

.loading-text {
  color: #fff;
  font-weight: 600;
  font-size: 1rem;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* ===== User Info ===== */
.user-info {
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.15);
  padding: 5px 10px;
  border-radius: 20px;
  margin: 0 10px;
  border: 1px solid rgba(255, 255, 255, 0.25);
  max-width: 180px;
}

.user-name {
  font-weight: 600;
  font-size: 0.7rem;
  display: flex;
  align-items: center;
  gap: 4px;
  color: #333;
}