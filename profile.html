<!doctype html>
<html lang="uz"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>Profil</title>
<link rel="icon" type="image/svg+xml" href="assets/logo.svg">
<link rel="stylesheet" href="assets/style.css">
</head>
<body>
<header>
  <div class="header-inner">
    <div class="logo"><img src="assets/logo.svg" alt="" width="22" height="22"></div>
    <div class="brand">MathCenter</div>
    <nav>
      <a class="" href="index.html">Bosh sahifa</a>
      <a class="" href="courses.html">Kurslar</a>
      <a class="" href="tests.html">Testlar</a>
      <a class="" href="simulators.html">Simulyatorlar</a>
      <a class="active" href="profile.html">Profil</a>
    </nav>
    <div class="greet" id="greet"></div>
  </div>
</header>
<div class="toast"></div>
<div class="container">
<h2>Profil</h2>
<div class="grid cols-2">
  <section class="card" style="padding:16px">
    <h3>Ma'lumotlar</h3>
    <div class="grid" style="gap:10px">
      <div class="field"><label>ID</label><input id="pfId" readonly></div>
      <div class="grid" style="grid-template-columns:1fr 1fr 1fr;gap:10px">
        <div class="field"><label>Ism</label><input id="pfFirst"></div>
        <div class="field"><label>Familiya</label><input id="pfLast"></div>
        <div class="field"><label>Sharif</label><input id="pfPatron"></div>
      </div>
      <div class="grid" style="grid-template-columns:1fr 1fr;gap:10px">
        <div class="field"><label>Tug‘ilgan sana</label><input id="pfBirth" type="date"></div>
        <div class="field"><label>Telefon</label><input id="pfPhone" placeholder="+998..."></div>
      </div>
      <div class="grid" style="grid-template-columns:1fr 1fr;gap:10px">
        <div class="field"><label>Telegram</label><input id="pfTelegram" placeholder="@username yoki link"></div>
        <div class="field"><label>Email</label><input id="pfEmail" disabled></div>
      </div>
      <div class="field"><label>Yashash manzili</label><input id="pfAddress"></div>
      <div class="field"><label>Maktab nomi</label><input id="pfSchool"></div>
      <div class="field"><label>Rol</label>
        <select id="pfRole">
          <option value="">Tanlang</option>
          <option value="oqituvchi">O'qituvchi</option>
          <option value="oquvchi">O'quvchi</option>
          <option value="abiturient">Abiturient</option>
          <option value="foydalanuvchi">Foydalanuvchi</option>
        </select>
      </div>
      <div class="grid" style="grid-template-columns:1fr 1fr;gap:10px">
        <div class="field"><label>Balans</label><input id="pfBalance" type="number"></div>
        <div class="field"><label>Ball</label><input id="pfPoints" type="number"></div>
      </div>
      <div style="display:flex;gap:8px;justify-content:flex-end">
        <button class="btn" id="pfCancel">Bekor</button>
        <button class="btn pri" id="pfSave">Saqlash</button>
      </div>
    </div>
  </section>
  <aside class="card" style="padding:16px">
    <h3>Promokod</h3>
    <div class="field"><label>Kod</label><input id="promoCode" placeholder="ABC123"></div>
    <button class="btn pri" id="promoApply">Qo‘llash</button>
    <p id="promoMsg" style="color:#0b5d43"></p>
  </aside>
</div>
<div style="margin-top:16px"><button class="btn" id="logout">Chiqish</button></div>

  <div class="lock-cover"></div>
</div>

<button class="btn pri admin-toggle" style="display:none">Admin</button>
<div class="drawer" id="adminDrawer">
  <header><b>Admin panel</b><button class="btn" id="closeDrawer">Yopish</button></header>
  <div class="content" id="adminContent"></div>
</div>

<footer>© 2025 MathCenter.uz</footer>

<script type="module">
import { activeNav, adminAllowed, updateGreeting } from './assets/app.js';
activeNav(); updateGreeting();
const btn = document.querySelector('.admin-toggle'); const drawer=document.getElementById('adminDrawer');
function sync(){ btn.style.display = adminAllowed() ? 'inline-block':'none'; }
sync(); document.addEventListener('profile-updated', ()=>{ sync(); updateGreeting(); });
btn.addEventListener('click', ()=>{ if(!adminAllowed()) return; drawer.classList.add('open'); });
document.getElementById('closeDrawer').addEventListener('click', ()=>drawer.classList.remove('open'));
</script>
<script type="module" src="js/profile.js"></script>
<script type="module" src="js/profile.admin.js"></script></body></html>