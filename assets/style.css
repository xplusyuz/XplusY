
:root{--bg:#0b1220;--fg:#e8eef9;--card:#0f172a;--muted:#90a4c8;--accent:#0ea5e9;--ok:#22c55e;--danger:#ef4444}
:root.light{--bg:#f8fafc;--fg:#0b1220;--card:#ffffff;--muted:#48607b;--accent:#0ea5e9}
*{box-sizing:border-box}html,body{height:100%}body{margin:0;background:var(--bg);color:var(--fg);font-family:Inter,system-ui,Segoe UI,Arial,sans-serif}
a{color:var(--accent);text-decoration:none}
:root{--glass:rgba(255,255,255,.06);--shadow:0 10px 30px rgba(0,0,0,.25);--radius:16px}
.card{background:var(--card);border:1px solid rgba(255,255,255,.06);border-radius:var(--radius);box-shadow:var(--shadow);backdrop-filter:saturate(120%) blur(6px)}
.p-4{padding:1rem}.mb-1{margin-bottom:.25rem}.mb-2{margin-bottom:.5rem}.mb-3{margin-bottom:.75rem}.mt-1{margin-top:.25rem}.mt-2{margin-top:.5rem}.mt-3{margin-top:.75rem}
.title{font-size:1.75rem}.muted{color:var(--muted)}.small{font-size:.9rem}.hidden{display:none}.error{color:var(--danger)}
.input{width:100%;padding:.75rem;border-radius:12px;border:1px solid rgba(255,255,255,.14);background:transparent;color:var(--fg)}
.btn{padding:.75rem 1rem;border-radius:12px;background:var(--accent);color:#fff;border:none;cursor:pointer;transition:transform .06s ease,opacity .2s ease}
.btn:active{transform:scale(.98)}.btn.quiet{background:transparent;border:1px dashed var(--accent);color:var(--accent)}
.btn:disabled{opacity:.5;cursor:not-allowed}.w-100{width:100%}
.hr{display:flex;align-items:center;gap:.5rem;color:var(--muted);margin:.5rem 0}.hr::before,.hr::after{content:"";flex:1;height:1px;background:rgba(255,255,255,.1)}

/* Layout */
.topbar{position:sticky;top:0;z-index:10;height:56px;background:var(--card);display:flex;align-items:center;justify-content:space-between;padding:0 .75rem;border-bottom:1px solid rgba(255,255,255,.08)}
.content{padding:.75rem .75rem 5.5rem}
.brand{display:flex;align-items:center;gap:.5rem}.logo{filter:drop-shadow(0 4px 10px rgba(14,165,233,.6))}
.row{display:flex;align-items:center}.gap-2{gap:.5rem}.gap-3{gap:.75rem}.end{justify-content:flex-end}

/* Bottom nav */
.bnav{position:fixed;bottom:0;left:0;right:0;background:var(--card);border-top:1px solid rgba(255,255,255,.08);
  display:grid;grid-template-columns:repeat(6,1fr);height:64px;padding-bottom:max(0px,env(safe-area-inset-bottom));z-index:10}
.bnav button{background:transparent;border:none;color:var(--muted);display:flex;flex-direction:column;align-items:center;justify-content:center;gap:.1rem;cursor:pointer}
.bnav button.active{color:var(--fg)}.bnav button{position:relative}
.bnav button.active::after{content:"";position:absolute;bottom:6px;left:50%;transform:translateX(-50%);width:28px;height:3px;border-radius:3px;background:var(--accent)}

/* Grid */
.cards{display:grid;grid-template-columns:repeat(2,1fr);gap:.5rem}
@media(min-width:880px){.cards{grid-template-columns:repeat(4,1fr)}}

/* Ordered compact list */
.list .list-item{display:flex;align-items:center;justify-content:space-between;background:var(--card);
  border:1px solid rgba(255,255,255,.06);border-radius:12px;padding:.65rem .85rem;margin-bottom:.5rem}
.list .left{display:flex;align-items:center;gap:.6rem}
.list .rank{min-width:2.2rem;text-align:center;border-radius:10px;background:rgba(14,165,233,.15);
  border:1px solid rgba(14,165,233,.35);color:#7dd3fc;padding:.1rem .4rem;font-weight:600}

/* Universal Card */
.ucard{
  position:relative; overflow:hidden; border-radius:18px; padding:12px; background:var(--card);
  border:1.2px solid transparent; isolation:isolate; transition:transform .12s ease, box-shadow .2s ease, border-color .2s;
  box-shadow:0 8px 20px rgba(0,0,0,.25);
  background:
    linear-gradient(var(--card), var(--card)) padding-box,
    conic-gradient(from 140deg, var(--uc-a), var(--uc-b), var(--uc-c), var(--uc-a)) border-box;
}
.ucard:hover{ transform:translateY(-2px); box-shadow:0 12px 28px rgba(0,0,0,.3); }
.ucard:active{ transform:translateY(0) scale(.995); }
.ucard{ --uc-accent: var(--accent); --uc-a:#0ea5e9; --uc-b:#60a5fa; --uc-c:#34d399; --uc-ink:#eaf2ff; }
.ucard[data-variant="ad"]     { --uc-a:#fb7185; --uc-b:#f59e0b; --uc-c:#22c55e; --uc-accent:#f59e0b; }
.ucard[data-variant="course"] { --uc-a:#22c55e; --uc-b:#0ea5e9; --uc-c:#34d399; --uc-accent:#22c55e; }
.ucard[data-variant="test"]   { --uc-a:#60a5fa; --uc-b:#0ea5e9; --uc-c:#8b5cf6; --uc-accent:#0ea5e9; }
.ucard[data-variant="sim"]    { --uc-a:#a78bfa; --uc-b:#60a5fa; --uc-c:#f472b6; --uc-accent:#a78bfa; }
.ucard[data-variant="live"]   { --uc-a:#ef4444; --uc-b:#f59e0b; --uc-c:#22c55e; --uc-accent:#ef4444; }
.ucard .ucard-bg{ position:absolute; inset:0; z-index:0; opacity:.95; pointer-events:none; }
.ucard .ucard-bg svg{ width:100%; height:100%; display:block; }
.ucard .glow{ position:absolute; inset:-20%; z-index:0; pointer-events:none;
  background:radial-gradient(120% 80% at 0% 0%, color-mix(in oklab, var(--uc-a) 40%, transparent), transparent 60%),
             radial-gradient(120% 80% at 100% 0%, color-mix(in oklab, var(--uc-b) 40%, transparent), transparent 60%),
             radial-gradient(120% 120% at 100% 100%, color-mix(in oklab, var(--uc-c) 40%, transparent), transparent 65%);
  filter: blur(18px) saturate(120%); opacity:.18; }
.ucard .media{ position:relative; z-index:1; overflow:hidden; border-radius:14px; aspect-ratio: 16/9;
  background: linear-gradient(135deg, rgba(255,255,255,.08), rgba(255,255,255,.02)); box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
  display:flex; align-items:center; justify-content:center; }
.ucard .media img{ width:100%; height:100%; object-fit:cover; display:block; }
.ucard .badge{ position:absolute; top:8px; left:8px; background:rgba(0,0,0,.35); backdrop-filter: blur(6px);
  padding:.25rem .5rem; border-radius:999px; border:1px solid rgba(255,255,255,.18); font-size:.75rem; color:#fff; }
.ucard .badge.alt{ position:absolute; bottom:8px; right:8px; top:auto; left:auto; }
.ucard .typechip{ position:absolute; top:8px; right:8px; background:var(--uc-accent); color:white;
  font-weight:700; padding:.25rem .5rem; border-radius:8px; font-size:.75rem; }
.ucard .body{ position:relative; z-index:1; margin-top:.6rem; display:flex; flex-direction:column; gap:.35rem; }
.ucard .title{ font-weight:800; line-height:1.2; font-size:1rem; }
.ucard .meta{ font-size:.85rem; color:var(--muted); }
.ucard .row{ display:flex; align-items:center; justify-content:space-between; gap:.5rem; }
.ucard .cta-row{ margin-top:.4rem; }
.ucard .price{ font-weight:800; }
.ucard .btn-sm{ padding:.5rem .7rem; border-radius:10px; }
.ucard .icon{ font-size:1.1rem; }
.ucard::after{ content:""; position:absolute; inset:0; background:linear-gradient(120deg, transparent 0%, rgba(255,255,255,.06) 20%, transparent 60%);
  transform: translateX(-100%); transition: transform .6s ease; z-index:1; }
.ucard:hover::after{ transform: translateX(100%); }

.ucountdown{position:absolute; bottom:8px; left:8px; background:rgba(0,0,0,.45); color:#fff;
  border:1px solid rgba(255,255,255,.2); border-radius:999px; padding:.2rem .5rem; font-size:.8rem; backdrop-filter: blur(6px); }

/* Test Player */
.tplayer{max-width:900px;margin:0 auto}
.tplayer .head{display:flex;align-items:center;justify-content:space-between;gap:.5rem;margin-bottom:.5rem}
.tplayer .timer{font-variant-numeric:tabular-nums;font-weight:800}
.tplayer .prog{height:8px;background:rgba(255,255,255,.08);border-radius:999px;overflow:hidden}
.tplayer .prog>span{display:block;height:100%;width:0;background:var(--accent);transition:width .2s}
.tplayer .qcard{padding:1rem;border-radius:16px;background:var(--card);border:1px solid rgba(255,255,255,.06);box-shadow:var(--shadow);margin:.5rem 0}
.tplayer .qtext{font-weight:700;margin-bottom:.5rem}
.tplayer .opts{display:grid;gap:.4rem}
.tplayer .opt{padding:.7rem .8rem;border-radius:12px;background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.08);cursor:pointer}
.tplayer .opt.selected{border-color:var(--accent);box-shadow:0 0 0 2px color-mix(in oklab, var(--accent) 40%, transparent)}
.tplayer .opt.correct{border-color:var(--ok);box-shadow:0 0 0 2px color-mix(in oklab, var(--ok) 40%, transparent)}
.tplayer .opt.wrong{border-color:var(--danger);box-shadow:0 0 0 2px color-mix(in oklab, var(--danger) 40%, transparent)}
.tplayer .ctrl{display:flex;align-items:center;justify-content:space-between;margin-top:.5rem}
.tplayer .rez{padding:1rem;border-radius:16px;background:var(--card);border:1px solid rgba(255,255,255,.06);box-shadow:var(--shadow);margin-top:.75rem}
.tplayer .rez .good{color:var(--ok)}.tplayer .rez .bad{color:var(--danger)}
.tplayer .sol {margin-top:.6rem;padding:.7rem .8rem;border-radius:12px;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.12)}
.tplayer .sol .st{font-weight:800;margin-bottom:.25rem}
.tplayer .solbtn{background:transparent;border:1px dashed var(--accent);color:var(--accent);padding:.45rem .6rem;border-radius:10px;cursor:pointer}

/* Toast */
#toast{position:fixed;top:10px;left:50%;transform:translateX(-50%);background:rgba(0,0,0,.7);
  color:#fff;border:1px solid rgba(255,255,255,.2);border-radius:12px;padding:.5rem .8rem;z-index:100;display:none}
#toast.show{display:block;animation:fadein .2s ease}
@keyframes fadein{from{opacity:0;transform:translate(-50%,-6px)}to{opacity:1;transform:translate(-50%,0)}}

/* Leaderboard */
.lb{margin-top:.75rem}
.lb .lb-row{display:flex;align-items:center;justify-content:space-between;padding:.45rem .6rem;border-bottom:1px dashed rgba(255,255,255,.08)}
.lb .lb-row .left{display:flex;align-items:center;gap:.55rem}
.lb .rk{min-width:2rem;text-align:center;border-radius:10px;background:rgba(14,165,233,.15);border:1px solid rgba(14,165,233,.35);color:#7dd3fc;padding:.1rem .4rem;font-weight:700}
.lb .name{font-weight:600}
.lb .score{font-weight:800}

/* Live global leaderboard header */
.livebar{display:flex;align-items:center;gap:.5rem;flex-wrap:wrap;margin:.5rem 0}
.livebar select{padding:.4rem .5rem;border-radius:10px;border:1px solid rgba(255,255,255,.16);background:transparent;color:var(--fg)}
.livebar .pill{padding:.25rem .5rem;border-radius:999px;border:1px solid rgba(255,255,255,.18)}

/* v7 additions */
.tplayer .qtimer{font-variant-numeric:tabular-nums;font-weight:700;opacity:.9}
.tplayer .opt.disabled{opacity:.6;pointer-events:none;cursor:not-allowed}
.tplayer .qimg{max-width:100%;border-radius:12px;margin:.75rem 0;box-shadow:var(--shadow);object-fit:contain}
@media(max-width:420px){ .cards{grid-template-columns:1fr} .btn{padding:.85rem 1rem} .input{padding:.9rem} }
