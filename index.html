<!doctype html>
<html lang="uz">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,viewport-fit=cover" />
  <title>LeaderMath — Zero</title>

  <link rel="icon" href="logo.png" sizes="192x192" />
  <link rel="apple-touch-icon" href="logo.png" />
  <meta name="theme-color" content="#070A12" />
  <link rel="manifest" href="manifest.webmanifest" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="styles.css" />
  <style>
    .toast{
      position:fixed; left:50%; bottom: calc(92px + env(safe-area-inset-bottom, 0px));
      transform: translateX(-50%) translateY(20px);
      padding:10px 12px;
      border-radius:999px;
      border:1px solid rgba(31,42,82,.85);
      background: rgba(11,16,32,.86);
      box-shadow: 0 18px 60px rgba(0,0,0,.55);
      color:#EAF0FF;
      font-size:12px;
      opacity:0;
      pointer-events:none;
      transition: opacity .18s ease, transform .18s ease;
      z-index:99;
      max-width:min(520px, calc(100vw - 24px));
      text-align:center;
    }
    .toast.show{opacity:1; transform: translateX(-50%) translateY(0)}
  </style>
</head>
<body>
  <div class="bg-math"><canvas id="bgCanvas"></canvas></div>

  <div class="app">
    <header class="topbar">
      <div class="row">
        <div class="brand">
          <img src="logo.png" alt="LeaderMath">
          <div class="t">
            <b>LeaderMath.UZ</b>
            <span>Premium mobil tajriba • banner + card tizimi</span>
          </div>
        </div>

        <div class="userchip">
          <div class="avatar" id="avatar" title="Profil"></div>
          <div class="meta">
            <div class="name" id="userName">...</div>
            <div class="sub" id="userSub">...</div>
          </div>
        </div>
      </div>
    </header>

    <main class="main">
      <div class="wrap">
        <div class="page-title">
          <div>
            <h1 id="pageTitle">...</h1>
            <p id="pageSubtitle">...</p>
          </div>
          <div id="topPills" class="krow" style="justify-content:flex-end">
            <span class="pill">Ball: <b id="points">0</b></span>
            <span class="pill">Balans: <b id="balance">0</b></span>
          </div>
        </div>

        <div class="chips" id="chips"></div>
        <div class="grid" id="grid"></div>
      </div>
    </main>

    <nav class="bottomnav">
      <div class="bar" id="navBar"></div>
    </nav>
  </div>

  <!-- Profile Modal -->
  <div class="modal" id="profileModal" aria-hidden="true">
    <div class="sheet" role="dialog" aria-modal="true">
      <div class="head">
        <div class="left">
          <div class="avatar" style="cursor:default" id="avatar2">LM</div>
          <b id="modalTitle">Profil</b>
        </div>
        <div class="x" id="closeModal" title="Yopish">✕</div>
      </div>

      <div class="body">
        <div class="krow">
          <div class="small">Avto yaratilgan ID+parol — xohlasangiz parolni yangilaysiz.</div>
          <a class="link" href="admin.html" target="_blank" rel="noopener">Admin.html</a>
        </div>

        <div class="hr"></div>

        <div class="krow" id="userIdBox"></div>

        <div class="krow" style="margin-top:10px">
          <button class="btn secondary" id="btnCopyCreds">ID+parol nusxa olish</button>
        </div>

        <div class="hr"></div>

        <div class="form">
          <div class="field">
            <label>Ism familiya</label>
            <input id="f_name" placeholder="Masalan: Sohibjon Sattorov" />
          </div>
          <div class="field">
            <label>Telefon</label>
            <input id="f_phone" placeholder="+998..." />
          </div>
          <div class="field">
            <label>Telegram</label>
            <input id="f_tg" placeholder="@username" />
          </div>
          <div class="field">
            <label>Rol</label>
            <select id="f_role">
              <option value="student">student</option>
              <option value="teacher">teacher</option>
              <option value="abiturient">abiturient</option>
              <option value="pro">pro</option>
              <option value="admin">admin</option>
            </select>
          </div>
          <div class="field">
            <label>Viloyat / Tuman</label>
            <input id="f_region" placeholder="Namangan, ..." />
          </div>
          <div class="field">
            <label>Maktab</label>
            <input id="f_school" placeholder="1-IMI, ..." />
          </div>
        </div>

        <div class="krow" style="margin-top:12px">
          <button class="btn" id="btnSaveProfile">Profilni saqlash</button>
        </div>

        <div class="hr"></div>

        <div class="form">
          <div class="field">
            <label>Eski parol</label>
            <input id="f_pass" type="password" />
          </div>
          <div class="field">
            <label>Yangi parol</label>
            <input id="f_newpass" type="password" placeholder="kamida 6 belgi" />
          </div>
        </div>

        <div class="krow" style="margin-top:12px">
          <button class="btn secondary" id="btnChangePass">Parolni yangilash</button>
          <button class="btn secondary" id="btnLogout">Chiqish</button>
        </div>
      </div>
    </div>
  </div>

  <div class="toast" id="toast"></div>

  <script src="app.js"></script>
  <script>
    // points/balance demo binding
    (function(){
      const u = JSON.parse(localStorage.getItem("lm_user_v1")||"{}");
      document.getElementById("points").textContent = u.points || 0;
      document.getElementById("balance").textContent = u.balance || 0;
    })();
  </script>
</body>
</html>
