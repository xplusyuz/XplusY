<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>XplusY — SPA (index + auth + side panel)</title>
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCI+CiAgPGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJnIiB4MT0iMCIgeTE9IjAiIHgyPSIxIiB5Mj0iMSI+CiAgICA8c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiMzNGQzOTkiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMxMGI5ODEiLz4KICA8L2xpbmVhckdyYWRpZW50PjwvZGVmcz4KICA8cmVjdCB4PSI0IiB5PSI0IiByeD0iMTIiIHJ5PSIxMiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiBmaWxsPSJ1cmwoI2cpIi8+CiAgPHRleHQgeD0iMzIiIHk9IjQwIiBmb250LXNpemU9IjMyIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iU2Vnb2UgVUksIEFyaWFsLCBzYW5zLXNlcmlmIiBmaWxsPSIjMGIxMjEwIiBmb250LXdlaWdodD0iODAwIj7PgDwvdGV4dD4KPC9zdmc+" />
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <header class="site-header">
    <button id="menuBtn" class="icon-btn burger" aria-label="Menyu" aria-controls="sidePanel" aria-expanded="false">
      <span></span><span></span><span></span>
    </button>
    <div class="brand"><span class="logo">π</span><span class="title">XplusY</span></div>
    <button id="themeToggle" class="icon-btn theme-toggle" aria-label="Kun/Tun rejimi"></button>
    <div class="auth-chip" id="authChip">
      <button id="openAuth" class="btn primary">Kirish / Ro‘yxatdan o‘tish</button>
    </div>
  </header>

  <nav class="site-nav">
    <a href="#home" class="nav-link">Bosh sahifa</a>
    <a href="#tests" class="nav-link">Testlar</a>
    <a href="#live" class="nav-link">Live</a>
    <a href="#leaderboard" class="nav-link">Reyting</a>
    <a href="#about" class="nav-link">Biz haqimizda</a>
  </nav>

  <main id="app" class="app"></main>

  <footer class="site-footer">
    <div class="f-left">© <span id="year"></span> XplusY. Barchasi muhofaza qilingan.</div>
    <div class="f-right">Uz • <a href="#about">Biz haqimizda</a></div>
  </footer>

  <aside id="sidePanel" class="side-panel" aria-hidden="true">
    <div class="panel-backdrop" data-close-panel></div>
    <div class="panel-card" role="dialog" aria-modal="true" aria-labelledby="panelTitle" tabindex="-1">
      <div class="panel-head">
        <div class="brand small"><span class="logo">π</span><span class="title" id="panelTitle">Menyu</span></div>
        <button class="icon-btn close" title="Yopish" data-close-panel>×</button>
      </div>
      <div class="panel-body">
        <nav class="panel-nav">
          <a href="#home" class="panel-link" data-panel-link>🏠 Bosh sahifa</a>
          <a href="#tests" class="panel-link" data-panel-link>🧮 Testlar</a>
          <a href="#live" class="panel-link" data-panel-link>🟢 Live</a>
          <a href="#leaderboard" class="panel-link" data-panel-link>🏆 Reyting</a>
          <a href="#about" class="panel-link" data-panel-link>ℹ️ Biz haqimizda</a>
        </nav>
        <div class="panel-sep"></div>
        <div id="panelUser" class="panel-user muted">
          Mehmon. Kirish uchun quyidagi tugmadan foydalaning.
          <div style="display:grid; gap:8px; margin-top:8px">
            <button class="btn" id="panelOpenAuth">Kirish / Ro‘yxatdan o‘tish</button>
          </div>
        </div>
      </div>
    </div>
  </aside>

  <div class="modal" id="authModal" aria-hidden="true">
    <div class="modal-backdrop" data-close></div>
    <div class="modal-card" role="dialog" aria-modal="true">
      <div class="modal-head">
        <div class="tabs" role="tablist">
          <button class="tab active" data-tab="login">Kirish (ID + Parol)</button>
          <button class="tab" data-tab="signup">Ro‘yxatdan o‘tish</button>
        </div>
        <button class="icon-btn close" title="Yopish" data-close>×</button>
      </div>
      <div class="modal-body">
        <section class="tab-panel active" data-panel="login">
          <form id="loginForm" class="form" autocomplete="off">
            <div class="form-row">
              <label for="loginId">ID</label>
              <input id="loginId" name="id" inputmode="numeric" pattern="\d{7,}" placeholder="1000001" required autocomplete="username" autocapitalize="off" autocorrect="off" spellcheck="false" />
            </div>
            <div class="form-row">
              <label for="loginPass">Parol</label>
              <input id="loginPass" name="password" type="password" minlength="6" placeholder="••••••" required autocomplete="current-password" autocapitalize="off" autocorrect="off" spellcheck="false" />
            </div>
            <button class="btn primary wide" type="submit">Kirish</button>
            <p class="muted small">Kirish faqat <b>ID + Parol</b> orqali. Email/Google bilan kirish mavjud emas.</p>
            <div id="loginMsg" class="msg"></div>
          </form>
        </section>

        <section class="tab-panel" data-panel="signup">
          <div class="subtabs" role="tablist">
            <button class="subtab active" data-sub="email">Email orqali</button>
            <button class="subtab" data-sub="google">Google (faqat ro‘yxatdan)</button>
            <button class="subtab" data-sub="oneclick">Bir bosishda</button>
          </div>

          <form id="signupEmailForm" class="form subpanel active" data-subpanel="email" autocomplete="off">
            <div class="form-row"><label for="seName">Ism Familiya</label><input id="seName" name="name" placeholder="Ixtiyoriy" /></div>
            <div class="form-row"><label for="seEmail">Email</label><input id="seEmail" name="email" type="email" placeholder="you@email.com" required /></div>
            <div class="form-row"><label for="sePass">Parol</label><input id="sePass" name="password" type="password" minlength="6" placeholder="kamida 6 belgi" required autocomplete="new-password" autocapitalize="off" autocorrect="off" spellcheck="false" /></div>
            <button class="btn success wide" type="submit">Ro‘yxatdan o‘tish</button>
            <div id="signupEmailMsg" class="msg"></div>
          </form>

          <div class="subpanel" data-subpanel="google">
            <p class="muted">Google bilan ro‘yxatdan o‘ting. Keyin ID beriladi va <b>parol o‘rnatish</b> talab qilinadi — keyinchalik kirish faqat ID+Parol.</p>
            <button id="googleBtn" class="btn wide">Google bilan ro‘yxatdan o‘tish</button>
            <div id="signupGoogleStepSetPass" class="hidden">
              <form id="googleSetPassForm" class="form" autocomplete="off">
                <div class="form-row"><label for="sgPass">Parol o‘rnatish</label><input id="sgPass" type="password" minlength="6" required placeholder="kamida 6 belgi" autocomplete="new-password" autocapitalize="off" autocorrect="off" spellcheck="false" /></div>
                <button class="btn success wide" type="submit">Parolni ulash</button>
              </form>
            </div>
            <div id="signupGoogleMsg" class="msg"></div>
          </div>

          <form id="oneClickForm" class="form subpanel" data-subpanel="oneclick" autocomplete="off">
            <div class="form-row"><label for="ocName">Ism Familiya</label><input id="ocName" placeholder="Ixtiyoriy" /></div>
            <div class="form-row"><label for="ocPass">Parol</label><input id="ocPass" type="password" minlength="6" placeholder="kamida 6 belgi" required autocomplete="new-password" autocapitalize="off" autocorrect="off" spellcheck="false" /></div>
            <button class="btn success wide" type="submit">Bir bosishda</button>
            <p class="muted small">Email shart emas. Sizga navbatdagi ID beriladi va tizim ichki email yaratadi.</p>
            <div id="oneClickMsg" class="msg"></div>
          </form>
        </section>
      </div>
    </div>
  </div>

  <script>
    window.FIREBASE_CONFIG = {
      apiKey: "AIzaSyDYwHJou_9GqHZcf8XxtTByC51Z8un8rrM",
      authDomain: "xplusy-760fa.firebaseapp.com",
      projectId: "xplusy-760fa",
      storageBucket: "xplusy-760fa.appspot.com",
      messagingSenderId: "992512966017",
      appId: "1:992512966017:web:5e919dbc9b8d8abcb43c80",
      measurementId: "G-459PLJ7P7L"
    };
  </script>
  <script type="module" src="./app.js"></script>
</body>
</html>
