<!doctype html>
<html lang="uz">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>LeaderMath ‚Äî Premium Glass UI</title>
  <meta name="theme-color" content="#2E8B57">

  <!-- Brand style -->
  <link rel="icon" href="./favicon.ico">
  <style>
    /* ====== GLOBAL ROOT ====== */
    :root {
      --brand: #2E8B57;
      --brand2: #1F6B45;
      --accent: #00c88a;
      --text: #0e1a12;
      --muted: #556d5e;
      --bg: #f6faf8;
      --frame: #d8e7dd;
      --paper: #ffffff;
      --blur: 14px;
      --sh-soft: 0 12px 28px rgba(0,0,0,.08);
      --sh-strong: 0 36px 60px rgba(0,0,0,.25);
    }
    :root.dark {
      --bg:#0f1411; --paper:#15241c; --text:#e8f2ec; --muted:#98b1a3; --frame:#223428;
      --sh-soft:0 10px 24px rgba(0,0,0,.5); --sh-strong:0 40px 80px rgba(0,0,0,.7);
    }
    html,body {
      background:
        radial-gradient(900px 520px at 10% -10%, color-mix(in srgb, var(--brand) 16%, transparent), transparent 60%),
        radial-gradient(900px 520px at 110% 120%, color-mix(in srgb, var(--accent) 14%, transparent), transparent 60%),
        var(--bg);
      color: var(--text);
      font-family: "Inter", sans-serif;
      margin:0; padding:0;
    }

    /* ====== HEADER ====== */
    .appbar {
      position:sticky; top:0; z-index:50;
      background:linear-gradient(180deg,
        color-mix(in srgb,var(--paper) 80%,transparent),
        color-mix(in srgb,var(--paper) 60%,transparent));
      backdrop-filter:blur(var(--blur));
      -webkit-backdrop-filter:blur(var(--blur));
      border-bottom:1px solid var(--frame);
      box-shadow:var(--sh-soft);
      padding:12px;
      display:flex; align-items:center; justify-content:space-between;
    }
    .logo {
      font-weight:900;
      background:linear-gradient(90deg,var(--brand),var(--brand2));
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      font-size:20px;
    }

    /* ===== USERBAR ===== */
    .userbar {
      position:relative;
      display:grid;
      grid-template-columns:56px 1fr auto;
      align-items:center;
      gap:10px;
      padding:10px 12px;
      border-radius:18px;
      border:1px solid var(--frame);
      background:color-mix(in srgb,var(--paper) 75%,transparent);
      box-shadow:var(--sh-soft);
      backdrop-filter:blur(var(--blur));
      -webkit-backdrop-filter:blur(var(--blur));
    }
    .ava {
      width:50px; height:50px; border-radius:50%;
      overflow:hidden; background:linear-gradient(135deg,var(--brand),var(--brand2));
      color:#fff; font-weight:800; display:grid; place-items:center;
      cursor:pointer; transition:.2s;
    }
    .ava img {width:100%;height:100%;object-fit:cover;}
    .ava:active {transform:scale(.95)}

    .uvals {display:flex;align-items:center;gap:6px;justify-self:end;}
    .chip {
      padding:4px 10px;
      border-radius:12px;
      background:color-mix(in srgb,var(--paper) 70%,transparent);
      border:1px solid var(--frame);
      font-size:13px;
      box-shadow:0 4px 10px rgba(0,0,0,.08);
    }

    /* Hide text until menu */
    .uinfo b, .uinfo .meta {display:none;}
    #signin, #editProfile, #signout {display:none!important;}

    /* ===== POPUP ===== */
    .user-menu {
      position:absolute;
      top:64px; left:12px; right:12px;
      z-index:60; display:none;
      padding:14px;
      border:1px solid var(--frame);
      border-radius:18px;
      background:color-mix(in srgb,var(--paper) 85%,transparent);
      backdrop-filter:blur(calc(var(--blur)*.9));
      -webkit-backdrop-filter:blur(calc(var(--blur)*.9));
      box-shadow:var(--sh-strong);
    }
    .userbar.menu-open .user-menu {display:block;}
    @media(min-width:900px){.user-menu{width:360px;left:auto;right:12px;}}

    .um-head{display:flex;align-items:center;gap:10px;margin-bottom:8px;}
    .um-ava{width:46px;height:46px;border-radius:50%;
      background:linear-gradient(135deg,var(--brand),var(--brand2));
      display:grid;place-items:center;color:#fff;font-weight:900;overflow:hidden;}
    .um-ava img{width:100%;height:100%;object-fit:cover;}
    .um-name{font-weight:900;}
    .um-sub{font-size:12px;color:var(--muted);}
    .um-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin:10px 0 12px;}
    .um-item{padding:10px;border:1px solid var(--frame);border-radius:12px;
      background:color-mix(in srgb,var(--paper) 65%,transparent);font-size:12px;}
    .um-item b{display:block;font-size:11px;color:var(--muted);margin-bottom:4px;}
    .um-actions{display:flex;gap:8px;}
    .um-btn{flex:1;display:inline-flex;align-items:center;justify-content:center;gap:6px;
      border:none;border-radius:12px;padding:10px 12px;cursor:pointer;font-weight:900;
      background:linear-gradient(135deg,var(--brand),var(--brand2));color:#fff;}
    .um-btn.ghost{background:color-mix(in srgb,var(--paper) 65%,transparent);color:var(--brand2);
      border:1px solid var(--frame);}
    .userbar.menu-open::after{content:"";position:fixed;inset:0;z-index:50;background:transparent;}

    @keyframes umFade{from{opacity:0;transform:translateY(-6px)}to{opacity:1;transform:translateY(0)}}
    .userbar.menu-open .user-menu{animation:umFade .2s ease both;}
  </style>
</head>
<body>
  <header class="appbar">
    <div class="logo">LeaderMath</div>
    <section class="userbar" id="userbar">
      <div class="ava" id="ava">LM</div>
      <div class="uinfo">
        <b id="uname">Sohibjon Sattorov</b>
        <div class="meta">Namangan</div>
      </div>
      <div class="uvals">
        <div class="chip" id="points">Ball: 9</div>
        <div class="chip" id="userStarsPts">‚≠ê‚≠ê‚≠ê</div>
      </div>
      <div id="userMenu" class="user-menu" aria-hidden="true"></div>
    </section>
  </header>

  <main style="padding:20px;">
    <h2>CHSB & BSB sinovlari oldidan shunday tayyorgarlik qiling!</h2>
    <p>Platformada mavzulashtirilgan testlar, tezkor mashqlar va batafsil izohlar ‚Äî hammasi bir joyda.</p>
  </main>

  <script>
    /* === JS === */
    const el = {
      ava: document.getElementById('ava'),
      userbar: document.getElementById('userbar'),
      userMenu: document.getElementById('userMenu'),
      points: document.getElementById('points'),
      userStarsPts: document.getElementById('userStarsPts')
    };
    let CURRENT_PROFILE = {
      name:"Sohibjon Sattorov",
      numericId:"3625",
      region:"Namangan",
      district:"Namangan sh.",
      school:"1-IDUM",
      class:"11-A",
      points:9,
      photoURL:""
    };

    function renderStars(num){
      let full=Math.floor(num), half=(num%1>=0.5), stars="";
      for(let i=0;i<full;i++) stars+="‚≠ê";
      if(half) stars+="‚ú®";
      return stars;
    }
    function refreshUserCompact(){
      const pts = CURRENT_PROFILE.points;
      el.points.textContent = "Ball: "+pts;
      el.userStarsPts.innerHTML = renderStars(pts/2);
      const nm = CURRENT_PROFILE.name;
      el.ava.textContent = nm.split(" ").map(s=>s[0]).join("").slice(0,2);
    }

    function buildUserMenu(){
      const u = CURRENT_PROFILE;
      const ava = u.photoURL?`<img src="${u.photoURL}" />`:(u.name[0]+u.name.split(" ")[1]?.[0]||"LM");
      el.userMenu.innerHTML=`
        <div class="um-head">
          <div class="um-ava">${ava}</div>
          <div><div class="um-name">${u.name}</div><div class="um-sub">ID: ${u.numericId}</div></div>
        </div>
        <div class="um-grid">
          <div class="um-item"><b>Viloyat</b>${u.region}</div>
          <div class="um-item"><b>Tuman</b>${u.district}</div>
          <div class="um-item"><b>Maktab</b>${u.school}</div>
          <div class="um-item"><b>Sinf</b>${u.class}</div>
        </div>
        <div class="um-actions">
          <button class="um-btn" id="umProfile">üìù Profil</button>
          <button class="um-btn ghost" id="umLogout">‚Ü©Ô∏è Chiqish</button>
        </div>
      `;
      document.getElementById('umProfile').onclick=()=>{alert('Profil ochildi');closeUserMenu();};
      document.getElementById('umLogout').onclick=()=>{alert('Chiqdingiz');closeUserMenu();};
    }

    function openUserMenu(){buildUserMenu();el.userbar.classList.add('menu-open');}
    function closeUserMenu(){el.userbar.classList.remove('menu-open');}
    function toggleUserMenu(){el.userbar.classList.contains('menu-open')?closeUserMenu():openUserMenu();}
    el.ava.addEventListener('click',(e)=>{e.stopPropagation();toggleUserMenu();});
    document.addEventListener('click',(e)=>{if(!el.userbar.contains(e.target))closeUserMenu();});
    refreshUserCompact();
  </script>
</body>
</html>
