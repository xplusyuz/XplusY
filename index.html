<!doctype html>
<html lang="uz">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MathCenter.uz — Matematika Olami</title>
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiByeD0iMTIiIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcikiLz4KPHBhdGggZD0iTTI0IDE2SDRDMy40NDc3MiAxNiAzIDE2LjQ0NzcgMyAxN1YyN0MzIDI3LjU1MjMgMy40NDc3MiAyOCA0IDI4SDI0QzI0LjU1MjMgMjggMjUgMjcuNTUyMyAyNSAyN1YxN0MyNSAxNi40NDc3IDI0LjU1MjMgMTYgMjQgMTZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMzQgNDBINEMzLjQ0NzcyIDQwIDMgNDAuNDQ3NyAzIDQxVjUxQzMgNTEuNTUyMyAzLjQ0NzcyIDUyIDQgNTJIMzRDMzQuNTUyMyA1MiAzNSA1MS41NTIzIDM1IDUxVjQxQzM1IDQwLjQ0NzcgMzQuNTUyMyA0MCAzNCA0MFoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik02MCAxNkg0MEMzOS40NDc3IDE2IDM5IDE2LjQ0NzcgMzkgMTdWMjdDMzkgMjcuNTUyMyAzOS40NDc3IDI4IDQwIDI4SDYwQzYwLjU1MjMgMjggNjEgMjcuNTUyMyA2MSAyN1YxN0M2MSAxNi40NDc3IDYwLjU1MjMgMTYgNjAgMTZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNjAgNDBINDBDMzkuNDQ3NyA0MCAzOSA0MC40NDc3IDM5IDQxVjUxQzM5IDUxLjU1MjMgMzkuNDQ3NyA1MiA0MCA1Mkg2MEM2MC41NTIzIDUyIDYxIDUxLjU1MjMgNjEgNTFWNDFDNjEgNDAuNDQ3NyA2MC41NTIzIDQwIDYwIDQwWiIgZmlsbD0id2hpdGUiLz4KPGRlZnM+CjxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQwX2xpbmVhciIgeDE9IjMyIiB5MT0iMCIgeDI9IjMyIiB5Mj0iNjQiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iIzBGQUY2NCIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMwQTdGNEYiLz4KPC9saW5lYXJHcmFkaWVudD4KPC9kZWZzPgo8L3N2Zz4K">
  <style>
    :root {
      --green: #0faf64;
      --green-dark: #0a7f4f;
      --green-light: #2de38d;
      --edge: #e0f3eb;
      --bg: #f6fffb;
      --text: #1a3b2d;
      --text-light: #5a7c6d;
      --shadow: 0 4px 20px rgba(10, 143, 82, 0.15);
      --radius: 16px;
      --radius-sm: 12px;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.5;
    }

    /* Header Styles */
    header {
      position: sticky;
      top: 0;
      z-index: 100;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid var(--edge);
      padding: 12px 0;
    }

    .header-inner {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .logo {
      width: 48px;
      height: 48px;
      border-radius: 14px;
      background: radial-gradient(60% 60% at 50% 35%, #b9ffd9, var(--green-light) 55%, var(--green-dark) 100%);
      display: grid;
      place-items: center;
      box-shadow: var(--shadow);
    }

    .logo svg {
      width: 28px;
      height: 28px;
      fill: white;
    }

    .brand-title h1 {
      font-size: 22px;
      font-weight: 900;
      background: linear-gradient(135deg, var(--green-dark), var(--green));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    .admin-badge {
      background: var(--green);
      color: white;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 700;
      display: none;
    }

    .stats {
      display: flex;
      gap: 12px;
      align-items: center;
    }

    .stat-card {
      background: white;
      border: 1px solid var(--edge);
      border-radius: var(--radius-sm);
      padding: 8px 16px;
      min-width: 100px;
      text-align: center;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }

    .stat-label {
      font-size: 12px;
      color: var(--text-light);
      margin-bottom: 4px;
    }

    .stat-value {
      font-size: 16px;
      font-weight: 800;
      color: var(--green-dark);
    }

    /* Main Content */
    main {
      max-width: 1200px;
      margin: 24px auto;
      padding: 0 16px;
    }

    .content-card {
      background: white;
      border: 1px solid var(--edge);
      border-radius: var(--radius);
      padding: 24px;
      margin-bottom: 24px;
      box-shadow: var(--shadow);
      position: relative;
    }

    .admin-toolbar {
      position: absolute;
      top: 16px;
      right: 16px;
      display: none;
      gap: 8px;
    }

    /* Grid System */
    .grid-cards {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 16px;
      margin: 20px 0;
    }

    .card {
      background: white;
      border: 1px solid var(--edge);
      border-radius: var(--radius);
      overflow: hidden;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    }

    .card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 24px rgba(0,0,0,0.1);
    }

    .card-cover {
      width: 100%;
      height: 160px;
      object-fit: cover;
      background: linear-gradient(45deg, #f0f9f4, #e0f3eb);
    }

    .card-body {
      padding: 16px;
    }

    .card-title {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 8px;
      color: var(--text);
    }

    .card-meta {
      font-size: 14px;
      color: var(--text-light);
      margin-bottom: 12px;
    }

    .card-badges {
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
    }

    .badge {
      background: var(--bg);
      border: 1px solid var(--edge);
      padding: 4px 10px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 600;
      color: var(--text-light);
    }

    .badge.online {
      background: #e8f7ff;
      border-color: #b3e0ff;
      color: #0066cc;
    }

    /* Floating Action Menu */
    .fab-menu {
      position: fixed;
      bottom: 24px;
      right: 24px;
      z-index: 1000;
    }

    .fab-main {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: var(--green);
      color: white;
      border: none;
      font-size: 24px;
      font-weight: bold;
      box-shadow: 0 6px 20px rgba(15, 175, 100, 0.4);
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .fab-main:hover {
      transform: scale(1.1);
      box-shadow: 0 8px 25px rgba(15, 175, 100, 0.6);
    }

    .fab-items {
      position: absolute;
      bottom: 70px;
      right: 0;
      display: none;
      flex-direction: column;
      gap: 12px;
    }

    .fab-menu.open .fab-items {
      display: flex;
    }

    .fab-item {
      background: white;
      border: 1px solid var(--edge);
      padding: 12px 20px;
      border-radius: 25px;
      text-decoration: none;
      color: var(--text);
      font-weight: 600;
      box-shadow: var(--shadow);
      transition: all 0.3s ease;
      white-space: nowrap;
    }

    .fab-item:hover {
      background: var(--green);
      color: white;
      transform: translateX(-5px);
    }

    .fab-item.active {
      background: var(--green);
      color: white;
    }

    /* Filters */
    .filters {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 12px;
      margin: 20px 0;
      padding: 16px;
      background: var(--bg);
      border-radius: var(--radius);
    }

    .filter-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .filter-label {
      font-size: 14px;
      font-weight: 600;
      color: var(--text-light);
    }

    .filter-select {
      padding: 10px 12px;
      border: 1px solid var(--edge);
      border-radius: var(--radius-sm);
      background: white;
      font-size: 14px;
    }

    /* Buttons */
    .btn {
      padding: 10px 20px;
      border: 1px solid var(--edge);
      border-radius: var(--radius-sm);
      background: white;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .btn-primary {
      background: var(--green);
      color: white;
      border-color: var(--green);
    }

    .btn-primary:hover {
      background: var(--green-dark);
    }

    .btn-small {
      padding: 6px 12px;
      font-size: 12px;
    }

    /* Modal Styles */
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      padding: 20px;
    }

    .modal.open {
      display: flex;
    }

    .modal-content {
      background: white;
      border-radius: var(--radius);
      padding: 24px;
      max-width: 500px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .modal-title {
      font-size: 20px;
      font-weight: 700;
    }

    .modal-close {
      background: none;
      border: none;
      font-size: 20px;
      cursor: pointer;
      color: var(--text-light);
    }

    .form-group {
      margin-bottom: 16px;
    }

    .form-label {
      display: block;
      margin-bottom: 6px;
      font-weight: 600;
      font-size: 14px;
    }

    .form-input {
      width: 100%;
      padding: 10px 12px;
      border: 1px solid var(--edge);
      border-radius: var(--radius-sm);
      font-size: 14px;
    }

    .form-input:focus {
      outline: none;
      border-color: var(--green);
      box-shadow: 0 0 0 3px rgba(15, 175, 100, 0.1);
    }

    .form-actions {
      display: flex;
      gap: 12px;
      justify-content: flex-end;
      margin-top: 24px;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .header-inner {
        flex-direction: column;
        gap: 12px;
      }
      
      .stats {
        width: 100%;
        justify-content: space-between;
      }
      
      .stat-card {
        flex: 1;
        min-width: auto;
      }
      
      .filters {
        grid-template-columns: 1fr;
      }
      
      .grid-cards {
        grid-template-columns: 1fr;
      }
    }

    /* Admin specific */
    .admin-only {
      display: none;
    }
  </style>
</head>
<body>
  <header>
    <div class="header-inner">
      <div class="brand">
        <div class="logo">
          <svg viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg">
            <path d="M76 92h104c9 0 16-7 16-16s-7-16-16-16H60c-9 0-16 7-16 16s7 16 16 16h4c8 41 4 77-8 97-5 8 5 17 13 12 24-14 35-53 29-109zm57 0c7 39 3 74-8 94-5 9 6 18 14 12 24-16 35-56 28-106h-34z" fill="white"/>
          </svg>
        </div>
        <div class="brand-title">
          <h1>MathCenter.uz</h1>
        </div>
        <span id="adminBadge" class="admin-badge">ADMIN</span>
      </div>
      
      <div class="stats">
        <div class="stat-card">
          <div class="stat-label">Salom</div>
          <div class="stat-value" id="helloName">Mehmon</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">ID</div>
          <div class="stat-value" id="headerID">-</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Balans</div>
          <div class="stat-value" id="headerBalans">0</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Ball</div>
          <div class="stat-value" id="headerBall">0</div>
        </div>
      </div>
    </div>
  </header>

  <main>
    <div id="app">
      <div class="content-card">
        <div class="admin-toolbar admin-only">
          <button class="btn btn-primary btn-small" id="addBannerBtn">+ Banner</button>
        </div>
        <h2>Bosh sahifa</h2>
        <p>Xush kelibsiz! Matematika o'qishni osonlashtiramiz.</p>
        
        <div class="grid-cards" id="homeBanners">
          <!-- Banners will be loaded here -->
        </div>
        
        <div class="grid-cards">
          <div class="card" onclick="loadRoute('courses')" style="cursor:pointer">
            <div class="card-body">
              <div class="card-title">Kurslar</div>
              <div class="card-meta">Video darslar va materiallar</div>
            </div>
          </div>
          <div class="card" onclick="loadRoute('tests')" style="cursor:pointer">
            <div class="card-body">
              <div class="card-title">Testlar</div>
              <div class="card-meta">O'z bilimingizni sinang</div>
            </div>
          </div>
          <div class="card" onclick="loadRoute('simulators')" style="cursor:pointer">
            <div class="card-body">
              <div class="card-title">Simulyatorlar</div>
              <div class="card-meta">Amaliy mashqlar</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Floating Action Menu -->
  <div class="fab-menu" id="fabMenu">
    <button class="fab-main" id="fabButton">≡</button>
    <div class="fab-items">
      <a class="fab-item active" data-route="home">Bosh sahifa</a>
      <a class="fab-item" data-route="courses">Kurslar</a>
      <a class="fab-item" data-route="tests">Testlar</a>
      <a class="fab-item" data-route="simulators">Simulyatorlar</a>
      <a class="fab-item" data-route="results">Natijalar</a>
      <a class="fab-item" data-route="profile">Profil</a>
    </div>
  </div>

  <!-- Auth Modal -->
  <div class="modal" id="authModal">
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-title">Tizimga kirish</div>
        <button class="modal-close" data-modal="authModal">×</button>
      </div>
      
      <div class="form-group">
        <label class="form-label">ID raqamingiz</label>
        <input type="text" class="form-input" id="loginId" placeholder="Masalan: 38864">
      </div>
      
      <div class="form-group">
        <label class="form-label">Parol</label>
        <input type="password" class="form-input" id="loginPassword" placeholder="Parolingiz">
      </div>
      
      <div class="form-actions">
        <button class="btn" data-modal="authModal">Bekor qilish</button>
        <button class="btn btn-primary" id="loginBtn">Kirish</button>
      </div>
      
      <div style="text-align: center; margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--edge);">
        <p style="color: var(--text-light); margin-bottom: 12px;">Yoki</p>
        <button class="btn" style="width: 100%;">Google bilan kirish</button>
      </div>
    </div>
  </div>

  <!-- Profile Modal -->
  <div class="modal" id="profileModal">
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-title">Profil ma'lumotlari</div>
        <button class="modal-close" data-modal="profileModal">×</button>
      </div>
      
      <div class="form-group">
        <label class="form-label">Ism</label>
        <input type="text" class="form-input" id="profileName" placeholder="Ismingiz">
      </div>
      
      <div class="form-group">
        <label class="form-label">Telefon</label>
        <input type="tel" class="form-input" id="profilePhone" placeholder="+998901234567">
      </div>
      
      <div class="form-group">
        <label class="form-label">Email</label>
        <input type="email" class="form-input" id="profileEmail" placeholder="email@example.uz">
      </div>
      
      <div class="form-actions">
        <button class="btn" data-modal="profileModal">Bekor qilish</button>
        <button class="btn btn-primary" id="saveProfileBtn">Saqlash</button>
      </div>
    </div>
  </div>

  <!-- Add Banner Modal (Admin) -->
  <div class="modal" id="addBannerModal">
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-title">Yangi banner qo'shish</div>
        <button class="modal-close" data-modal="addBannerModal">×</button>
      </div>
      
      <div class="form-group">
        <label class="form-label">Banner nomi</label>
        <input type="text" class="form-input" id="bannerTitle" placeholder="Masalan: Yangi kurslar">
      </div>
      
      <div class="form-group">
        <label class="form-label">Rasm manzili</label>
        <input type="text" class="form-input" id="bannerImage" placeholder="img/banner.jpg">
      </div>
      
      <div class="form-actions">
        <button class="btn" data-modal="addBannerModal">Bekor qilish</button>
        <button class="btn btn-primary" id="saveBannerBtn">Saqlash</button>
      </div>
    </div>
  </div>

  <script>
    // Mock data for demonstration
    const mockData = {
      users: {
        '38864': {
          id: '38864',
          name: 'Admin User',
          phone: '+998901234567',
          email: 'admin@mathcenter.uz',
          balance: 150000,
          points: 2450,
          isAdmin: true
        },
        '10001': {
          id: '10001',
          name: 'Foydalanuvchi',
          phone: '+998901234568',
          email: 'user@example.uz',
          balance: 50000,
          points: 1200,
          isAdmin: false
        }
      },
      banners: [
        { id: 1, title: '10-sinf Matematika', image: 'https://via.placeholder.com/400x200/0faf64/ffffff?text=10-sinf+Darslik', filter1: '10-sinf', filter2: 'Matematika' },
        { id: 2, title: 'Geometriya kursi', image: 'https://via.placeholder.com/400x200/0a7f4f/ffffff?text=Geometriya+Kursi', filter1: '9-sinf', filter2: 'Geometriya' },
        { id: 3, title: 'Algebra testlari', image: 'https://via.placeholder.com/400x200/2de38d/ffffff?text=Algebra+Testlari', filter1: '11-sinf', filter2: 'Algebra' }
      ],
      courses: [
        { id: 1, title: 'Algebra asoslari', image: 'https://via.placeholder.com/300x200/0faf64/ffffff?text=Algebra', filter1: '7-sinf', filter2: 'Algebra', type: 'video', duration: '2 soat' },
        { id: 2, title: 'Geometriya mashqlari', image: 'https://via.placeholder.com/300x200/0a7f4f/ffffff?text=Geometriya', filter1: '8-sinf', filter2: 'Geometriya', type: 'interaktiv', duration: '3 soat' },
        { id: 3, title: 'Matematik analiz', image: 'https://via.placeholder.com/300x200/2de38d/ffffff?text=Analiz', filter1: '11-sinf', filter2: 'Analiz', type: 'video', duration: '5 soat' }
      ],
      tests: [
        { id: 1, title: 'Algebra testi', image: 'https://via.placeholder.com/300x200/0faf64/ffffff?text=Algebra+Test', filter1: '9-sinf', filter2: 'Algebra', type: 'oddiy', questions: 20, duration: '30 daqiqa' },
        { id: 2, title: 'Geometriya testi', image: 'https://via.placeholder.com/300x200/0a7f4f/ffffff?text=Geometriya+Test', filter1: '10-sinf', filter2: 'Geometriya', type: 'oddiy', questions: 25, duration: '40 daqiqa' },
        { id: 3, title: 'Onlayn test - Matematika', image: 'https://via.placeholder.com/300x200/2de38d/ffffff?text=Onlayn+Test', filter1: '11-sinf', filter2: 'Matematika', type: 'online', questions: 30, duration: '45 daqiqa', start: '2024-01-15T10:00', end: '2024-01-15T12:00' }
      ]
    };

    // App state
    let currentUser = null;
    let currentRoute = 'home';

    // DOM elements
    const app = document.getElementById('app');
    const fabMenu = document.getElementById('fabMenu');
    const fabButton = document.getElementById('fabButton');

    // Route management
    const routes = {
      home: () => `
        <div class="content-card">
          <div class="admin-toolbar admin-only">
            <button class="btn btn-primary btn-small" id="addBannerBtn">+ Banner</button>
          </div>
          <h2>Bosh sahifa</h2>
          <p>Xush kelibsiz! Matematika o'qishni osonlashtiramiz.</p>
          
          <div class="grid-cards" id="homeBanners">
            ${mockData.banners.map(banner => `
              <div class="card">
                <img class="card-cover" src="${banner.image}" alt="${banner.title}">
                <div class="card-body">
                  <div class="card-title">${banner.title}</div>
                  <div class="card-meta">${banner.filter1} • ${banner.filter2}</div>
                </div>
              </div>
            `).join('')}
          </div>
          
          <div class="grid-cards">
            <div class="card" onclick="loadRoute('courses')" style="cursor:pointer">
              <div class="card-body">
                <div class="card-title">Kurslar</div>
                <div class="card-meta">Video darslar va materiallar</div>
              </div>
            </div>
            <div class="card" onclick="loadRoute('tests')" style="cursor:pointer">
              <div class="card-body">
                <div class="card-title">Testlar</div>
                <div class="card-meta">O'z bilimingizni sinang</div>
              </div>
            </div>
            <div class="card" onclick="loadRoute('simulators')" style="cursor:pointer">
              <div class="card-body">
                <div class="card-title">Simulyatorlar</div>
                <div class="card-meta">Amaliy mashqlar</div>
              </div>
            </div>
          </div>
        </div>
      `,
      
      courses: () => `
        <div class="content-card">
          <div class="admin-toolbar admin-only">
            <button class="btn btn-primary btn-small" id="addCourseBtn">+ Kurs</button>
          </div>
          <h2>Kurslar</h2>
          <p>Matematika bo'yicha barcha kurslar</p>
          
          <div class="filters">
            <div class="filter-group">
              <div class="filter-label">Sinf</div>
              <select class="filter-select" id="classFilter">
                <option value="">Barchasi</option>
                <option value="7-sinf">7-sinf</option>
                <option value="8-sinf">8-sinf</option>
                <option value="9-sinf">9-sinf</option>
                <option value="10-sinf">10-sinf</option>
                <option value="11-sinf">11-sinf</option>
              </select>
            </div>
            <div class="filter-group">
              <div class="filter-label">Fan</div>
              <select class="filter-select" id="subjectFilter">
                <option value="">Barchasi</option>
                <option value="Algebra">Algebra</option>
                <option value="Geometriya">Geometriya</option>
                <option value="Analiz">Analiz</option>
              </select>
            </div>
            <div class="filter-group">
              <div class="filter-label">Turi</div>
              <select class="filter-select" id="typeFilter">
                <option value="">Barchasi</option>
                <option value="video">Video</option>
                <option value="interaktiv">Interaktiv</option>
              </select>
            </div>
          </div>
          
          <div class="grid-cards">
            ${mockData.courses.map(course => `
              <div class="card">
                <img class="card-cover" src="${course.image}" alt="${course.title}">
                <div class="card-body">
                  <div class="card-title">${course.title}</div>
                  <div class="card-meta">${course.duration} • ${course.type}</div>
                  <div class="card-badges">
                    <span class="badge">${course.filter1}</span>
                    <span class="badge">${course.filter2}</span>
                  </div>
                </div>
              </div>
            `).join('')}
          </div>
        </div>
      `,
      
      tests: () => `
        <div class="content-card">
          <div class="admin-toolbar admin-only">
            <button class="btn btn-primary btn-small" id="addTestBtn">+ Test</button>
          </div>
          <h2>Testlar</h2>
          <p>O'z bilimingizni sinovdan o'tkazing</p>
          
          <div class="filters">
            <div class="filter-group">
              <div class="filter-label">Sinf</div>
              <select class="filter-select" id="testClassFilter">
                <option value="">Barchasi</option>
                <option value="7-sinf">7-sinf</option>
                <option value="8-sinf">8-sinf</option>
                <option value="9-sinf">9-sinf</option>
                <option value="10-sinf">10-sinf</option>
                <option value="11-sinf">11-sinf</option>
              </select>
            </div>
            <div class="filter-group">
              <div class="filter-label">Fan</div>
              <select class="filter-select" id="testSubjectFilter">
                <option value="">Barchasi</option>
                <option value="Algebra">Algebra</option>
                <option value="Geometriya">Geometriya</option>
                <option value="Matematika">Matematika</option>
              </select>
            </div>
            <div class="filter-group">
              <div class="filter-label">Turi</div>
              <select class="filter-select" id="testTypeFilter">
                <option value="">Barchasi</option>
                <option value="oddiy">Oddiy</option>
                <option value="online">Onlayn</option>
              </select>
            </div>
          </div>
          
          <div class="grid-cards">
            ${mockData.tests.map(test => `
              <div class="card">
                <img class="card-cover" src="${test.image}" alt="${test.title}">
                <div class="card-body">
                  <div class="card-title">${test.title}</div>
                  <div class="card-meta">${test.questions} savol • ${test.duration}</div>
                  <div class="card-badges">
                    <span class="badge">${test.filter1}</span>
                    <span class="badge">${test.filter2}</span>
                    ${test.type === 'online' ? '<span class="badge online">ONLINE</span>' : ''}
                  </div>
                </div>
              </div>
            `).join('')}
          </div>
        </div>
      `,
      
      simulators: () => `
        <div class="content-card">
          <div class="admin-toolbar admin-only">
            <button class="btn btn-primary btn-small" id="addSimulatorBtn">+ Simulyator</button>
          </div>
          <h2>Simulyatorlar</h2>
          <p>Amaliy mashqlar va interaktiv topshiriqlar</p>
          
          <div class="grid-cards">
            <div class="card">
              <div class="card-body">
                <div class="card-title">Algebraik ifodalar</div>
                <div class="card-meta">50+ mashq • Boshlang'ich</div>
                <div class="card-badges">
                  <span class="badge">7-sinf</span>
                  <span class="badge">Algebra</span>
                </div>
              </div>
            </div>
            <div class="card">
              <div class="card-body">
                <div class="card-title">Geometrik shakllar</div>
                <div class="card-meta">30+ mashq • O'rta</div>
                <div class="card-badges">
                  <span class="badge">8-sinf</span>
                  <span class="badge">Geometriya</span>
                </div>
              </div>
            </div>
            <div class="card">
              <div class="card-body">
                <div class="card-title">Funksiyalar va grafiklar</div>
                <div class="card-meta">40+ mashq • Murakkab</div>
                <div class="card-badges">
                  <span class="badge">10-sinf</span>
                  <span class="badge">Analiz</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      `,
      
      results: () => `
        <div class="content-card">
          <h2>Natijalarim</h2>
          <p>Sizning test natijalaringiz</p>
          
          <div class="grid-cards">
            <div class="card">
              <div class="card-body">
                <div class="card-title">Algebra testi</div>
                <div class="card-meta">20/25 ball • 80%</div>
                <div class="card-badges">
                  <span class="badge">2024-01-10</span>
                </div>
              </div>
            </div>
            <div class="card">
              <div class="card-body">
                <div class="card-title">Geometriya testi</div>
                <div class="card-meta">18/20 ball • 90%</div>
                <div class="card-badges">
                  <span class="badge">2024-01-08</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      `,
      
      profile: () => `
        <div class="content-card">
          <h2>Profil</h2>
          <p>Shaxsiy ma'lumotlaringiz</p>
          
          <div style="display: grid; grid-template-columns: 100px 1fr; gap: 20px; align-items: center; margin: 20px 0;">
            <div style="width: 100px; height: 100px; border-radius: 50%; background: linear-gradient(135deg, var(--green), var(--green-dark)); display: grid; place-items: center; color: white; font-size: 36px; font-weight: bold;">
              ${currentUser ? currentUser.name.charAt(0) : '?'}
            </div>
            <div>
              <h3 style="margin-bottom: 8px;">${currentUser ? currentUser.name : 'Mehmon'}</h3>
              <p style="color: var(--text-light); margin-bottom: 4px;">ID: ${currentUser ? currentUser.id : '-'}</p>
              <p style="color: var(--text-light);">${currentUser ? currentUser.email : 'Tizimga kiring'}</p>
            </div>
          </div>
          
          <div class="grid-cards">
            <div class="card">
              <div class="card-body">
                <div class="card-title">Balans</div>
                <div class="card-meta">${currentUser ? currentUser.balance.toLocaleString() : '0'} so'm</div>
              </div>
            </div>
            <div class="card">
              <div class="card-body">
                <div class="card-title">Ball</div>
                <div class="card-meta">${currentUser ? currentUser.points : '0'} ball</div>
              </div>
            </div>
          </div>
          
          <div style="margin-top: 20px;">
            <button class="btn btn-primary" id="editProfileBtn">Profilni tahrirlash</button>
            ${currentUser ? '<button class="btn" id="logoutBtn" style="margin-left: 10px;">Chiqish</button>' : '<button class="btn btn-primary" id="loginFromProfileBtn" style="margin-left: 10px;">Kirish</button>'}
          </div>
        </div>
      `
    };

    // Initialize app
    function initApp() {
      // Check if user is logged in
      const savedUser = localStorage.getItem('currentUser');
      if (savedUser) {
        currentUser = JSON.parse(savedUser);
        updateUI();
      } else {
        // Show login modal if not logged in
        setTimeout(() => {
          document.getElementById('authModal').classList.add('open');
        }, 1000);
      }
      
      // Set up event listeners
      setupEventListeners();
      
      // Load initial route
      loadRoute('home');
    }

    // Set up event listeners
    function setupEventListeners() {
      // FAB menu toggle
      fabButton.addEventListener('click', () => {
        fabMenu.classList.toggle('open');
      });

      // FAB menu items
      document.querySelectorAll('.fab-item').forEach(item => {
        item.addEventListener('click', (e) => {
          e.preventDefault();
          const route = item.getAttribute('data-route');
          loadRoute(route);
          
          // Update active state
          document.querySelectorAll('.fab-item').forEach(i => i.classList.remove('active'));
          item.classList.add('active');
          
          // Close menu
          fabMenu.classList.remove('open');
        });
      });

      // Modal close buttons
      document.querySelectorAll('.modal-close').forEach(btn => {
        btn.addEventListener('click', () => {
          const modalId = btn.getAttribute('data-modal');
          document.getElementById(modalId).classList.remove('open');
        });
      });

      // Login button
      document.getElementById('loginBtn').addEventListener('click', () => {
        const id = document.getElementById('loginId').value;
        const password = document.getElementById('loginPassword').value;
        
        if (id && password) {
          // Mock authentication
          if (mockData.users[id]) {
            currentUser = mockData.users[id];
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            updateUI();
            document.getElementById('authModal').classList.remove('open');
            showNotification('Muvaffaqiyatli kirildi!', 'success');
          } else {
            showNotification('ID yoki parol noto\'g\'ri', 'error');
          }
        } else {
          showNotification('ID va parolni kiriting', 'error');
        }
      });

      // Profile edit button
      document.addEventListener('click', (e) => {
        if (e.target.id === 'editProfileBtn' || e.target.id === 'loginFromProfileBtn') {
          if (currentUser) {
            document.getElementById('profileName').value = currentUser.name;
            document.getElementById('profilePhone').value = currentUser.phone;
            document.getElementById('profileEmail').value = currentUser.email;
            document.getElementById('profileModal').classList.add('open');
          } else {
            document.getElementById('authModal').classList.add('open');
          }
        }
        
        if (e.target.id === 'logoutBtn') {
          currentUser = null;
          localStorage.removeItem('currentUser');
          updateUI();
          loadRoute('home');
          showNotification('Tizimdan chiqildi', 'info');
        }
        
        if (e.target.id === 'saveProfileBtn') {
          if (currentUser) {
            currentUser.name = document.getElementById('profileName').value;
            currentUser.phone = document.getElementById('profilePhone').value;
            currentUser.email = document.getElementById('profileEmail').value;
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            updateUI();
            document.getElementById('profileModal').classList.remove('open');
            showNotification('Profil saqlandi', 'success');
          }
        }
        
        // Admin buttons
        if (e.target.id === 'addBannerBtn') {
          document.getElementById('addBannerModal').classList.add('open');
        }
        
        if (e.target.id === 'saveBannerBtn') {
          const title = document.getElementById('bannerTitle').value;
          const image = document.getElementById('bannerImage').value;
          
          if (title && image) {
            mockData.banners.push({
              id: mockData.banners.length + 1,
              title,
              image,
              filter1: 'Yangi',
              filter2: 'Banner'
            });
            
            document.getElementById('addBannerModal').classList.remove('open');
            loadRoute(currentRoute);
            showNotification('Banner qo\'shildi', 'success');
          }
        }
      });

      // Close modal when clicking outside
      document.querySelectorAll('.modal').forEach(modal => {
        modal.addEventListener('click', (e) => {
          if (e.target === modal) {
            modal.classList.remove('open');
          }
        });
      });
    }

    // Load route
    function loadRoute(route) {
      currentRoute = route;
      if (routes[route]) {
        app.innerHTML = routes[route]();
        
        // Update FAB menu active state
        document.querySelectorAll('.fab-item').forEach(item => {
          item.classList.remove('active');
          if (item.getAttribute('data-route') === route) {
            item.classList.add('active');
          }
        });
      }
    }

    // Update UI based on user state
    function updateUI() {
      const adminBadge = document.getElementById('adminBadge');
      const helloName = document.getElementById('helloName');
      const headerID = document.getElementById('headerID');
      const headerBalans = document.getElementById('headerBalans');
      const headerBall = document.getElementById('headerBall');
      
      if (currentUser) {
        helloName.textContent = currentUser.name;
        headerID.textContent = currentUser.id;
        headerBalans.textContent = currentUser.balance.toLocaleString();
        headerBall.textContent = currentUser.points.toLocaleString();
        
        if (currentUser.isAdmin) {
          adminBadge.style.display = 'block';
          document.querySelectorAll('.admin-only').forEach(el => {
            el.style.display = 'flex';
          });
        } else {
          adminBadge.style.display = 'none';
          document.querySelectorAll('.admin-only').forEach(el => {
            el.style.display = 'none';
          });
        }
      } else {
        helloName.textContent = 'Mehmon';
        headerID.textContent = '-';
        headerBalans.textContent = '0';
        headerBall.textContent = '0';
        adminBadge.style.display = 'none';
        document.querySelectorAll('.admin-only').forEach(el => {
          el.style.display = 'none';
        });
      }
    }

    // Show notification
    function showNotification(message, type = 'info') {
      // Create notification element
      const notification = document.createElement('div');
      notification.textContent = message;
      notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 12px 20px;
        border-radius: var(--radius-sm);
        background: ${type === 'error' ? '#ff4757' : type === 'success' ? 'var(--green)' : '#2f3542'};
        color: white;
        font-weight: 600;
        z-index: 3000;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        transform: translateX(120%);
        transition: transform 0.3s ease;
      `;
      
      document.body.appendChild(notification);
      
      // Animate in
      setTimeout(() => {
        notification.style.transform = 'translateX(0)';
      }, 100);
      
      // Remove after 3 seconds
      setTimeout(() => {
        notification.style.transform = 'translateX(120%)';
        setTimeout(() => {
          document.body.removeChild(notification);
        }, 300);
      }, 3000);
    }

    // Initialize the app when DOM is loaded
    document.addEventListener('DOMContentLoaded', initApp);
  </script>
</body>
</html>