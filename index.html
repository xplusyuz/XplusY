<!doctype html>
<html lang="uz">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>MathCenter.uz â€” Mobile</title>
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 256 256'%3E%3Ccircle cx='128' cy='128' r='120' fill='%2306b6d4'/%3E%3Ctext x='50%' y='55%' dominant-baseline='middle' text-anchor='middle' font-family='Arial' font-size='120' fill='white'%3EM%3C/text%3E%3C/svg%3E" />
  <link rel="stylesheet" href="./assets/style.css" />
</head>
<body class="theme-auto">
  <!-- Auth Gate -->
  <div id="auth-gate" class="gate visible">
    <div class="card p-4" style="max-width:520px;width:100%">
      <h1 class="title mb-2">MathCenter.uz</h1>
      <p class="muted mb-4">Kirish talab qilinadi</p>
      <div class="mb-3">
        <button id="btn-google" type="button" class="btn w-100 mb-2" onclick="window.__mcGoogle && window.__mcGoogle()">Google bilan davom etish</button>
        <div class="hr">yoki</div>
        <form id="email-form" class="mt-2">
          <input id="email" type="email" class="input mb-2" placeholder="Email" required />
          <input id="password" type="password" class="input mb-2" placeholder="Parol (min 6)" minlength="6" required />
          <div class="row gap-2">
            <button id="btn-email-login" class="btn" type="submit">Kirish</button>
            <button id="btn-email-signup" type="button" class="btn quiet">Ro'yxatdan o'tish</button>
          </div>
        </form>
      </div>
      <p id="auth-error" class="error hidden"></p>
    </div>
  </div>

  <!-- Profile Modal (first login) -->
  <dialog id="profile-modal" class="modal">
    <form method="dialog" class="card p-4 w-100" style="max-width:680px;">
      <h2 class="mb-3">Profil ma'lumotlarini to'ldiring</h2>
      <div class="grid two">
        <input id="p-firstName" class="input" placeholder="Ism" required />
        <input id="p-lastName" class="input" placeholder="Familiya" required />
        <input id="p-middleName" class="input" placeholder="Otasining ismi" required />
        <input id="p-birthDate" class="input" type="date" placeholder="Tug'ilgan sana" required />
        <input id="p-address" class="input" placeholder="Yashash manzili" required />
        <input id="p-phone" class="input" type="tel" placeholder="Telefon raqami" required />
      </div>
      <p class="muted mt-2">* Keyinchalik faqat <b>telefon</b> va <b>manzil</b>ni tahrirlashingiz mumkin.</p>
      <div class="row end mt-3">
        <button id="btn-save-profile" class="btn">Saqlash</button>
      </div>
      <p id="profile-error" class="error hidden mt-2"></p>
    </form>
  </dialog>

  <!-- Top -->
  <header class="topbar">
    <div class="brand row gap-2">
      <span class="logo">ğŸ“</span><strong>MathCenter</strong>
    </div>
    <div class="row gap-3">
      <div id="user-badges" class="row gap-2 muted small">
        <span id="badge-id">ID: â€”</span>
        <span id="badge-balance">ğŸ’µ 0</span>
        <span id="badge-gems">ğŸ’ 0</span>
      </div>
      <button id="btn-theme" class="icon" title="Kun/Tun">ğŸŒ“</button>
    </div>
  </header>

  <!-- Pages -->
  <main id="page-root" class="content"></main>

  <!-- Bottom Nav -->
  <nav class="bnav">
    <button data-page="home" class="active">ğŸ <span>Uy</span></button>
    <button data-page="courses">ğŸ“<span>Kurslar</span></button>
    <button data-page="tests">ğŸ“<span>Testlar</span></button>
    <button data-page="sim">ğŸ®<span>Simulyator</span></button>
    <button data-page="settings">âš™ï¸<span>Sozlamalar</span></button>
  </nav>

  <script type="module" src="./js/firebase.js"></script>
  <script type="module" src="./js/app.js"></script>
</body>
</html>
