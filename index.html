<!doctype html>
<html lang="uz">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
  <title>LeaderMath — Premium Glass PWA</title>
  <meta name="theme-color" content="#2E8B57" id="meta-theme-color"/>
  <link rel="manifest" href="./manifest.webmanifest">
  <link rel="icon" href="./favicon.png">
  <link rel="stylesheet" href="./app/app.css">
</head>
<body>
  <!-- ===== AUTH GATE ===== -->
  <div id="authGate">
    <div id="authCard" class="grad-border glass">
      <h2>Davom etish uchun kirish talab qilinadi</h2>
      <p>LeaderMath resurslaridan foydalanish uchun Google orqali tizimga kiring.</p>
      <div class="meta-why">🔒 Siz kirgunga qadar asosiy kontent ko‘rsatilmaydi.</div>
      <div class="auth-row">
        <a id="goLogin" class="btn">🔑 Kirish</a>
      </div>
    </div>
  </div>

  <!-- ===== APP ===== -->
  <div id="app">
    <header class="appbar">
      <div class="logo"><img src="./icon-512.png" alt="LeaderMath Logo"></div>
      <div>
        <div class="title">LeaderMath</div>
        <div class="sub">BSB / CHSB / ONLINE OLIMPIADA / DTM / dars-resurslar</div>
      </div>
      <div class="spacer"></div>
      <button id="themeBtn" class="iconbtn" title="Dark/Light">🌙</button>
      <div class="uc-chip" id="ucChip" aria-haspopup="dialog" aria-expanded="false">
        <div class="uc-ava" id="ucAva">LM</div>
        <div class="uc-pill"><span class="uc-pill-label">⭐</span><b id="ucPointsVal">—</b></div>
        <button class="uc-more" id="ucMore" aria-label="Profil">⋯</button>
      </div>
    </header>

    <!-- Popover -->
    <div class="uc-popover-mask" id="ucMask"></div>
    <div class="uc-popover grad-border glass" id="ucPopover" role="dialog" aria-modal="true" aria-hidden="true">
      <div class="uc-pop-head">
        <div class="uc-ava lg" id="ucAvaLg">LM</div>
        <div class="uc-namebox">
          <div class="uc-fullname" id="ucName">Foydalanuvchi</div>
          <div class="uc-sub" id="ucNumeric">ID: —</div>
        </div>
      </div>
      <div class="uc-grid">
        <div class="uc-kv"><div class="k">Viloyat</div><div class="v" id="ucRegion">—</div></div>
        <div class="uc-kv"><div class="k">Tuman</div><div class="v" id="ucDistrict">—</div></div>
        <div class="uc-kv"><div class="k">Maktab</div><div class="v" id="ucSchool">—</div></div>
        <div class="uc-kv"><div class="k">Sinf</div><div class="v" id="ucClass">—</div></div>
        <div class="uc-kv"><div class="k">Telefon</div><div class="v" id="ucPhone">—</div></div>
      </div>
      <div class="uc-actions">
        <button class="btn-primary" id="ucOpenProfile">📝 Profil</button>
        <button class="btn-ghost" id="ucSignOut">⬅️ Chiqish</button>
      </div>
    </div>

    <!-- TOP FILTERS -->
    <section class="filters grad-border glass" id="filtersMain">
      <h4>BO‘LIMLAR:</h4>
      <div id="mainTags" class="chips"></div>
    </section>

    <!-- Banner -->
    <section id="banners" class="banner grad-border glass">
      <h1>CHSB & BSB sinovlari oldidan shunday tayyorgarlik qiling!</h1>
      <p>Platformada mavzulashtirilgan testlar, tezkor mashqlar va batafsil izohlar — hammasi bir joyda.</p>
    </section>

    <!-- Leaderboard -->
    <section class="board grad-border glass" id="board">
      <h3>League</h3>
      <div class="pager">
        <button id="decilePrev" class="pbtn">⬅️ Oldingi (10)</button>
        <div class="pinfo" id="decileInfo">10–1 (Diamond)</div>
        <button id="decileNext" class="pbtn">Keyingi (10) ➡️</button>
      </div>
      <div id="boardList"></div>
    </section>

    <div class="container"><div id="sections"></div></div>

    <!-- Profile modal -->
    <div id="profileModal" class="modal-mask" aria-modal="true" role="dialog">
      <div class="modal glass grad-border premium-modal">
        <h3>Profil ma’lumotlari (majburiy)</h3>

        <div class="grid2">
          <div class="ctl"><label>Ism *</label><input id="pFirst" autocomplete="given-name"></div>
          <div class="ctl"><label>Familiya *</label><input id="pLast" autocomplete="family-name"></div>
        </div>

        <div class="grid3">
          <div class="ctl">
            <label>Roli *</label>
            <select id="pRole">
              <option value="student">O‘quvchi</option>
              <option value="teacher">O‘qituvchi</option>
            </select>
          </div>
          <div class="ctl">
            <label>Viloyat *</label>
            <select id="pRegion"></select>
          </div>
          <div class="ctl">
            <label>Tuman/Shahar *</label>
            <select id="pDistrict"></select>
          </div>
        </div>

        <div class="grid3">
          <div class="ctl">
            <label>Maktab *</label>
            <div class="inline-actions">
              <select id="pSchoolSel" style="flex:1 1 auto"></select>
              <span id="schoolToggle" class="linklike" title="Ro‘yxatda yo‘q">Ro‘yxatda yo‘q</span>
            </div>
            <input id="pSchoolCustom" class="hidden" placeholder="Maktab nomini kiriting">
          </div>

          <div class="ctl" id="pGradeWrap">
            <label>Sinf *</label>
            <select id="pGrade"></select>
          </div>

          <div class="ctl">
            <label>Telefon *</label>
            <input id="pPhone" placeholder="+998 XX XXX XX XX" autocomplete="tel">
          </div>
        </div>

        <div class="row">
          <div class="danger" id="pError"></div>
          <button id="pSave" class="btn">Saqlash</button>
          <button id="pClose" class="btn ghost">Yopish</button>
        </div>
      </div>
    </div>
  </div>

  <!-- JS (ESM) -->
  <script type="module" src="./app/app.js"></script>
</body>
</html>
