<!doctype html>
<html lang="uz">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>LeaderMath</title>
  <meta name="theme-color" content="#2E8B57" />
  <link rel="stylesheet" href="assets/app.css" />
</head>
<body>
  <!-- TOPBAR -->
  <header class="topbar">
    <div class="brand">
      <div class="logo" title="LeaderMath">
        <img src="logo.png" alt="Logo" onerror="this.remove(); this.parentElement.textContent='œÄ';" />
      </div>
      <div class="brandtext">
        <h1>LeaderMath</h1>
        <p id="todayLabel">Bugun: ‚Äî</p>
      </div>
    </div>

    <div class="userArea">
      <button id="loginBtn" class="btn btn-primary">Kirish</button>

      <div id="chip" class="userchip" style="display:none;">
        <div class="avatarCircle" id="ava">LM</div>
        <div class="meta">
          <div class="name" id="uname">‚Äî</div>
          <div class="sub"><span class="pill" id="pointsPill">0 ball</span></div>
        </div>
        <button id="profileBtn" class="btn btn-ghost">Profil</button>
        <button id="logoutBtn" class="btn btn-ghost">Chiqish</button>
      </div>
    </div>
  </header>

  <main class="wrap">
    <div class="grid">
      <!-- BANNERS -->
      <section class="card carousel">
        <div class="head">
          <div>
            <h2>Bannerlar</h2>
            <div class="hint">Mobile-first carousel: <b>banner/1.png, 2.png, ...</b></div>
          </div>
          <button class="btn btn-ghost" id="reloadBanners">Yangilash</button>
        </div>
        <div class="slides" id="bannerSlides"></div>
        <div class="dots" id="bannerDots"></div>
      </section>

      <!-- KUN SAVOLI -->
      <section class="card">
        <div class="head">
          <div>
            <h2>Kun savoli</h2>
            <div class="hint">Savol: <b>kun-savoli/1.png...</b> ‚Ä¢ Javob: <b>kun-savoli/javob.json</b></div>
          </div>
          <button class="btn btn-ghost" id="nextQuestion">Keyingisi</button>
        </div>

        <div class="qwrap">
          <div class="qbox">
            <img id="qImg" class="qimg" alt="Kun savoli" />
            <div class="qactions">
              <input id="answerInp" class="input" placeholder="Javobni yozing (masalan: 42)" />
              <div class="row">
                <button class="btn btn-primary" id="sendAnswer">Javob berish</button>
                <button class="btn btn-ghost" id="showRating">Reyting</button>
              </div>
              <div class="note" id="qNote">
                Birinchi to‚Äòg‚Äòri topgan foydalanuvchi ‚ÄúG‚Äòolib‚Äù. Har bir to‚Äòg‚Äòri javob = <b>1 ball</b>.
              </div>
            </div>
          </div>

          <div id="winnerBox" class="winner" style="display:none;">
            <div class="spark"></div>
            <div class="badge">üèÜ Bugungi g‚Äòolib</div>
            <div class="winnerName" id="winnerName">‚Äî</div>
            <div class="winnerMeta" id="winnerMeta">‚Äî</div>
          </div>

          <div id="ratingBox" style="display:none;margin-top:12px;">
            <table class="table">
              <thead>
                <tr>
                  <th style="width:52px">#</th>
                  <th>Foydalanuvchi</th>
                  <th style="width:90px">Ball</th>
                </tr>
              </thead>
              <tbody id="ratingBody"></tbody>
            </table>
          </div>
        </div>
      </section>
    </div>
  </main>

  <!-- AUTH OVERLAY (LOGIN + SIGNUP) -->
  <div class="overlay" id="authOverlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true">
      <div class="mhead">
        <div>
          <h3>Kirish</h3>
          <div class="mini">Kirish majburiy. ID+Parol yo‚Äòq bo‚Äòlsa ‚ÄúMen yangiman‚Äù ni bosing.</div>
        </div>
        <button class="btn x" id="closeAuth" aria-label="Yopish">‚úï</button>
      </div>

      <div class="mbody">
        <div class="seg">
          <button class="btn active" data-tab="login">ID + Parol</button>
          <button class="btn" data-tab="signup">Men yangiman</button>
        </div>

        <div id="status" class="status"></div>

        <!-- LOGIN -->
        <div id="tab-login" class="form">
          <input id="loginId" class="input" placeholder="ID (masalan: 10001)" />
          <input id="loginPass" type="password" class="input" placeholder="Parol" />
          <button id="doLoginBtn" class="btn btn-primary">Kirish</button>
          <div class="mini">ID va Parol noto‚Äòg‚Äòri bo‚Äòlsa kirish bo‚Äòlmaydi.</div>
        </div>

        <!-- SIGNUP -->
        <div id="tab-signup" class="form" style="display:none;">
          <div class="two">
            <input id="firstName" class="input" placeholder="Ism" />
            <input id="lastName" class="input" placeholder="Familiya" />
          </div>

          <input id="dob" class="input" placeholder="Tug‚Äòilgan sana (DD:MM:YYYY)" />

          <div class="two">
            <select id="regionSel" class="input"></select>
            <select id="districtSel" class="input"></select>
          </div>

          <input id="newPass" type="password" class="input" placeholder="Yangi parol (kamida 6)" />

          <div class="avatarPick">
            <div class="avatarTitle">Avatar tanlang</div>
            <div class="avatars" id="avatars"></div>
            <input type="hidden" id="avatarValue" value="" />
            <div class="mini">Avatarlar: <b>avatar/1.png, 2.png, ...</b></div>
          </div>

          <button id="doSignupBtn" class="btn btn-primary">Ro‚Äòyxatdan o‚Äòtish</button>
          <div class="mini">
            Ro‚Äòyxatdan o‚Äòtgach sizga <b>ID</b> beriladi ‚Äî keyingi safar shu ID+parol bilan kirasiz.
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- PROFILE VIEW -->
  <div class="overlay" id="profileOverlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true">
      <div class="mhead">
        <div>
          <h3>Profil</h3>
          <div class="mini">Ko‚Äòrish oynasi (tahrirlash alohida)</div>
        </div>
        <button class="btn x" id="closeProfile" aria-label="Yopish">‚úï</button>
      </div>

      <div class="mbody">
        <div class="profileCard">
          <div class="profileRow">
            <img id="pAvatar" class="pAvatar" alt="avatar" />
            <div>
              <div class="pName" id="pName">‚Äî</div>
              <div class="pSub" id="pIdLine">‚Äî</div>
            </div>
          </div>

          <div class="kv">
            <div class="k">Tug‚Äòilgan sana</div><div class="v" id="pDob">‚Äî</div>
            <div class="k">Viloyat</div><div class="v" id="pRegion">‚Äî</div>
            <div class="k">Tuman</div><div class="v" id="pDistrict">‚Äî</div>
            <div class="k">Ball</div><div class="v" id="pPoints">‚Äî</div>
          </div>
        </div>

        <div class="row">
          <button class="btn btn-primary" id="openEdit">Tahrirlash</button>
          <button class="btn btn-ghost" id="logoutBtn2">Chiqish</button>
        </div>
      </div>
    </div>
  </div>

  <!-- PROFILE EDIT -->
  <div class="overlay" id="editOverlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true">
      <div class="mhead">
        <div>
          <h3>Profilni tahrirlash</h3>
          <div class="mini">Saqlash Netlify API orqali Firebaseda yoziladi</div>
        </div>
        <button class="btn x" id="closeEdit" aria-label="Yopish">‚úï</button>
      </div>

      <div class="mbody">
        <div id="editStatus" class="status"></div>

        <div class="two">
          <input id="eFirstName" class="input" placeholder="Ism" />
          <input id="eLastName" class="input" placeholder="Familiya" />
        </div>

        <input id="eDob" class="input" placeholder="Tug‚Äòilgan sana (DD:MM:YYYY)" />

        <div class="two">
          <select id="eRegionSel" class="input"></select>
          <select id="eDistrictSel" class="input"></select>
        </div>

        <div class="avatarPick">
          <div class="avatarTitle">Avatar</div>
          <div class="avatars" id="eAvatars"></div>
          <input type="hidden" id="eAvatarValue" value="" />
        </div>

        <button class="btn btn-primary" id="saveProfile">Saqlash</button>
      </div>
    </div>
  </div>

  <!-- HARD LOGIN LOCK (page blur until auth) -->
  <div id="lockScreen" class="lockScreen" style="display:none;">
    <div class="lockBox">
      <div class="lockTitle">Kirish majburiy</div>
      <div class="lockText">Davom etish uchun tizimga kiring yoki ro‚Äòyxatdan o‚Äòting.</div>
      <button class="btn btn-primary" id="lockLogin">Kirish / Ro‚Äòyxat</button>
    </div>
  </div>

  <script src="assets/app.js"></script>
</body>
</html>
