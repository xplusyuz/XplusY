<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>LeaderMath — Kirish</title>

<style>
body{
  margin:0;
  min-height:100vh;
  background:#0b0f1a;
  color:#fff;
  font-family:system-ui;
  display:flex;
  align-items:center;
  justify-content:center;
}
.box{
  width:100%;
  max-width:360px;
  padding:24px;
}
h1{
  margin:0 0 12px;
  font-size:24px;
}
button,input{
  width:100%;
  padding:14px;
  margin-top:10px;
  border-radius:14px;
  border:none;
  font-size:15px;
}
button{
  background:#6c63ff;
  color:#fff;
}
input{
  background:rgba(255,255,255,.08);
  color:#fff;
}
small{
  opacity:.7;
}
</style>
</head>

<body>
<div class="box">
  <h1>LeaderMath</h1>

  <button onclick="auto()">⚡ 1 bosishda kirish</button>

  <small>yoki mavjud ID bilan</small>

  <input id="id" placeholder="ID">
  <input id="pass" placeholder="Parol" type="password">
  <button onclick="loginUser()">Kirish</button>

  <pre id="out"></pre>
</div>

<script type="module">
import { autoRegister, login } from "./auth-utils.js";

async function auto() {
  const d = await autoRegister();
  out.textContent =
    "ID: " + d.loginId + "\nParol: " + d.password;
  setTimeout(()=>location.href="/",1200);
}

async function loginUser() {
  const d = await login(id.value, pass.value);
  if (d.error) {
    out.textContent = d.error;
  } else {
    location.href="/";
  }
}
</script>
</body>
</html>
