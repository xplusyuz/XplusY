<!doctype html>
<html lang="uz">
<head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Kirish â€” LeaderMath</title>
<style>
  :root{--brand:#2E8B57;--brand2:#1F6B45;--frame:#d8e7dd;--card:#fff;--bg:#f4f8f6;--text:#0d1b14}
  body{margin:0;min-height:100dvh;display:grid;place-items:center;background:var(--bg);color:var(--text);font:16px/1.5 Inter,system-ui}
  .card{background:var(--card);border:1px solid var(--frame);border-radius:16px;padding:20px;box-shadow:0 14px 40px rgba(0,0,0,.08);width:min(420px,92%)}
  .btn{width:100%;padding:12px 14px;border-radius:12px;border:0;background:linear-gradient(135deg,var(--brand),var(--brand2));color:#fff;font-weight:800;cursor:pointer}
  .muted{color:#4a6b5b;font-size:14px;margin-top:10px}
</style></head>
<body>
  <div class="card">
    <h2 style="margin:0 0 6px">Kirish</h2>
    <p class="muted">Google orqali tizimga kiring.</p>
    <button id="googleBtn" class="btn">Google bilan</button>
    <div id="status" class="muted"></div>
  </div>
  <script type="module">
    import { auth, GoogleAuthProvider, signInWithPopup, onAuthStateChanged } from "./lib/firebase.client.js";
    const ret = new URLSearchParams(location.search).get('return') || './index.html';
    const status = document.getElementById('status');
    document.getElementById('googleBtn').onclick = async ()=>{
      try{ await signInWithPopup(auth, new GoogleAuthProvider()); }
      catch(e){ status.textContent='Kirish xatosi: '+(e?.message||e); }
    };
    onAuthStateChanged(auth, (u)=>{ if(u){ location.replace(ret); } });
  </script>
</body></html>