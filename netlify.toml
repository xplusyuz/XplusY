[build]
  publish = "public"
  functions = "netlify/functions"

# 1) Kimdir /public/... bilan kirsa ham rootga qaytarib yubor
[[redirects]]
  from = "/public/*"
  to = "/:splat"
  status = 301
  force = true

# 2) Netlify Functions (ixtiyoriy, lekin professional)
# /api/payme -> /.netlify/functions/payme
[[redirects]]
  from = "/api/*"
  to = "/.netlify/functions/:splat"
  status = 200

# 3) SPA fallback (eng MUHIM)
# force=false => agar fayl REAL mavjud bo‘lsa (region.json, js, css, png) uni beradi,
# mavjud bo‘lmasa index.html qaytaradi.
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
  force = false

# --- Optional: basic security headers (professional) ---
[[headers]]
  for = "/*"
  [headers.values]
    X-Content-Type-Options = "nosniff"
    Referrer-Policy = "strict-origin-when-cross-origin"
    X-Frame-Options = "SAMEORIGIN"