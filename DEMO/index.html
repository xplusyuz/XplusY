<!DOCTYPE html>
<html lang="uz" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LeaderMath - Dynamic Chips</title>
    <meta name="theme-color" content="#2E8B57">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🧮</text></svg>">
    <style>
        /* ---------- BASIC STYLES ---------- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #f8fbf9 0%, #f0f5f2 100%);
            color: #1a2f1a;
            line-height: 1.6;
            overflow-x: hidden;
            position: relative;
            min-height: 100vh;
        }

        /* ---------- WATERMARK PROTECTION ---------- */
        body::before {
            content: "LeaderMath © 2024 | " attr(data-user-email);
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-45deg);
            font-size: 40px;
            color: rgba(46, 139, 87, 0.03);
            white-space: nowrap;
            z-index: 9999;
            pointer-events: none;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        /* ---------- HEADER ---------- */
        header {
            position: sticky;
            top: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 20px rgba(46, 139, 87, 0.1);
            z-index: 1000;
            border-bottom: 3px solid #2E8B57;
        }

        .bar {
            display: flex;
            align-items: center;
            padding: 1rem 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .logo {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #2E8B57, #3DA56D);
            border-radius: 12px;
            margin-right: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 20px;
            box-shadow: 0 4px 12px rgba(46, 139, 87, 0.3);
        }

        .logo-text {
            flex: 1;
        }

        .logo-title {
            font-size: 1.4rem;
            font-weight: 800;
            color: #2E8B57;
            margin-bottom: 2px;
        }

        .subtitle {
            color: #5a735a;
            font-size: 0.9rem;
        }

        .spacer {
            flex: 1;
        }

        /* ---------- BUTTONS ---------- */
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            background: transparent;
            color: #2E8B57;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid #2E8B57;
            font-size: 0.95rem;
        }

        .btn:hover {
            background: #2E8B57;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(46, 139, 87, 0.3);
        }

        .btn.pri {
            background: linear-gradient(135deg, #2E8B57, #3DA56D);
            color: white;
            border: none;
        }

        /* ---------- CHIPS ---------- */
        .chips-sticky {
            position: sticky;
            top: 83px;
            background: rgba(240, 245, 242, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid #d1e0d1;
            z-index: 999;
            transition: all 0.3s ease;
        }

        .chips-wrap {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            overflow-x: auto;
        }

        .chips-row {
            display: flex;
            gap: 12px;
            padding: 18px 0;
            min-width: max-content;
        }

        .chip {
            padding: 14px 28px;
            background: white;
            border: 2px solid #d1e0d1;
            border-radius: 30px;
            color: #1a2f1a;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
            font-size: 0.95rem;
            box-shadow: 0 2px 8px rgba(46, 139, 87, 0.1);
        }

        .chip:hover {
            border-color: #2E8B57;
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(46, 139, 87, 0.15);
        }

        .chip.active {
            background: linear-gradient(135deg, #2E8B57, #3DA56D);
            color: white;
            border-color: #2E8B57;
            box-shadow: 0 6px 20px rgba(46, 139, 87, 0.3);
        }

        /* ---------- MAIN CONTENT ---------- */
        main {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
            min-height: calc(100vh - 200px);
        }

        .page {
            background: white;
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(46, 139, 87, 0.1);
            overflow: hidden;
            border: 1px solid #e8f2e8;
            position: relative;
        }

        .page::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(135deg, #2E8B57, #3DA56D);
        }

        /* ---------- MODALS ---------- */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(15, 31, 21, 0.9);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            padding: 20px;
            backdrop-filter: blur(5px);
        }

        .modal.show {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        .modal-card {
            background: white;
            border-radius: 20px;
            padding: 2.5rem;
            max-width: 500px;
            width: 100%;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
            border: 3px solid #2E8B57;
            position: relative;
            transform: scale(0.9);
            animation: scaleUp 0.3s ease forwards;
        }

        .modal-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(135deg, #2E8B57, #3DA56D);
            border-radius: 20px 20px 0 0;
        }

        .modal-title {
            font-size: 1.6rem;
            color: #2E8B57;
            margin-bottom: 1rem;
            text-align: center;
            font-weight: 700;
        }

        /* ---------- FORMS ---------- */
        .auth-col {
            display: flex;
            flex-direction: column;
            gap: 1.2rem;
            margin-top: 1.5rem;
        }

        .in {
            padding: 16px 20px;
            border: 2px solid #d1e0d1;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: #f8fbf9;
        }

        .in:focus {
            outline: none;
            border-color: #2E8B57;
            box-shadow: 0 0 0 4px rgba(46, 139, 87, 0.1);
            background: white;
        }

        .google-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            padding: 16px 20px;
            border: 2px solid #d1e0d1;
            border-radius: 10px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            color: #1a2f1a;
        }

        .google-btn:hover {
            border-color: #2E8B57;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(46, 139, 87, 0.1);
        }

        /* ---------- USER MENU ---------- */
        #userBox {
            position: relative;
            display: none;
        }

        .user-pill {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 20px;
            background: #f0f5f2;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            box-shadow: 0 2px 8px rgba(46, 139, 87, 0.1);
        }

        .user-pill:hover {
            border-color: #2E8B57;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(46, 139, 87, 0.2);
        }

        .avatar {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: linear-gradient(135deg, #2E8B57, #3DA56D);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 18px;
            box-shadow: 0 4px 12px rgba(46, 139, 87, 0.3);
        }

        .uname {
            font-weight: 600;
            font-size: 0.95rem;
        }

        .score {
            font-weight: 700;
            font-size: 0.95rem;
            color: #2E8B57;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .menu {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border-radius: 15px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
            padding: 8px 0;
            min-width: 220px;
            display: none;
            border: 2px solid #2E8B57;
            margin-top: 8px;
            z-index: 1001;
        }

        .menu.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        .mi {
            padding: 14px 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 1px solid #f0f5f2;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.95rem;
        }

        .mi:hover {
            background: #f0f5f2;
            color: #2E8B57;
            transform: translateX(5px);
        }

        .mi:last-child {
            border-bottom: none;
        }

        /* ---------- SECURITY STYLES ---------- */
        .danger {
            color: #dc3545;
            text-align: center;
            margin-top: 12px;
            font-weight: 600;
            padding: 10px;
            background: rgba(220, 53, 69, 0.1);
            border-radius: 8px;
        }

        /* ---------- ANIMATIONS ---------- */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes scaleUp {
            from { transform: scale(0.9); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        @keyframes slideDown {
            from { transform: translateY(-10px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .chip-enter {
            animation: fadeIn 0.5s ease;
        }

        /* ---------- DARK THEME ---------- */
        [data-theme="dark"] {
            background: linear-gradient(135deg, #0F1F15 0%, #1A2F1A 100%);
            color: #e8f2e8;
        }

        [data-theme="dark"] header {
            background: rgba(30, 50, 33, 0.95);
        }

        [data-theme="dark"] .chips-sticky {
            background: rgba(26, 47, 26, 0.95);
        }

        [data-theme="dark"] .page {
            background: #1E3221;
            border-color: #2D4A2D;
        }

        [data-theme="dark"] .chip {
            background: #1A2F1A;
            border-color: #2D4A2D;
            color: #e8f2e8;
        }

        [data-theme="dark"] .modal-card {
            background: #1E3221;
            border-color: #2E8B57;
        }

        [data-theme="dark"] .in {
            background: #1A2F1A;
            border-color: #2D4A2D;
            color: #e8f2e8;
        }

        [data-theme="dark"] .google-btn {
            background: #1A2F1A;
            border-color: #2D4A2D;
            color: #e8f2e8;
        }

        [data-theme="dark"] .menu {
            background: #1E3221;
            border-color: #2E8B57;
        }

        [data-theme="dark"] .mi:hover {
            background: #1A2F1A;
        }

        /* ---------- RESPONSIVE ---------- */
        @media (max-width: 768px) {
            .bar {
                padding: 1rem;
            }
            
            .chips-wrap {
                padding: 0 1rem;
            }
            
            main {
                padding: 1rem;
            }
            
            .chip {
                padding: 12px 20px;
                font-size: 0.9rem;
            }
            
            .modal-card {
                padding: 2rem;
            }
        }

        @media (max-width: 480px) {
            .logo-text .subtitle {
                display: none;
            }
            
            .user-pill .uname {
                display: none;
            }
            
            .bar {
                padding: 0.75rem;
            }
            
            .btn {
                padding: 10px 16px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body data-user-email="mehmon@leader.math">
    <!-- WATERMARK BACKGROUND -->
    <div style="position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:-1; opacity:0.02; background:repeating-linear-gradient(45deg, #2E8B57, #2E8B57 10px, transparent 10px, transparent 20px);"></div>

    <header>
        <div class="bar">
            <div class="logo">🧮</div>
            <div class="logo-text">
                <div class="logo-title">LeaderMath — Dynamic Chips</div>
                <div class="subtitle">Chips + Auth + Profil + Script-run</div>
            </div>
            <div class="spacer"></div>
            <button id="signInBtn" class="btn">Kirish</button>
            <div id="userBox">
                <div id="userPill" class="user-pill">
                    <div id="userAvatar" class="avatar">F</div>
                    <div id="userName" class="uname">Foydalanuvchi</div>
                    <div id="userScore" class="score">0 ⭐</div>
                </div>
                <div id="userMenu" class="menu">
                    <div class="mi" id="themeToggle">🌗 Kun/Tun</div>
                    <div class="mi" id="viewProfile">👤 Profil</div>
                    <div class="mi" id="editProfile">✏️ Profilni tahrirlash</div>
                    <div class="mi" id="signOutBtn">🚪 Chiqish</div>
                </div>
            </div>
        </div>
    </header>

    <div class="chips-sticky">
        <div class="chips-wrap">
            <div class="chips-row" id="chips">
                <!-- Chips will be loaded here -->
            </div>
        </div>
    </div>

    <main>
        <section id="content" class="page">
            <div style="padding:60px 40px; text-align:center;">
                <h3 style="color:#2E8B57; margin-bottom:20px; font-size:1.8rem;">LeaderMath Platformasiga Xush Kelibsiz!</h3>
                <p class="subtitle" style="font-size:1.1rem; max-width:600px; margin:0 auto;">Yuqoridagi chiplardan birini tanlab, matematika va dasturlash bo'yicha qiziqarli topshiriqlarni bajarishingiz mumkin</p>
            </div>
        </section>
    </main>

    <!-- AUTH MODAL -->
    <div id="lockCover" class="modal">
        <div class="modal-card">
            <h2 class="modal-title">Kirish talab qilinadi</h2>
            <div class="subtitle" style="text-align:center; margin-bottom:10px;">Chiplar faqat kirgan foydalanuvchilar uchun</div>
            <div id="authBox" class="auth-col">
                <input id="em" class="in" placeholder="Email manzilingiz" type="email">
                <input id="pw" class="in" placeholder="Parol (kamida 6 belgi)" type="password">
                <button id="emailLogin" class="btn pri">Email orqali kirish</button>
                <div class="subtitle" style="text-align:center">— yoki —</div>
                <button id="googleBtn" class="google-btn">
                    <span>Google hisobingiz bilan kirish</span>
                </button>
            </div>
            <div id="authErr" class="danger"></div>
        </div>
    </div>

    <!-- PROFILE MODAL -->
    <div id="profileModal" class="modal">
        <div class="modal-card">
            <h2 class="modal-title">Profilni tahrirlash</h2>
            <div style="display:grid; gap:1.2rem; margin-top:2rem;">
                <input id="pf_first" class="in" placeholder="Ismingiz" required>
                <input id="pf_last" class="in" placeholder="Familiyangiz" required>
                <select id="pf_region" class="in" required>
                    <option value="">Viloyatingizni tanlang</option>
                    <option>Toshkent shahri</option>
                    <option>Toshkent viloyati</option>
                    <option>Samarqand</option>
                    <option>Buxoro</option>
                    <option>Navoiy</option>
                    <option>Qashqadaryo</option>
                    <option>Surxondaryo</option>
                    <option>Jizzax</option>
                    <option>Sirdaryo</option>
                    <option>Farg'ona</option>
                    <option>Andijon</option>
                    <option>Namangan</option>
                    <option>Xorazm</option>
                    <option>Qoraqalpog'iston</option>
                </select>
                <input id="pf_district" class="in" placeholder="Tuman yoki shaharingiz" required>
                <select id="pf_class" class="in" required>
                    <option value="">Sinf yoki statusingizni tanlang</option>
                    <option>1-sinf</option>
                    <option>2-sinf</option>
                    <option>3-sinf</option>
                    <option>4-sinf</option>
                    <option>5-sinf</option>
                    <option>6-sinf</option>
                    <option>7-sinf</option>
                    <option>8-sinf</option>
                    <option>9-sinf</option>
                    <option>10-sinf</option>
                    <option>11-sinf</option>
                    <option>1-kurs</option>
                    <option>2-kurs</option>
                    <option>3-kurs</option>
                    <option>4-kurs</option>
                    <option>Talaba</option>
                    <option>O'qituvchi</option>
                </select>
                <input id="pf_phone" class="in" placeholder="Telefon raqamingiz" required type="tel">
            </div>
            <div style="display:flex; justify-content:flex-end; margin-top:2.5rem; gap:12px;">
                <button id="closeProfile" class="btn">Bekor qilish</button>
                <button id="saveProfile" class="btn pri">Ma'lumotlarni saqlash</button>
            </div>
        </div>
    </div>

    <!-- VIEW PROFILE MODAL -->
    <div id="viewProfileModal" class="modal">
        <div class="modal-card">
            <h2 class="modal-title">Profil ma'lumotlari</h2>
            <div style="display:grid; gap:1.2rem; margin-top:2rem;">
                <div style="display:grid; grid-template-columns:1fr 2fr; gap:1rem; align-items:center;">
                    <strong>Ism:</strong>
                    <span id="v_first">-</span>
                </div>
                <div style="display:grid; grid-template-columns:1fr 2fr; gap:1rem; align-items:center;">
                    <strong>Familiya:</strong>
                    <span id="v_last">-</span>
                </div>
                <div style="display:grid; grid-template-columns:1fr 2fr; gap:1rem; align-items:center;">
                    <strong>Viloyat:</strong>
                    <span id="v_region">-</span>
                </div>
                <div style="display:grid; grid-template-columns:1fr 2fr; gap:1rem; align-items:center;">
                    <strong>Tuman/Shahar:</strong>
                    <span id="v_district">-</span>
                </div>
                <div style="display:grid; grid-template-columns:1fr 2fr; gap:1rem; align-items:center;">
                    <strong>Sinf/Status:</strong>
                    <span id="v_class">-</span>
                </div>
                <div style="display:grid; grid-template-columns:1fr 2fr; gap:1rem; align-items:center;">
                    <strong>Telefon:</strong>
                    <span id="v_phone">-</span>
                </div>
                <div style="display:grid; grid-template-columns:1fr 2fr; gap:1rem; align-items:center;">
                    <strong>Ball:</strong>
                    <span id="v_points" style="color:#2E8B57; font-weight:bold;">0 ⭐</span>
                </div>
            </div>
            <div style="display:flex; justify-content:flex-end; margin-top:2.5rem;">
                <button id="closeView" class="btn pri">Yopish</button>
            </div>
        </div>
    </div>

    <script>
        // ========== SECURITY PROTECTION ==========
        (function() {
            'use strict';
            
            // Disable right-click
            document.addEventListener('contextmenu', function(e) {
                e.preventDefault();
                showSecurityAlert("O'ng tugma bloklangan");
                return false;
            });

            // Disable F12, Ctrl+Shift+I, Ctrl+Shift+J, Ctrl+U
            document.addEventListener('keydown', function(e) {
                if (e.key === 'F12' || 
                    (e.ctrlKey && e.shiftKey && e.key === 'I') ||
                    (e.ctrlKey && e.shiftKey && e.key === 'J') ||
                    (e.ctrlKey && e.key === 'U') ||
                    (e.ctrlKey && e.key === 'S') ||
                    (e.ctrlKey && e.key === 'P') ||
                    (e.metaKey && e.key === 'I')) {
                    e.preventDefault();
                    showSecurityAlert("Developer tools ochish bloklangan");
                    return false;
                }
            });

            // Disable text selection
            document.addEventListener('selectstart', function(e) {
                e.preventDefault();
                return false;
            });

            // Disable drag and drop
            document.addEventListener('dragstart', function(e) {
                e.preventDefault();
                return false;
            });

            // Clear clipboard on copy attempt
            document.addEventListener('copy', function(e) {
                e.preventDefault();
                showSecurityAlert("Nusxalash bloklangan");
                if (window.clipboardData) {
                    window.clipboardData.setData('text', '');
                } else if (e.clipboardData) {
                    e.clipboardData.setData('text/plain', '');
                }
                return false;
            });

            // Disable print screen
            document.addEventListener('keyup', function(e) {
                if (e.key === 'PrintScreen') {
                    navigator.clipboard.writeText('').catch(function() {});
                    showSecurityAlert("Screenshot bloklangan");
                }
            });

            // Prevent iframe embedding
            if (window.self !== window.top) {
                window.top.location = window.self.location;
            }

            // Disable developer tools
            let devToolsOpen = false;
            setInterval(function() {
                const widthThreshold = window.outerWidth - window.innerWidth > 160;
                const heightThreshold = window.outerHeight - window.innerHeight > 160;
                
                if ((widthThreshold || heightThreshold) && !devToolsOpen) {
                    devToolsOpen = true;
                    window.location.reload();
                }
            }, 1000);

            function showSecurityAlert(message) {
                const alert = document.createElement('div');
                alert.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: #dc3545;
                    color: white;
                    padding: 12px 20px;
                    border-radius: 8px;
                    z-index: 10000;
                    font-weight: 600;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                    animation: slideInRight 0.3s ease;
                `;
                alert.textContent = message;
                document.body.appendChild(alert);
                
                setTimeout(() => {
                    alert.style.animation = 'slideOutRight 0.3s ease forwards';
                    setTimeout(() => alert.remove(), 300);
                }, 2000);
            }

            // Add CSS for alerts
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideInRight {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
                @keyframes slideOutRight {
                    from { transform: translateX(0); opacity: 1; }
                    to { transform: translateX(100%); opacity: 0; }
                }
            `;
            document.head.appendChild(style);

        })();

        // ========== APPLICATION LOGIC ==========
        document.addEventListener('DOMContentLoaded', function() {
            // Theme toggle
            document.getElementById('themeToggle').addEventListener('click', function() {
                const currentTheme = document.documentElement.getAttribute('data-theme');
                const newTheme = currentTheme === 'light' ? 'dark' : 'light';
                document.documentElement.setAttribute('data-theme', newTheme);
                localStorage.setItem('theme', newTheme);
                closeAllModals();
            });

            // Load saved theme
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);

            // Modal controls
            document.getElementById('signInBtn').addEventListener('click', function() {
                showModal('lockCover');
            });

            document.getElementById('viewProfile').addEventListener('click', function() {
                showModal('viewProfileModal');
                loadProfileData();
            });

            document.getElementById('editProfile').addEventListener('click', function() {
                showModal('profileModal');
                loadProfileForm();
            });

            document.getElementById('closeProfile').addEventListener('click', function() {
                closeAllModals();
            });

            document.getElementById('closeView').addEventListener('click', function() {
                closeAllModals();
            });

            // Close modals when clicking outside
            document.querySelectorAll('.modal').forEach(function(modal) {
                modal.addEventListener('click', function(e) {
                    if (e.target === modal) {
                        closeAllModals();
                    }
                });
            });

            // User menu toggle
            document.getElementById('userPill').addEventListener('click', function(e) {
                e.stopPropagation();
                document.getElementById('userMenu').classList.toggle('show');
            });

            // Close menu when clicking outside
            document.addEventListener('click', function() {
                document.getElementById('userMenu').classList.remove('show');
            });

            // Sample chips data
            const sampleChips = [
                { id: 'math1', title: 'Matematika Asoslari', icon: '🔢' },
                { id: 'math2', title: 'Algebra', icon: '📊' },
                { id: 'geometry', title: 'Geometriya', icon: '📐' },
                { id: 'physics', title: 'Fizika', icon: '⚡' },
                { id: 'chemistry', title: 'Kimyo', icon: '🧪' },
                { id: 'programming', title: 'Dasturlash', icon: '💻' },
                { id: 'algorithms', title: 'Algoritmlar', icon: '🔄' }
            ];

            // Load chips
            const chipsContainer = document.getElementById('chips');
            sampleChips.forEach(chip => {
                const chipElement = document.createElement('button');
                chipElement.className = 'chip';
                chipElement.innerHTML = `${chip.icon} ${chip.title}`;
                chipElement.onclick = function() {
                    // Remove active class from all chips
                    document.querySelectorAll('.chip').forEach(c => c.classList.remove('active'));
                    // Add active class to clicked chip
                    chipElement.classList.add('active');
                    
                    // Show chip content with animation
                    const content = document.getElementById('content');
                    content.innerHTML = '';
                    content.classList.remove('chip-enter');
                    
                    setTimeout(() => {
                        content.innerHTML = `
                            <div style="padding:40px; text-align:center;" class="chip-enter">
                                <h3 style="color:#2E8B57; margin-bottom:20px; font-size:1.6rem;">${chip.title}</h3>
                                <div style="font-size:80px; margin:30px 0;">${chip.icon}</div>
                                <p class="subtitle" style="font-size:1.1rem; max-width:500px; margin:0 auto;">
                                    ${getChipDescription(chip.id)}
                                </p>
                                <div style="margin-top:30px;">
                                    <button class="btn pri" onclick="startExercise('${chip.id}')">Topshiriqni Boshlash</button>
                                </div>
                            </div>
                        `;
                        content.classList.add('chip-enter');
                    }, 50);
                };
                chipsContainer.appendChild(chipElement);
            });

            // Activate first chip
            if (chipsContainer.firstChild) {
                chipsContainer.firstChild.click();
            }

            // Simulate login
            document.getElementById('emailLogin').addEventListener('click', function() {
                const email = document.getElementById('em').value;
                const password = document.getElementById('pw').value;
                
                if (email && password.length >= 6) {
                    // Update watermark with user email
                    document.body.setAttribute('data-user-email', email);
                    
                    // Show user menu
                    document.getElementById('lockCover').classList.remove('show');
                    document.getElementById('signInBtn').style.display = 'none';
                    document.getElementById('userBox').style.display = 'block';
                    document.getElementById('userName').textContent = email.split('@')[0];
                    document.getElementById('userAvatar').textContent = email[0].toUpperCase();
                    
                    // Show success message
                    showSuccessAlert('Muvaffaqiyatli kirildi!');
                } else {
                    document.getElementById('authErr').textContent = 'Iltimos, email va parolni kiriting (parol kamida 6 belgi)';
                }
            });

            // Google login simulation
            document.getElementById('googleBtn').addEventListener('click', function() {
                const fakeEmail = "foydalanuvchi@gmail.com";
                document.body.setAttribute('data-user-email', fakeEmail);
                document.getElementById('lockCover').classList.remove('show');
                document.getElementById('signInBtn').style.display = 'none';
                document.getElementById('userBox').style.display = 'block';
                document.getElementById('userName').textContent = "Foydalanuvchi";
                document.getElementById('userAvatar').textContent = "F";
                showSuccessAlert('Google orqali muvaffaqiyatli kirildi!');
            });

            // Sign out
            document.getElementById('signOutBtn').addEventListener('click', function() {
                document.getElementById('signInBtn').style.display = 'block';
                document.getElementById('userBox').style.display = 'none';
                document.body.setAttribute('data-user-email', 'mehmon@leader.math');
                showSuccessAlert('Hisobdan muvaffaqiyatli chiqildi');
                closeAllModals();
            });

            // Save profile
            document.getElementById('saveProfile').addEventListener('click', function() {
                const firstName = document.getElementById('pf_first').value;
                const lastName = document.getElementById('pf_last').value;
                
                if (firstName && lastName) {
                    // Save to localStorage (simulated)
                    const profileData = {
                        first: firstName,
                        last: lastName,
                        region: document.getElementById('pf_region').value,
                        district: document.getElementById('pf_district').value,
                        class: document.getElementById('pf_class').value,
                        phone: document.getElementById('pf_phone').value,
                        points: 150 // Simulated points
                    };
                    
                    localStorage.setItem('userProfile', JSON.stringify(profileData));
                    closeAllModals();
                    showSuccessAlert('Profil ma\'lumotlari saqlandi!');
                    
                    // Update user display
                    document.getElementById('userName').textContent = `${firstName} ${lastName}`;
                    document.getElementById('userAvatar').textContent = firstName[0].toUpperCase();
                    document.getElementById('userScore').textContent = '150 ⭐';
                } else {
                    alert('Iltimos, kamida ism va familiyangizni kiriting');
                }
            });

            // Utility functions
            function showModal(modalId) {
                closeAllModals();
                document.getElementById(modalId).classList.add('show');
            }

            function closeAllModals() {
                document.querySelectorAll('.modal').forEach(modal => {
                    modal.classList.remove('show');
                });
                document.getElementById('userMenu').classList.remove('show');
            }

            function loadProfileData() {
                const profile = JSON.parse(localStorage.getItem('userProfile') || '{}');
                document.getElementById('v_first').textContent = profile.first || '-';
                document.getElementById('v_last').textContent = profile.last || '-';
                document.getElementById('v_region').textContent = profile.region || '-';
                document.getElementById('v_district').textContent = profile.district || '-';
                document.getElementById('v_class').textContent = profile.class || '-';
                document.getElementById('v_phone').textContent = profile.phone || '-';
                document.getElementById('v_points').textContent = (profile.points || 0) + ' ⭐';
            }

            function loadProfileForm() {
                const profile = JSON.parse(localStorage.getItem('userProfile') || '{}');
                document.getElementById('pf_first').value = profile.first || '';
                document.getElementById('pf_last').value = profile.last || '';
                document.getElementById('pf_region').value = profile.region || '';
                document.getElementById('pf_district').value = profile.district || '';
                document.getElementById('pf_class').value = profile.class || '';
                document.getElementById('pf_phone').value = profile.phone || '';
            }

            function showSuccessAlert(message) {
                const alert = document.createElement('div');
                alert.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: #28a745;
                    color: white;
                    padding: 12px 20px;
                    border-radius: 8px;
                    z-index: 10000;
                    font-weight: 600;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                    animation: slideInRight 0.3s ease;
                `;
                alert.textContent = message;
                document.body.appendChild(alert);
                
                setTimeout(() => {
                    alert.style.animation = 'slideOutRight 0.3s ease forwards';
                    setTimeout(() => alert.remove(), 300);
                }, 3000);
            }

            function getChipDescription(chipId) {
                const descriptions = {
                    'math1': 'Matematikaning asosiy tushunchalari va amallarini o\'rganing. Sonlar, arifmetik amallar va ularning qonuniyatlari.',
                    'math2': 'Algebraik ifodalar, tenglamalar va ularning yechim usullari. O\'zgaruvchilar va funktsiyalar bilan ishlash.',
                    'geometry': 'Geometrik shakllar, ularning xossalari va o\'lchovlari. Fazoviy tushunchalar va ularning qo\'llanilishi.',
                    'physics': 'Fizikaning asosiy qonunlari va hodisalari. Mexanika, termodinamika va elektromagnetizm.',
                    'chemistry': 'Kimyoviy elementlar, birikmalar va reaksiyalar. Moddalarning tarkibi va xossalari.',
                    'programming': 'Dasturlash asoslari va algoritmik fikrlash. Dastur yaratishning boshlang\'ich bosqichlari.',
                    'algorithms': 'Muammolarni yechish uchun algoritmlar yaratish va tahlil qilish. Samaradorlik va murakkablik tahlili.'
                };
                return descriptions[chipId] || 'Ushbu chip uchun tafsilotlar tez orada qo\'shiladi.';
            }
        });

        // Global function for starting exercises
        function startExercise(chipId) {
            alert(`"${chipId}" chipi uchun topshiriq boshlandi! (Simulyatsiya)`);
        }
    </script>
</body>
</html>