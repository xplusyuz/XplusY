<!doctype html>
<html lang="uz">
<head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>LeaderMath.UZ â€” Site</title>
<link rel="icon" href="./logo.png"/>
<style>body{margin:0;background:#F6FBF8;font:16px system-ui} .hdr{display:flex;gap:12px;align-items:center;padding:10px 14px;border-bottom:1px solid #dfe7e2;background:#fff;position:sticky;top:0} .brand b{color:#2E8B57} .chipbar{display:flex;gap:8px;padding:8px 14px;flex-wrap:wrap} .chip{padding:8px 12px;border:1px solid #e1e8e4;border-radius:999px;background:#fff} .chip.active{background:#2E8B57;color:#fff;border-color:#2E8B57} .section{max-width:1180px;margin:12px auto;background:#fff;border:1px solid #e1e8e4;border-radius:16px;overflow:hidden} iframe{width:100%;border:0;min-height:600px}</style>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-app.js";
import { getAuth, onAuthStateChanged, signInWithPopup, GoogleAuthProvider } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-auth.js";
import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-firestore.js";
const firebaseConfig = {"apiKey": "AIzaSyDYwHJou_9GqHZcf8XxtTByC51Z8un8rrM", "authDomain": "xplusy-760fa.firebaseapp.com", "projectId": "xplusy-760fa", "storageBucket": "xplusy-760fa.appspot.com", "messagingSenderId": "992512966017", "appId": "1:992512966017:web:5e919dbc9b8d8abcb43c80", "measurementId": "G-459PLJ7P7L"};
const app = initializeApp(firebaseConfig); const auth = getAuth(app); const db = getFirestore(app);
let state={sections:[],active:null};
async function fetchHome(){ try{ const s=await getDoc(doc(db,'configs','home')); if(s.exists()) return s.data(); }catch(e){ console.warn(e); } const r=await fetch('./home.json'); return await r.json(); }
function render(){ const bar=document.querySelector('.chipbar'); const host=document.querySelector('#host'); bar.innerHTML=''; host.innerHTML=''; state.sections.forEach((s,i)=>{ const b=document.createElement('button'); b.className='chip'+(i===0?' active':''); b.textContent=s.title||s.id; b.onclick=()=>activate(s.id||('sec'+i)); bar.appendChild(b); const sec=document.createElement('div'); sec.className='section'; sec.dataset.id=s.id||('sec'+i); const ifr=document.createElement('iframe'); if(s.mode==='url') ifr.src=s.src; else ifr.srcdoc='<!doctype html><meta charset=\'utf-8\'>'+ (s.contentHtml||''); sec.appendChild(ifr); host.appendChild(sec); }); if(state.sections[0]) activate(state.sections[0].id||'sec0'); }
function activate(id){ state.active=id; document.querySelectorAll('.section').forEach(s=>s.style.display=(s.dataset.id===id)?'block':'none'); }
onAuthStateChanged(auth, (u)=>{ document.getElementById('user').textContent=u? (u.email||'user'): 'Guest'; });
fetchHome().then(d=>{ state.sections=Array.isArray(d.sections)?d.sections:[]; render(); });
</script></head>
<body>
  <div class="hdr"><img src="./logo.png" width="24" height="24" style="border-radius:6px"/><div class="brand">LeaderMath.<b>UZ</b></div><div style="margin-left:auto">ðŸ‘¤ <span id="user">...</span></div></div>
  <div class="chipbar"></div>
  <div id="host"></div>
</body></html>
