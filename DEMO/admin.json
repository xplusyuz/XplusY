{
  "chips": [
    {
      "id": "home",
      "title": "Bosh sahifa",
      "icon": "./icons/home.svg",
      "html": "<style>.hm-sec{margin:12px 0;padding:10px;border:1px solid var(--frame,#e5e7eb);border-radius:14px;background:var(--card,#fff)}.hm-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}.hm-title{font-weight:800}.hm-rail{display:grid;grid-auto-flow:column;gap:10px;overflow-x:auto;scroll-snap-type:x mandatory;scrollbar-width:none}.hm-rail::-webkit-scrollbar{display:none}.hm-card{position:relative;scroll-snap-align:center;flex:0 0 auto;aspect-ratio:16/9;border-radius:12px;overflow:hidden;background:#f3f4f6}.hm-card[data-ratio='1:1']{aspect-ratio:1/1}.hm-card[data-ratio='4:3']{aspect-ratio:4/3}.hm-img{position:absolute;inset:0;background:#ddd center/cover no-repeat;transition:transform .25s}.hm-card:hover .hm-img{transform:scale(1.02)}.hm-badge{position:absolute;top:8px;left:8px;padding:4px 8px;border-radius:999px;font-size:12px;color:#fff;background:#ef4444}.hm-grad{position:absolute;inset:auto 0 0 0;height:48%;background:linear-gradient(to top,rgba(0,0,0,.55),rgba(0,0,0,0))}.hm-ttl{position:absolute;left:10px;bottom:10px;right:10px;color:#fff;font-weight:700;text-shadow:0 2px 6px rgba(0,0,0,.5)}.hm-nav{display:flex;gap:6px}.hm-btn{border:1px solid var(--frame,#e5e7eb);background:var(--card,#fff);border-radius:10px;padding:6px 10px;cursor:pointer}</style><div id='home-root'></div><script>(async function(){const ROOT=document.getElementById('home-root');const esc=s=>String(s||'').replace(/[&<>\\\"']/g,m=>({\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",\"\\\"\":\"&quot;\",\"'\":\"&#39;\"}[m]));const inDate=iso=>!iso||(new Date(iso).getTime()>Date.now());let data={sections:[]};try{data=await fetch('/home.json',{cache:'no-store'}).then(r=>r.json());console.log('[home] json yuklandi',data);}catch(e){ROOT.innerHTML='<div class=\\\"hm-sec\\\"><div class=\\\"hm-title\\\">home.json topilmadi</div><div class=\\\"subtitle\\\">/home.json joylang</div></div>';return;}const timers=[];(data.sections||[]).forEach((sec,si)=>{const wrap=document.createElement('section');wrap.className='hm-sec';wrap.innerHTML='<div class=\\\"hm-head\\\"><div class=\\\"hm-title\\\">'+esc(sec.title||'Bo\\'lim')+'</div><div class=\\\"hm-nav\\\"><button class=\\\"hm-btn\\\" data-prev>◀</button><button class=\\\"hm-btn\\\" data-next>▶</button></div></div><div class=\\\"hm-rail\\\" id=\\\"rail-'+si+'\\\"></div>';ROOT.appendChild(wrap);const rail=wrap.querySelector('#rail-'+si);const items=(sec.items||[]).filter(it=>inDate(it.until));if(items.length===0){rail.innerHTML='<div class=\\\"subtitle\\\" style=\\\"padding:6px 2px\\\">Banner yo\\'q</div>';return;}items.forEach(it=>{const a=document.createElement('a');a.className='hm-card';a.dataset.ratio=sec.ratio||'16:9';a.href=it.link||'#';a.target=(it.link&&it.link.startsWith('http'))?'_blank':'_self';a.rel='noopener';const img=document.createElement('div');img.className='hm-img';img.style.backgroundImage='url(\\''+esc(it.img)+'\\')';a.appendChild(img);if(it.badge){const b=document.createElement('div');b.className='hm-badge';b.style.background=it.badgeColor||'#ef4444';b.textContent=it.badge;a.appendChild(b);}const g=document.createElement('div');g.className='hm-grad';a.appendChild(g);const t=document.createElement('div');t.className='hm-ttl';t.innerHTML=esc(it.title||'');if(it.subtitle)t.innerHTML+='\\n<div style=\\\"font-weight:500;opacity:.9\\\">'+esc(it.subtitle)+'</div>';a.appendChild(t);rail.appendChild(a);});const prev=wrap.querySelector('[data-prev]');const next=wrap.querySelector('[data-next]');const cards=Array.from(rail.children);let idx=0;const go=i=>{idx=(i+cards.length)%cards.length;cards[idx].scrollIntoView({behavior:'smooth',inline:'center',block:'nearest'});};prev.onclick=()=>go(idx-1);next.onclick=()=>go(idx+1);const itv=Number(sec.autoplayMs||0);if(itv>0&&cards.length>1){const t=setInterval(()=>go(idx+1),itv);timers.push(t);rail.addEventListener('mouseenter',()=>clearInterval(t));rail.addEventListener('touchstart',()=>clearInterval(t),{passive:true});}});window.addEventListener('beforeunload',()=>timers.forEach(t=>clearInterval(t)));})();</script>"
    },
    {
      "id": "js-demo",
      "title": "JS test",
      "icon": "./icons/code.svg",
      "html": "<div style='display:flex;align-items:center;gap:10px'><div id='demo-count' style='font-weight:800'>Hisob: 0</div><button id='demo-btn' class='btn'>+1</button></div><p class='subtitle'>Konsolda ham yozuv chiqadi.</p><script>(function(){let n=0;const t=document.getElementById('demo-count');const b=document.getElementById('demo-btn');function upd(){t.textContent='Hisob: '+n;}upd();b.onclick=function(){n++;console.log('[js-demo] count =',n);upd();};console.log('[js-demo] chip script ishladi');})();</script>"
    },
    {
      "id": "about",
      "title": "Haqida",
      "icon": "./icons/info.svg",
      "html": "<h2>Platforma haqida</h2><p>Dynamic Chips: JSON orqali bosqariladigan bo\\'limlar, ichki <code>&lt;script&gt;</code> lar avtomatik ishga tushadi.</p><script>console.log('[about] chip script ishladi');</script>"
    }
  ]
}
