<!doctype html>
<html lang="uz" data-theme="light">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>LeaderMath â€” Bannerlar</title>
  <meta name="theme-color" content="#2E8B57"/>
  <link rel="icon" href="./logo.png"/>

  <style>
    :root{
      --brand:#2E8B57;--brand2:#1F6B45;--bg:#F6FBF8;--text:#0d1b14;--muted:#557767;
      --radius:18px;--shadow:0 10px 30px rgba(0,0,0,.1);
    }
    [data-theme="dark"]{
      --bg:#0E1512;--text:#E7F5EC;--muted:#A1C3B4;--shadow:0 10px 30px rgba(0,0,0,.4);
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      background:var(--bg);color:var(--text);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      overflow-x:hidden;
    }

    header{
      position:sticky;top:0;z-index:100;
      display:flex;align-items:center;justify-content:space-between;
      padding:14px 22px;background:rgba(255,255,255,.65);
      backdrop-filter:blur(10px);
      border-bottom:1px solid rgba(0,0,0,.05);
    }
    header .brand{display:flex;align-items:center;gap:10px;font-weight:800;font-size:20px}
    header img{width:28px;height:28px}
    header button{
      border:0;background:var(--brand);color:#fff;
      padding:8px 12px;border-radius:12px;cursor:pointer;font-weight:700;
    }

    .section{
      margin:40px auto;max-width:1200px;padding:0 20px;
    }
    .section h2{
      font-size:26px;font-weight:900;margin-bottom:18px;
      background:linear-gradient(90deg,var(--brand),var(--brand2));
      -webkit-background-clip:text;color:transparent;
    }

    /* Carousel container */
    .carousel{
      position:relative;overflow:hidden;border-radius:var(--radius);box-shadow:var(--shadow);
    }
    .carousel-track{
      display:flex;transition:transform .5s ease;
    }
    .banner{
      min-width:100%;height:400px;
      position:relative;overflow:hidden;
    }
    iframe{
      width:100%;height:100%;border:0;display:block;
    }
    .arrow{
      position:absolute;top:50%;transform:translateY(-50%);
      width:46px;height:46px;display:grid;place-items:center;
      border-radius:50%;border:none;
      background:rgba(0,0,0,.4);color:#fff;
      cursor:pointer;font-size:26px;z-index:10;
      transition:.3s;
    }
    .arrow:hover{background:rgba(0,0,0,.6)}
    .arrow.prev{left:15px}
    .arrow.next{right:15px}
    @media (max-width:720px){
      .banner{height:280px}
      header{padding:10px 14px}
      .section h2{font-size:22px}
    }
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <img src="./logo.png" alt="LM">
      <span>LeaderMath.<span style="color:var(--brand2)">UZ</span></span>
    </div>
    <button id="themeToggle">ðŸŒž Kun/Tun</button>
  </header>

  <main id="main"></main>

  <script>
    const themeBtn=document.getElementById('themeToggle');
    themeBtn.onclick=()=>{
      const t=document.documentElement.getAttribute('data-theme')==='dark'?'light':'dark';
      document.documentElement.setAttribute('data-theme',t);
      themeBtn.textContent=t==='dark'?'ðŸŒ™ Tun':'ðŸŒž Kun';
      localStorage.setItem('theme',t);
    };
    const saved=localStorage.getItem('theme');if(saved)document.documentElement.setAttribute('data-theme',saved);

    // Banner generator
    function makeSection(sec){
      const section=document.createElement('div');
      section.className='section';
      section.innerHTML=`<h2>${sec.icon||'ðŸ“¢'} ${sec.title}</h2>`;

      const carousel=document.createElement('div');
      carousel.className='carousel';
      const track=document.createElement('div');
      track.className='carousel-track';

      sec.banners.forEach(b=>{
        const frame=document.createElement('iframe');
        frame.srcdoc=b.html;
        const banner=document.createElement('div');
        banner.className='banner';
        banner.appendChild(frame);
        track.appendChild(banner);
      });

      const prev=document.createElement('button');
      prev.className='arrow prev'; prev.textContent='â€¹';
      const next=document.createElement('button');
      next.className='arrow next'; next.textContent='â€º';

      let idx=0;
      function update(){
        track.style.transform=`translateX(-${idx*100}%)`;
      }
      prev.onclick=()=>{idx=(idx-1+sec.banners.length)%sec.banners.length;update()};
      next.onclick=()=>{idx=(idx+1)%sec.banners.length;update()};

      carousel.appendChild(track);
      if(sec.banners.length>1){carousel.appendChild(prev);carousel.appendChild(next);}
      section.appendChild(carousel);
      return section;
    }

    async function loadBanners(){
      try{
        const res=await fetch('./banner.json');
        const data=await res.json();
        const main=document.getElementById('main');
        data.sections.forEach(sec=>main.appendChild(makeSection(sec)));
      }catch(e){
        console.error(e);
        document.getElementById('main').innerHTML='<p style="text-align:center;margin-top:50px">banner.json yuklanmadi</p>';
      }
    }
    loadBanners();
  </script>
</body>
</html>
