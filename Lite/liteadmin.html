<!doctype html>
<html lang="uz">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>MathCenter — Lite Admin</title>
  <meta name="color-scheme" content="light"/>
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
  <style>
:root{--green:#2E8B57;--green-700:#1F6B45;--bg:#f7faf8;--text:#1a1f1c;--muted:#6b7280;--card:#fff;--shadow:0 8px 24px rgba(0,0,0,.08);--radius:18px}
*{box-sizing:border-box} html,body{margin:0;height:100%;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--text)}
.container{max-width:1100px;margin:0 auto;padding:16px}
.card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow)}
.btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:12px;background:var(--green);color:#fff;border:0;cursor:pointer;font-weight:600}
.btn.ghost{background:#e9f5ef;color:var(--green)}
header.nav{position:sticky;top:0;z-index:10;background:#fff;border-bottom:1px solid #eee}
.brand{display:flex;align-items:center;gap:10px;font-weight:800;color:var(--green)}
.brand .pi{width:28px;height:28px;border-radius:8px;background:linear-gradient(135deg,var(--green),var(--green-700));display:grid;place-items:center;color:#fff;box-shadow:var(--shadow)}
.stack{display:flex;align-items:center;gap:10px}.spacer{flex:1}
label{font-size:13px;color:var(--muted)}
input,select,textarea{width:100%;padding:12px 14px;border:1px solid #e5e7eb;border-radius:12px;background:#fff;outline:0}
.hint{font-size:12px;color:var(--muted)}
.avatar{width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,#d1fae5,#a7f3d0);display:grid;place-items:center;font-weight:700;color:var(--green-700);overflow:hidden}
.table{width:100%;border-collapse:separate;border-spacing:0 10px}
.table th,.table td{text-align:left;padding:10px 12px;vertical-align:middle;background:#fff}
.table tr td:first-child,.table tr th:first-child{border-top-left-radius:12px;border-bottom-left-radius:12px}
.table tr td:last-child,.table tr th:last-child{border-top-right-radius:12px;border-bottom-right-radius:12px}

  .tabs{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
  .tab{padding:10px 12px;border-radius:10px;background:#fff;border:1px solid #e5e7eb;cursor:pointer}
  .tab.active{background:#e9f5ef;border-color:#b7e2c7;color:var(--green)}
  .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:16px}
  .col-6{grid-column:span 6} .col-4{grid-column:span 4} .col-3{grid-column:span 3} .col-8{grid-column:span 8} .col-12{grid-column:span 12}
  @media (max-width:900px){ .grid{grid-template-columns:repeat(6,1fr)} .col-6,.col-8,.col-4,.col-3{grid-column:span 6} }
  .avatarPreview{width:64px;height:64px;border-radius:50%;overflow:hidden;background:#eef6f0;display:grid;place-items:center}
  </style>
</head>
<body>
<header class="nav">
  <div class="container stack">
    <div class="brand"><div class="pi">π</div><div>Lite Admin</div></div>
    <div class="spacer"></div>
    <button class="btn ghost" onclick="location.href='liteindex.html'">Foydalanuvchi tomon</button>
    <button class="btn" id="btnExport">liteadmin.json ni yuklab olish</button>
  </div>
</header>

<main class="container" style="display:grid;gap:16px;margin-top:16px">
  <div class="tabs">
    <button class="tab active" data-tab="users">Foydalanuvchilar</button>
    <button class="tab" data-tab="banners">Bannerlar</button>
    <button class="tab" data-tab="cards">Cardlar</button>
    <button class="tab" data-tab="import">Excel/CSV import</button>
    <button class="tab" data-tab="patch">Profil yangilash importi</button>
    <button class="tab" data-tab="results">Ballar (ball.json)</button>
    <span class="spacer"></span>
    <span id="status" class="btn ghost">Yuklanmoqda…</span>
  </div>

  <!-- USERS -->
  <section id="users" class="card">
    <h3>Foydalanuvchilar</h3>
    <div class="grid">
      <div class="col-6"><label>Login</label><input id="u_login" placeholder="student1"></div>
      <div class="col-6"><label>Parol</label><input id="u_password" placeholder="1234"></div>
      <div class="col-4"><label>Ism</label><input id="u_name" placeholder="Ali"></div>
      <div class="col-4"><label>Familiya</label><input id="u_surname" placeholder="Valiyev"></div>
      <div class="col-4"><label>Sinf</label><input id="u_class" placeholder="10A"></div>
      <div class="col-6"><label>Ball (qo'lda)</label><input id="u_points" type="number" value="0"></div>
      <div class="col-6">
        <label>Avatar rasm</label>
        <input id="u_avatar" type="file" accept="image/*">
        <div class="avatarPreview" id="u_preview"><span style="color:var(--green)">IMG</span></div>
      </div>
      <div class="col-6" style="display:flex;align-items:end;gap:8px">
        <button class="btn" id="addUser">Qo'shish</button>
        <button class="btn ghost" id="resetUserForm">Tozalash</button>
      </div>
    </div>
    <div style="margin-top:12px;overflow:auto">
      <table class="table">
        <thead><tr><th>Avatar</th><th>Login</th><th>Ism</th><th>Familiya</th><th>Sinf</th><th>Ball</th><th>Amal</th></tr></thead>
        <tbody id="usersT"></tbody>
      </table>
    </div>
  </section>

  <!-- BANNERS -->
  <section id="banners" class="card" style="display:none">
    <h3>Bannerlar</h3>
    <div class="grid">
      <div class="col-6"><label>Sarlavha</label><input id="b_title"></div>
      <div class="col-6"><label>Qisqa matn</label><input id="b_subtitle"></div>
      <div class="col-6"><label>Rasm URL</label><input id="b_image" placeholder="https://..."></div>
      <div class="col-6"><label>Link</label><input id="b_link" placeholder="#"></div>
      <div class="col-6"><label>Faolmi?</label>
        <select id="b_active"><option value="true">Ha</option><option value="false">Yo'q</option></select>
      </div>
      <div class="col-6" style="display:flex;align-items:end;gap:8px">
        <button class="btn" id="addBanner">Qo'shish</button>
        <button class="btn ghost" id="resetBanner">Tozalash</button>
      </div>
    </div>
    <div style="margin-top:12px;overflow:auto">
      <table class="table">
        <thead><tr><th>Rasm</th><th>Sarlavha</th><th>Matn</th><th>Faol</th><th>Amal</th></tr></thead>
        <tbody id="bannersT"></tbody>
      </table>
    </div>
  </section>

  <!-- CARDS -->
  <section id="cards" class="card" style="display:none">
    <h3>Cardlar</h3>
    <div class="grid">
      <div class="col-4"><label>Turi</label>
        <select id="c_kind"><option value="test">test</option><option value="kurs">kurs</option><option value="sim">sim</option></select>
      </div>
      <div class="col-8"><label>Sarlavha</label><input id="c_title" placeholder="Algebra — Boshlang'ich"></div>
      <div class="col-4"><label>Asosiy teg</label><input id="c_main" placeholder="Testlar"></div>
      <div class="col-8"><label>Teglar (vergul bilan)</label><input id="c_tags" placeholder="test,algebra,easy"></div>
      <div class="col-6"><label>Rasm URL</label><input id="c_image" placeholder="https://..."></div>
      <div class="col-6"><label>Link</label><input id="c_link" placeholder="test.html?id=t1"></div>
      <div class="col-6"><label>Faolmi?</label><select id="c_active"><option value="true">Ha</option><option value="false">Yo'q</option></select></div>
      <div class="col-12" style="display:flex;gap:8px">
        <button class="btn" id="addCard">Qo'shish</button>
        <button class="btn ghost" id="resetCard">Tozalash</button>
      </div>
    </div>
    <div style="margin-top:12px;overflow:auto">
      <table class="table">
        <thead><tr><th>Rasm</th><th>Sarlavha</th><th>Turi</th><th>Asosiy teg</th><th>Teglar</th><th>Faol</th><th>Amal</th></tr></thead>
        <tbody id="cardsT"></tbody>
      </table>
    </div>
  </section>

  <!-- IMPORT -->
  <section id="import" class="card" style="display:none">
    <h3>Excel/CSV import</h3>
    <p class="hint">Ustunlar: <b>login, password, name, surname, class, points</b>. Avatar yo'qligida bo'sh qoldiring.</p>
    <input id="fileInput" type="file" accept=".xlsx,.xls,.csv"/>
    <div id="importStatus" class="hint" style="margin-top:10px">Fayl tanlanmagan</div>
  </section>

  <!-- PATCH (profile_update_*.json) -->
  <section id="patch" class="card" style="display:none">
    <h3>Profil yangilash faylini import qilish</h3>
    <p class="hint">Foydalanuvchi <i>liteindex.html</i> dan yuklab olgan <code>profile_update_LOGIN.json</code> faylini tanlang.</p>
    <input id="patchFile" type="file" accept=".json"/>
    <div id="patchStatus" class="hint" style="margin-top:10px">Fayl tanlanmagan</div>
  </section>

  <!-- RESULTS (ball.json) viewer -->
  <section id="results" class="card" style="display:none">
    <h3>Ballar — ball.json</h3>
    <div style="display:flex;gap:8px;align-items:center;margin-bottom:8px">
      <button class="btn ghost" id="refreshBall">Yangilash</button>
      <div class="hint" id="ballHint"></div>
    </div>
    <table class="table">
      <thead><tr><th>Login</th><th>Test</th><th>Ball</th><th>Maksimum</th><th>Vaqt</th></tr></thead>
      <tbody id="ballT"></tbody>
    </table>
  </section>
</main>

<script>
const $ = s=>document.querySelector(s);
const state = { db:null };

function ensureAdmin(){ const me = JSON.parse(localStorage.getItem('lite.me')||'null'); if(!(me && me.role==='admin')){ alert('Admin sifatida kiring (Math@1999 / Math@28021999).'); location.href='liteindex.html'; } }
async function loadDB(){ const res = await fetch('liteadmin.json?_=' + Date.now()); state.db = await res.json(); document.getElementById('status').textContent='Yuklandi'; renderTables(); }
function uid(p){ return p+Math.random().toString(36).slice(2,8); }

function renderTables(){
  const ut = document.getElementById('usersT'); ut.innerHTML='';
  (state.db.users||[]).forEach((u,idx)=>{
    const tr = document.createElement('tr');
    tr.innerHTML = `<td><div class="avatar" style="width:36px;height:36px;overflow:hidden">${u.avatar?`<img src="${u.avatar}" style="width:100%;height:100%;object-fit:cover">`:'<span>U</span>'}</div></td>
      <td>${u.login}</td><td>${u.name}</td><td>${u.surname}</td><td>${u.class}</td><td>${u.points||0}</td>
      <td style="display:flex;gap:8px"><button class="btn ghost" onclick="editUser(${idx})">Edit</button><button class="btn" onclick="delUser(${idx})">Del</button></td>`;
    ut.appendChild(tr);
  });
  const bt = document.getElementById('bannersT'); if(bt){ bt.innerHTML=''; (state.db.banners||[]).forEach((b,idx)=>{ const tr=document.createElement('tr');
    tr.innerHTML = `<td><img src="${b.image}" style="width:120px;height:54px;object-fit:cover;border-radius:8px"></td><td>${b.title}</td><td>${b.subtitle||''}</td><td>${b.active?'Ha':'Yo\'q'}</td>
    <td style="display:flex;gap:8px"><button class="btn ghost" onclick="editBanner(${idx})">Edit</button><button class="btn" onclick="delBanner(${idx})">Del</button></td>`; bt.appendChild(tr); }); }
  const ct = document.getElementById('cardsT'); if(ct){ ct.innerHTML=''; (state.db.cards||[]).forEach((c,idx)=>{ const tr=document.createElement('tr');
    tr.innerHTML = `<td><img src="${c.image}" style="width:120px;height:80px;object-fit:cover;border-radius:8px"></td><td>${c.title}</td><td>${c.kind}</td><td>${c.main||''}</td><td>${(c.tags||[]).join(', ')}</td><td>${c.active?'Ha':'Yo\'q'}</td>
    <td style="display:flex;gap:8px"><button class="btn ghost" onclick="editCard(${idx})">Edit</button><button class="btn" onclick="delCard(${idx})">Del</button></td>`; ct.appendChild(tr); }); }
}

document.getElementById('u_avatar').addEventListener('change', async (e)=>{ const f=e.target.files[0]; if(!f) return; const r=new FileReader(); r.onload=()=>{ document.getElementById('u_preview').innerHTML = `<img src="${r.result}" style="width:100%;height:100%;object-fit:cover">`; }; r.readAsDataURL(f); });

document.getElementById('addUser').onclick = async ()=>{
  const getDataURL = f=>new Promise((res,rej)=>{const r=new FileReader(); r.onload=()=>res(r.result); r.onerror=rej; r.readAsDataURL(f);});
  const u = {
    login: document.getElementById('u_login').value.trim(),
    password: document.getElementById('u_password').value.trim(),
    name: document.getElementById('u_name').value.trim(),
    surname: document.getElementById('u_surname').value.trim(),
    class: document.getElementById('u_class').value.trim(),
    points: Number(document.getElementById('u_points').value||0),
    avatar: ''
  };
  if(!u.login || !u.password || !u.name) return alert('Login, parol va ism majburiy.');
  const f = document.getElementById('u_avatar').files[0];
  if(f) u.avatar = await getDataURL(f);
  (state.db.users ||= []).push(u); renderTables(); resetUserForm();
};
document.getElementById('resetUserForm').onclick = resetUserForm;
function resetUserForm(){ ['u_login','u_password','u_name','u_surname','u_class','u_points'].forEach(id=>document.getElementById(id).value=''); document.getElementById('u_points').value=0; document.getElementById('u_avatar').value=''; document.getElementById('u_preview').innerHTML='<span style="color:var(--green)">IMG</span>'; }
window.editUser = idx =>{
  const u = state.db.users[idx];
  document.getElementById('u_login').value=u.login; document.getElementById('u_password').value=u.password; document.getElementById('u_name').value=u.name; document.getElementById('u_surname').value=u.surname; document.getElementById('u_class').value=u.class; document.getElementById('u_points').value=u.points||0;
  document.getElementById('u_preview').innerHTML = u.avatar?`<img src="${u.avatar}" style="width:100%;height:100%;object-fit:cover">`:'<span style="color:var(--green)">IMG</span>';
  document.getElementById('addUser').onclick = async ()=>{
    const getDataURL = f=>new Promise((res,rej)=>{const r=new FileReader(); r.onload=()=>res(r.result); r.onerror=rej; r.readAsDataURL(f);});
    const nu = {
      login: document.getElementById('u_login').value.trim(),
      password: document.getElementById('u_password').value.trim(),
      name: document.getElementById('u_name').value.trim(),
      surname: document.getElementById('u_surname').value.trim(),
      class: document.getElementById('u_class').value.trim(),
      points: Number(document.getElementById('u_points').value||0),
      avatar: u.avatar
    };
    const f = document.getElementById('u_avatar').files[0];
    if(f) nu.avatar = await getDataURL(f);
    state.db.users[idx]=nu; renderTables(); resetUserForm();
    document.getElementById('addUser').onclick = async ()=>{
      const f2 = document.getElementById('u_avatar').files[0]; let av=''; if(f2) av = await getDataURL(f2);
      const u2 = {login: document.getElementById('u_login').value.trim(), password: document.getElementById('u_password').value.trim(), name: document.getElementById('u_name').value.trim(), surname: document.getElementById('u_surname').value.trim(), class: document.getElementById('u_class').value.trim(), points: Number(document.getElementById('u_points').value||0), avatar: av };
      if(!u2.login || !u2.password || !u2.name) return alert('Majburiy maydonlar to\'ldirilmagan.');
      (state.db.users ||= []).push(u2); renderTables(); resetUserForm();
    };
  };
};
window.delUser = idx =>{ if(confirm('O‘chirish?')){ state.db.users.splice(idx,1); renderTables(); } };

// BANNERS
document.getElementById('addBanner').onclick = ()=>{ const b = { id: uid('b_'), title: document.getElementById('b_title').value.trim(), subtitle: document.getElementById('b_subtitle').value.trim(), image: document.getElementById('b_image').value.trim(), link: document.getElementById('b_link').value.trim()||'#', active: document.getElementById('b_active').value==='true' }; if(!b.title||!b.image) return alert('Sarlavha va rasm majburiy.'); (state.db.banners ||= []).push(b); renderTables(); resetBanner(); };
document.getElementById('resetBanner').onclick = resetBanner;
function resetBanner(){ ['b_title','b_subtitle','b_image','b_link'].forEach(id=>document.getElementById(id).value=''); document.getElementById('b_active').value='true'; }
window.editBanner = idx => { const b=state.db.banners[idx]; document.getElementById('b_title').value=b.title; document.getElementById('b_subtitle').value=b.subtitle||''; document.getElementById('b_image').value=b.image; document.getElementById('b_link').value=b.link||'#'; document.getElementById('b_active').value=b.active?'true':'false';
  document.getElementById('addBanner').onclick = ()=>{ state.db.banners[idx] = {id:b.id, title: document.getElementById('b_title').value.trim(), subtitle: document.getElementById('b_subtitle').value.trim(), image: document.getElementById('b_image').value.trim(), link: document.getElementById('b_link').value.trim()||'#', active: document.getElementById('b_active').value==='true'}; renderTables(); resetBanner();
  document.getElementById('addBanner').onclick = ()=>{ const nb = { id: uid('b_'), title: document.getElementById('b_title').value.trim(), subtitle: document.getElementById('b_subtitle').value.trim(), image: document.getElementById('b_image').value.trim(), link: document.getElementById('b_link').value.trim()||'#', active: document.getElementById('b_active').value==='true'}; if(!nb.title||!nb.image) return alert('Sarlavha va rasm majburiy.'); (state.db.banners ||= []).push(nb); renderTables(); resetBanner(); }; };
};
window.delBanner = idx => { if(confirm('O‘chirish?')){ state.db.banners.splice(idx,1); renderTables(); } };

// CARDS
document.getElementById('addCard').onclick = ()=>{ const c = { id: uid('c_'), kind: document.getElementById('c_kind').value, title: document.getElementById('c_title').value.trim(), main: document.getElementById('c_main').value.trim(), image: document.getElementById('c_image').value.trim(), link: document.getElementById('c_link').value.trim()||'#', tags: document.getElementById('c_tags').value.split(',').map(s=>s.trim()).filter(Boolean), active: document.getElementById('c_active').value==='true' }; if(!c.title||!c.image) return alert('Sarlavha va rasm majburiy.'); (state.db.cards ||= []).push(c); renderTables(); resetCard(); };
document.getElementById('resetCard').onclick = resetCard;
function resetCard(){ ['c_title','c_image','c_link','c_tags','c_main'].forEach(id=>document.getElementById(id).value=''); document.getElementById('c_active').value='true'; document.getElementById('c_kind').value='test'; }
window.editCard = idx => { const c=state.db.cards[idx]; document.getElementById('c_kind').value=c.kind; document.getElementById('c_title').value=c.title; document.getElementById('c_main').value=c.main||''; document.getElementById('c_image').value=c.image; document.getElementById('c_link').value=c.link||'#'; document.getElementById('c_tags').value=(c.tags||[]).join(', '); document.getElementById('c_active').value=c.active?'true':'false';
  document.getElementById('addCard').onclick = ()=>{ state.db.cards[idx] = { id:c.id, kind: document.getElementById('c_kind').value, title: document.getElementById('c_title').value.trim(), main: document.getElementById('c_main').value.trim(), image: document.getElementById('c_image').value.trim(), link: document.getElementById('c_link').value.trim()||'#', tags: document.getElementById('c_tags').value.split(',').map(s=>s.trim()).filter(Boolean), active: document.getElementById('c_active').value==='true' }; renderTables(); resetCard();
  document.getElementById('addCard').onclick = ()=>{ const nc = { id: uid('c_'), kind: document.getElementById('c_kind').value, title: document.getElementById('c_title').value.trim(), main: document.getElementById('c_main').value.trim(), image: document.getElementById('c_image').value.trim(), link: document.getElementById('c_link').value.trim()||'#', tags: document.getElementById('c_tags').value.split(',').map(s=>s.trim()).filter(Boolean), active: document.getElementById('c_active').value==='true' }; if(!nc.title||!nc.image) return alert('Sarlavha va rasm majburiy.'); (state.db.cards ||= []).push(nc); renderTables(); resetCard(); }; };
};
window.delCard = idx => { if(confirm('O‘chirish?')){ state.db.cards.splice(idx,1); renderTables(); } };

// Tabs
document.querySelectorAll('.tab').forEach(t=>t.onclick=()=>{ document.querySelectorAll('.tab').forEach(x=>x.classList.remove('active')); t.classList.add('active'); ['users','banners','cards','import','patch','results'].forEach(id=>document.getElementById(id).style.display='none'); document.getElementById(t.dataset.tab).style.display='block'; });

// Export JSON
document.getElementById('btnExport').onclick = ()=>{ const blob = new Blob([JSON.stringify(state.db,null,2)],{type:'application/json'}); const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'liteadmin.json'; a.click(); URL.revokeObjectURL(a.href); };

// Import Excel/CSV (same as your previous version)
document.getElementById('fileInput').addEventListener('change', async (e)=>{
  const f = e.target.files[0];
  if(!f){ document.getElementById('importStatus').textContent='Fayl tanlanmagan'; return; }
  try{
    let rows=[];
    if(f.name.toLowerCase().endsWith('.csv')){
      const text = await f.text();
      rows = text.split(/\r?\n/).map(r=>r.split(','));
    }else{
      const data = await f.arrayBuffer();
      const wb = XLSX.read(data, {type:'array'});
      const ws = wb.Sheets[wb.SheetNames[0]];
      rows = XLSX.utils.sheet_to_json(ws, {header:1});
    }
    let start = 0;
    const lower = s=>String(s||'').toLowerCase();
    if(rows.length && ['login','password','name','surname','class','points'].every(h => rows[0].map(lower).includes(h))){
      start = 1;
    }
    for(let i=start;i<rows.length;i++){
      const [login,password,name,surname,klass,points] = rows[i];
      if(!login || !password || !name) continue;
      (state.db.users ||= []).push({
        login:String(login).trim(),
        password:String(password).trim(),
        name:String(name).trim(),
        surname:String(surname||'').trim(),
        class:String(klass||'').trim(),
        points:Number(points||0),
        avatar:''
      });
    }
    document.getElementById('importStatus').textContent = 'Import bajarildi';
    renderTables();
  }catch(err){
    document.getElementById('importStatus').textContent = 'Xatolik: '+err.message;
  }
});

// Patch import
document.getElementById('patchFile').addEventListener('change', async (e)=>{
  const f = e.target.files[0]; if(!f) return document.getElementById('patchStatus').textContent='Fayl tanlanmagan';
  try{
    const text = await f.text();
    const patch = JSON.parse(text);
    if(patch.type!=='profile_patch') throw new Error('Bu profil patch fayli emas');
    const u = (state.db.users||[]).find(x=>x.login===patch.login);
    if(!u) throw new Error('Login topilmadi: '+patch.login);
    Object.assign(u, Object.fromEntries(Object.entries(patch.changes).filter(([k,v])=>v!==undefined && v!=='')));
    renderTables();
    document.getElementById('patchStatus').textContent = 'Import qilindi va jadvalga qo‘llandi';
  }catch(err){
    document.getElementById('patchStatus').textContent = 'Xatolik: '+err.message;
  }
});

// Results viewer (ball.json)
async function refreshBall(){
  try{
    const res = await fetch('ball.json?_=' + Date.now()); const data = await res.json();
    const tb = document.getElementById('ballT'); tb.innerHTML='';
    (data.results||[]).forEach(r=>{
      const tr = document.createElement('tr');
      tr.innerHTML = `<td>${r.login}</td><td>${r.testId}</td><td>${r.score}</td><td>${r.maxScore}</td><td>${r.when}</td>`;
      tb.appendChild(tr);
    });
    document.getElementById('ballHint').textContent = (data.results||[]).length + ' ta natija';
  }catch(e){
    document.getElementById('ballHint').textContent = 'ball.json yuklanmadi';
  }
}
document.getElementById('refreshBall').onclick = refreshBall;

ensureAdmin();
loadDB();
refreshBall();
</script>
</body>
</html>
