:root{
  --brand:#2E8B57; --brand2:#1F6B45; --bg:#f6faf8; --text:#0f172a;
  --muted:#667a72; --frame:#e3efe8;
}

*{ box-sizing:border-box }

body{
  margin:0; background:var(--bg); color:var(--text);
  font:16px/1.5 Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial
}

/* Header */
header{
  position:sticky; top:0; background:#fff;
  border-bottom:1px solid var(--frame); z-index:10
}
.wrap{ max-width:960px; margin:0 auto; padding:14px }
.row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap }

/* UI bits */
.chip{
  border:1px solid #d8e9df; background:#f4fbf7;
  padding:6px 10px; border-radius:999px
}
.chip.good{ background:#e8f5ee; border-color:#c7ead6; color:#0f5132 }
.chip.warn{ background:#fff4e5; border-color:#ffe0b2; color:#8a4b03 }
.chip.bad{  background:#fdecea; border-color:#f5c2c7; color:#842029 }

.btn{
  padding:10px 14px; border-radius:12px; border:1px solid var(--brand);
  background:linear-gradient(135deg,var(--brand),var(--brand2));
  color:#fff; cursor:pointer; font-weight:700; text-decoration:none; display:inline-block
}
.btn.ghost{ background:#fff; color:var(--brand) }

.card{
  background:#fff; border:1px solid var(--frame); border-radius:16px;
  padding:16px; margin:16px 0
}

/* Options */
.opt{
  display:flex; gap:10px; align-items:flex-start; padding:10px 12px;
  border:1px solid #edf3ee; border-radius:12px; background:#fbfdfc; margin:8px 0;
  transition: box-shadow .2s ease, background .2s ease, border-color .2s ease;
}
.opt:hover{
  border-color:var(--brand); box-shadow:0 0 0 4px rgba(46,139,87,.15); background:#fff
}

/* Navigation dots */
.navdots{ display:flex; flex-wrap:wrap; gap:8px; margin-top:8px }
.dot{
  min-width:36px; height:36px; border-radius:10px; border:1px solid var(--frame);
  display:grid; place-items:center; background:#fff; cursor:pointer; padding:0 10px
}
.dot.active{ border-color:var(--brand); box-shadow:0 0 0 3px rgba(46,139,87,.15) }
.dot.answered{ background:#1F6B45; color:#fff; border-color:#0f3c28 }

/* Question image */
#qImage{
  width:min(860px,100%); max-height:80vh; display:block; margin:10px auto;
  border-radius:12px; border:1px solid #edf3ee
}

/* Stats */
.stats-grid{ display:grid; grid-template-columns:repeat(auto-fit,minmax(180px,1fr)); gap:10px }
.stat{ border:1px solid var(--frame); border-radius:12px; padding:10px }

/* Detail table */
.tbl{ width:100%; border-collapse:separate; border-spacing:0 8px }
.tbl th{ font-weight:700; text-align:left; color:#64748b; font-size:14px }
.tbl td,.tbl th{ padding:8px 10px; background:#fff }

.hidden{ display:none!important }

@media print{ body{ display:none } }
/* Open-answer input */
.open-wrap{ display:grid; gap:8px; margin:8px 0 }
.open-input{
  width:100%; padding:10px 12px; border:1px solid #dfeae3; border-radius:10px; background:#fff;
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
}
.keypad-toggle{ margin-top:6px }

/* Drawer keypad */
.drawer{position:fixed;left:0;right:0;bottom:0;transform:translateY(100%);transition:transform .25s ease;
  background:#fffffff2; backdrop-filter:saturate(1.2) blur(6px); border-top:1px solid #e7efe9;
  box-shadow:0 -10px 24px rgba(31,107,69,.12); padding:12px 14px; z-index:9999}
.drawer.open{transform:translateY(0%)}
.drawer .rowbar{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
.kgrid{display:grid;grid-template-columns:repeat(auto-fit,minmax(72px,1fr));gap:8px}
.kbtn{appearance:none;cursor:pointer;padding:8px 10px;border:1px solid #dfeae3;background:#fff;border-radius:10px;
  display:flex;align-items:center;justify-content:center;min-height:44px;transition:box-shadow .15s,border-color .15s,background .15s}
.kbtn:hover{border-color:#b9dfc8;box-shadow:0 0 0 4px rgba(46,139,87,.18);background:#fff}
.pin{display:flex;align-items:center;gap:8px}
.pin input{transform:translateY(1px)}
.drawer .title{font-weight:700}
.open-preview mjx-container { font-size: 1.05em; }
.open-input { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; }
