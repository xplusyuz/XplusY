<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Admin ‚Ä¢ Home (Lite)</title>
<style>
  :root{--g:#16a34a;--t:#111}
  *{box-sizing:border-box} body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial,sans-serif;background:#f6f9f7;color:var(--t)}
  .wrap{max-width:1040px;margin:auto;padding:16px}
  .card{background:#fff;border:1px solid #e5e7eb;border-radius:16px;box-shadow:0 6px 18px rgba(0,0,0,.05)}
  .btn{display:inline-block;padding:10px 14px;border-radius:12px;border:1px solid #e5e7eb;background:#fff;font-weight:600;cursor:pointer}
  .btn:active{transform:translateY(1px)}
  .btn.p{background:var(--g);border-color:var(--g);color:#fff}
  .input{width:100%;padding:10px 12px;border:1px solid #e5e7eb;border-radius:12px}
  .row{display:flex;gap:12px;flex-wrap:wrap}
  .hidden{display:none}
  .tag{font-size:12px;background:#d1fae5;color:#065f46;border-radius:999px;padding:3px 8px}
  .badge{position:absolute;top:8px;left:8px}
  .price{position:absolute;top:8px;right:8px}
  .hero{position:relative;overflow:hidden;border-radius:20px}
  .hero img{width:100%;height:280px;object-fit:cover;display:block}
  .hero .overlay{position:absolute;inset:0;background:linear-gradient(0deg,rgba(0,0,0,.55),rgba(0,0,0,.05))}
  .hero .text{position:absolute;left:16px;right:16px;bottom:16px;color:#fff}
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:14px}
  .overlayBox{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;align-items:center;justify-content:center;padding:16px}
  .modal{background:#fff;border-radius:16px;max-width:720px;width:100%;padding:16px;border:1px solid #e5e7eb}
  .mh{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
  .muted{color:#6b7280;font-size:12px}
</style>
</head>
<body>
<!-- LOGIN -->
<div id="login" class="wrap" style="min-height:100vh;display:grid;place-items:center">
  <div class="card" style="padding:16px;max-width:420px;width:100%">
    <div style="display:flex;gap:10px;align-items:center">
      <div style="width:48px;height:48px;border-radius:14px;background:linear-gradient(135deg,#10b981,#059669);display:grid;place-items:center;color:#fff;font-weight:900;font-size:22px">œÄ</div>
      <div>
        <div style="font-weight:800">Admin ‚Ä¢ Home (Lite)</div>
        <div class="muted">Xavfsiz kirish</div>
      </div>
    </div>
    <div style="margin-top:10px">
      <label class="muted">Login</label>
      <input id="L" class="input" placeholder="Login">
    </div>
    <div style="margin-top:8px">
      <label class="muted">Parol</label>
      <input id="P" type="password" class="input" placeholder="Parol">
      <div class="row" style="align-items:center;margin-top:6px">
        <label class="muted" style="display:flex;align-items:center;gap:6px">
          <input type="checkbox" id="show"> Parolni ko‚Äòrsatish
        </label>
        <div id="caps" class="muted hidden" style="margin-left:auto;color:#b45309">Caps Lock yoqilgan bo‚Äòlishi mumkin</div>
      </div>
    </div>
    <div style="margin-top:10px">
      <button id="go" class="btn p"
        onclick="(function(){var L=document.getElementById('L').value.trim(),P=document.getElementById('P').value.trim(),ok=(L==='Math@1999'&&P==='Math@1999')||(L.toLowerCase()==='admin'&&P==='Math@1999')||(L==='1999'&&P==='1999');document.getElementById('err').classList.toggle('hidden',ok);if(ok){document.getElementById('login').style.display='none';document.getElementById('app').style.display='block';}})()"
      >Kirish</button>
    </div>
    <div id="err" class="muted hidden" style="margin-top:8px;color:#b91c1c">Login/parol noto‚Äòg‚Äòri.</div>
    <div class="muted" style="margin-top:6px">Kirish: <b>Math@1999 / Math@1999</b> yoki <b>admin / Math@1999</b> yoki <b>1999 / 1999</b></div>
  </div>
</div>

<!-- APP -->
<div id="app" class="wrap hidden">
  <div class="mh">
    <div style="font-size:20px;font-weight:800">Katta reklama bannerlari</div>
    <div class="row">
      <button class="btn p" onclick="openModal()">‚ûï Banner</button>
      <button class="btn" onclick="downloadHtml()">üíæ home.html</button>
    </div>
  </div>

  <div id="hero" class="hero card">
    <img id="hImg" src="" alt="">
    <div class="overlay"></div>
    <div class="text">
      <span id="hTag" class="tag">BANNER</span>
      <div id="hTitle" style="font-size:24px;font-weight:900;margin-top:6px">Sarlavha</div>
      <div id="hSub" class="muted" style="color:#e5e7eb">Qisqa ta‚Äôrif</div>
      <div class="row" style="margin-top:10px">
        <a id="hA" class="btn p" href="#" target="_blank">‚ñ∂ Boshlash</a>
        <a id="hB" class="btn" href="#" target="_blank">‚Ñπ Batafsil</a>
      </div>
    </div>
  </div>

  <div id="list" class="grid" style="margin-top:14px"></div>
</div>

<!-- Modal (basic overlay) -->
<div id="ov" class="overlayBox">
  <div class="modal">
    <div class="mh">
      <div style="font-weight:800">Banner</div>
      <button class="btn" onclick="closeModal()">‚úñ</button>
    </div>
    <div class="row">
      <div style="flex:1;min-width:220px">
        <div class="muted">Sarlavha</div>
        <input id="tTitle" class="input" placeholder="Masalan: Algebra marafoni">
      </div>
      <div style="flex:1;min-width:220px">
        <div class="muted">Qisqa ta‚Äôrif</div>
        <input id="tSub" class="input" placeholder="Qisqa izoh">
      </div>
      <div style="flex:1;min-width:220px">
        <div class="muted">Rasm URL</div>
        <input id="tImg" class="input" placeholder="https://...">
      </div>
      <div style="flex:1;min-width:220px">
        <div class="muted">Havola</div>
        <input id="tHref" class="input" placeholder="https://...">
      </div>
      <div style="flex:1;min-width:120px">
        <div class="muted">Narx (0 = FREE)</div>
        <input id="tPrice" class="input" type="number" min="0" value="0">
      </div>
      <div style="flex:1;min-width:120px">
        <div class="muted">Yorliq</div>
        <select id="tTag" class="input">
          <option>FREE</option>
          <option>PRO</option>
          <option>YANGI</option>
        </select>
      </div>
    </div>
    <div class="row" style="justify-content:flex-end;margin-top:12px">
      <button id="delBtn" class="btn hidden" onclick="delBanner()">üóë O‚Äòchirish</button>
      <button class="btn p" onclick="saveBanner()">üíæ Saqlash</button>
    </div>
  </div>
</div>

<script>
// Tiny helpers
var $ = function(id){return document.getElementById(id)};
var banners = [];
var editIdx = null;

function seed(){
  try{ banners = JSON.parse(localStorage.getItem('home.banners')||'[]') || [] }catch(e){ banners=[] }
  if(!banners.length){
    banners=[{title:'Matematika BOOM 2025',subtitle:'Algebra + Geometriya',image:'https://images.unsplash.com/photo-1522202176988-66273c2fd55f?q=80&w=1600&auto=format&fit=crop',link:'#',price:0,tag:'YANGI'}];
  }
  save(); render();
}
function save(){ localStorage.setItem('home.banners', JSON.stringify(banners)) }
function render(){
  var h=banners[0]; if(h){
    $('hImg').src=h.image||''; $('hTag').textContent=h.tag||(h.price>0?'PRO':'FREE');
    $('hTitle').textContent=h.title||''; $('hSub').textContent=h.subtitle||'';
    $('hA').href=h.link||'#'; $('hB').href=h.link||'#';
  }
  var html='';
  for(var i=0;i<banners.length;i++){
    var b=banners[i];
    html+= '<div class="card" style="padding:10px;position:relative">'+
      '<div style="position:relative;border-radius:12px;overflow:hidden">'+
        '<img src="'+(b.image||'')+'" style="width:100%;height:140px;object-fit:cover">'+
        '<span class="tag badge">'+(b.tag||(b.price>0?'PRO':'FREE'))+'</span>'+
        '<span class="tag price">'+((b.price&&b.price>0)?(b.price+' so‚Äòm'):'0 so‚Äòm')+'</span>'+
      '</div>'+
      '<div style="font-weight:800;margin-top:6px">'+(b.title||'')+'</div>'+
      '<div class="muted">'+(b.subtitle||'')+'</div>'+
      '<div class="row" style="margin-top:8px">'+
        '<a class="btn p" href="'+(b.link||'#')+'" target="_blank">‚û° Boshlash</a>'+
        '<button class="btn" onclick="edit('+i+')">‚úè Tahrirlash</button>'+
      '</div>'+
    '</div>';
  }
  $('list').innerHTML=html;
}
function openModal(){ editIdx=null; $('delBtn').classList.add('hidden'); $('tTitle').value=''; $('tSub').value=''; $('tImg').value=''; $('tHref').value=''; $('tPrice').value=0; $('tTag').value='FREE'; $('ov').style.display='flex' }
function closeModal(){ $('ov').style.display='none' }
function edit(i){ editIdx=i; var b=banners[i]; $('tTitle').value=b.title||''; $('tSub').value=b.subtitle||''; $('tImg').value=b.image||''; $('tHref').value=b.link||''; $('tPrice').value=b.price||0; $('tTag').value=b.tag||(b.price>0?'PRO':'FREE'); $('delBtn').classList.remove('hidden'); $('ov').style.display='flex' }
function delBanner(){ if(editIdx==null) return; if(confirm('O‚Äòchirish?')){ banners.splice(editIdx,1); save(); render(); closeModal(); } }
function saveBanner(){
  var d={ title:$('tTitle').value.trim(), subtitle:$('tSub').value.trim(), image:$('tImg').value.trim(), link:$('tHref').value.trim(), price:Number($('tPrice').value||0), tag:$('tTag').value };
  if(!d.title || !d.image){ alert('Sarlavha va Rasm URL majburiy.'); return }
  if(editIdx==null) banners.unshift(d); else banners[editIdx]=d;
  save(); render(); closeModal();
}
function downloadHtml(){
  // embed banners inside a <script id="embedded">
  var doc = document.documentElement.cloneNode(true);
  // Put current banners as inline script at end of body (or replace if exists)
  var s = doc.querySelector('script#embedded');
  var payload = JSON.stringify(banners);
  if(!s){
    s = doc.createElement('script'); s.id='embedded'; s.type='application/json'; s.textContent=payload; doc.body.appendChild(s);
  } else { s.textContent=payload; }
  // Reset to login screen
  var app=doc.getElementById('app'), login=doc.getElementById('login');
  if(app) app.classList.add('hidden'); if(login) login.style.display='grid';

  var html='<!DOCTYPE html>\\n'+doc.outerHTML;
  var blob=new Blob([html],{type:'text/html;charset=utf-8'});
  var a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='home.html'; document.body.appendChild(a); a.click(); setTimeout(function(){URL.revokeObjectURL(a.href); a.remove();}, 800);
}
// Small UX helpers
(function(){
  var show=$('show'), P=$('P'), caps=$('caps');
  if(show) show.addEventListener('change', function(){ P.type=this.checked?'text':'password' });
  ['keydown','keyup'].forEach(function(ev){ P.addEventListener(ev,function(e){ if(e.getModifierState && e.getModifierState('CapsLock')) caps.classList.remove('hidden'); else caps.classList.add('hidden'); if(e.key==='Enter') $('go').click(); }) });
  // Load embedded banners if present (for downloaded file re-open)
  try{ var emb=document.getElementById('embedded'); if(emb){ var arr=JSON.parse(emb.textContent||'[]'); if(Array.isArray(arr)&&arr.length){ banners=arr; } } }catch(e){}
  seed();
})();
</script>
<!-- Embedded banners placeholder for downloaded file -->
<script id="embedded" type="application/json">[]</script>
</body>
</html>
