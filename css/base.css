/* ========================================================
   MathCenter UI — Robust Sidebar (mobile off-canvas, PC sticky)
   LIGHT ONLY
   ======================================================== */
:root{
  /* Palette */
  --bg:#f2fff6; --card:#fff; --card2:#f6fff9; --text:#0b1e14; --muted:#2f6a4b;
  --accent:#21c26e; --accent2:#29e07d; --danger:#e74c3c;

  /* Sidebar (lighter, brand-mos) */
  --sb-top:#18b372; --sb:#149e63;                /* gradient */
  --sb-border:rgba(255,255,255,.16);
  --sb-link:rgba(255,255,255,.10);
  --sb-link-b:rgba(255,255,255,.22);
  --sb-link-h:rgba(255,255,255,.18);

  /* Layout */
  --radius:18px; --gap:12px; --shadow:0 8px 24px rgba(0,0,0,.10);
  --header-h-m:56px; --header-h-d:64px; --sidebar-w:268px;

  /* Fluid type */
  --fs-12: clamp(11px, .75vw + 6px, 12px);
  --fs-14: clamp(12px, .85vw + 7px, 14px);
  --fs-16: clamp(13px, 1.0vw + 7px, 16px);
  --fs-24: clamp(18px, 1.6vw + 10px, 24px);
  --fs-32: clamp(22px, 2.1vw + 12px, 32px);
}

:root{ color-scheme: light }
*{box-sizing:border-box}
html,body{height:100%}
html{scroll-behavior:smooth}

body{
  margin:0; font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  color:var(--text);
  background:
    radial-gradient(1100px 400px at 10% -10%, #eafff3 10%, transparent 60%),
    radial-gradient(1100px 400px at 90% -20%, #e7fff1 10%, transparent 60%),
    #f5fff9;
  min-height:100dvh; -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
  font-size:var(--fs-16);
}
a{color:inherit;text-decoration:none}
.container{width:min(100% - 24px,1240px);margin-inline:auto;padding:12px}

/* ================= HEADER ================= */
.mc-header{
  position:sticky; top:0; z-index:30; display:flex; align-items:center; justify-content:space-between; gap:10px;
  height:var(--header-h-m); padding:8px 10px; background:rgba(255,255,255,.85);
  backdrop-filter:blur(7px); border-bottom:1px solid rgba(0,0,0,.06);
}
body.sidebar-desktop .mc-header{ height:var(--header-h-d); padding:10px 14px; }
.mc-left{display:flex;gap:10px;align-items:center}
.brand{display:flex;gap:8px;align-items:center;font-weight:800}
.brand img{width:28px;height:28px}
body.sidebar-desktop .brand img{width:32px;height:32px}

.mc-right{display:flex;align-items:center;gap:8px;flex-wrap:nowrap;white-space:nowrap;overflow-x:auto;-webkit-overflow-scrolling:touch;scrollbar-width:none}
.mc-right::-webkit-scrollbar{display:none}
.icon-btn{appearance:none;border:none;background:transparent;cursor:pointer;font-size:20px;line-height:1;padding:6px 10px;border-radius:12px}
.mobile-only{display:inline-flex}
body.sidebar-desktop .mobile-only{display:none}

/* Header pill'lar — 3D + shine; mobilda bitta qatorda */
.pill{
  position:relative; display:inline-flex; align-items:center; gap:6px;
  padding:7px 10px; border-radius:999px;
  background:linear-gradient(180deg, rgba(255,255,255,.9), rgba(245,255,249,.9));
  border:1px solid rgba(0,0,0,.12);
  box-shadow:0 2px 0 rgba(0,0,0,.05), 0 10px 18px rgba(0,0,0,.08);
  transform-style:preserve-3d; transition:transform .12s ease, box-shadow .12s ease;
  font-size:var(--fs-12);
}
.pill::after{
  content:""; position:absolute; inset:0; pointer-events:none; border-radius:inherit;
  background:linear-gradient(120deg, transparent 35%, rgba(41,224,125,.35) 50%, transparent 65%);
  transform:translateX(-120%);
}
.pill:hover{ transform:perspective(700px) rotateX(2deg) rotateY(3deg) translateZ(6px); box-shadow:0 12px 28px rgba(0,0,0,.16) }
.pill:hover::after{ animation:pillshine .7s ease forwards }
@keyframes pillshine{ to{ transform:translateX(120%) } }

/* ================= SIDEBAR ================= */
/* Class-based control:
   - body.sidebar-desktop  => PC
   - .side-nav.is-open      => Mobile open */
.side-nav{
  position:fixed; top:0; left:0; z-index:40;
  width:var(--sidebar-w); height:100dvh;
  padding-top:var(--header-h-m);
  background:linear-gradient(180deg,var(--sb-top),var(--sb));
  border-right:1px solid var(--sb-border);
  box-shadow:2px 0 16px rgba(0,0,0,.25);
  transform:translate3d(-100%,0,0);
  transition:transform .3s cubic-bezier(.2,.8,.2,1);
  will-change:transform; overflow:hidden; perspective:800px;
}
body.sidebar-desktop .side-nav{ padding-top:var(--header-h-d) }

/* OPEN state — !important qo'yildi, boshqa qoidalardan ustun */
.side-nav.is-open{ transform:translate3d(0,0,0) !important; }

.side-overlay{
  position:fixed; inset:0; z-index:35;
  background:rgba(0,0,0,.45); backdrop-filter:blur(2px);
}
.side-overlay[hidden]{ display:none }

/* Desktop rejimi */
body.sidebar-desktop .side-nav{ transform:translate3d(0,0,0) !important }
body.sidebar-desktop .side-overlay{ display:none !important }
body.sidebar-desktop .app-with-sidebar{ padding-left:calc(var(--sidebar-w) + 16px) }

/* Sidebar inner + linklar */
.side-nav-inner{
  position:relative; height:100%;
  display:flex; flex-direction:column; gap:8px; padding:12px;
  transform-style:preserve-3d; overflow:auto; scrollbar-width:thin;
}
.nav-link{
  position:relative; color:#fff; font-weight:700; font-size:var(--fs-14);
  display:flex; align-items:center; gap:8px;
  padding:10px 12px; border-radius:12px;
  background:var(--sb-link); border:1px solid var(--sb-link-b);
  transition:transform .12s ease, background .12s ease, border-color .12s ease, box-shadow .12s ease;
  box-shadow:0 1px 0 rgba(0,0,0,.12), inset 0 0 0 1px rgba(255,255,255,.04);
  will-change:transform;
}
.nav-link:hover{ background:var(--sb-link-h); transform:translateY(-1px) }
.nav-link.active{
  background:linear-gradient(180deg,#1fd58a,#129c66); color:#032111; border-color:transparent;
  box-shadow:0 10px 24px rgba(18,156,102,.35);
}
.side-spacer{ flex:1 1 auto }
.side-nav-footer{
  position:sticky; bottom:8px; border-radius:14px;
  background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(0,0,0,.08));
  border:1px solid var(--sb-border); padding:10px; backdrop-filter:blur(2px);
}

/* ================= CONTENT ================= */
.hero{display:flex;flex-direction:column;gap:8px;margin:8px 0 14px}
.hero h1{margin:0;font-size:var(--fs-24)}
body.sidebar-desktop .hero h1{font-size:var(--fs-32)}
.sub{color:var(--muted)}

.card{
  background:linear-gradient(180deg,var(--card),var(--card2));
  border:1px solid rgba(0,0,0,.06);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:14px; transform-style:preserve-3d;
}
.grid{display:grid;gap:var(--gap)}
.grid.cards{grid-template-columns:repeat(auto-fit,minmax(240px,1fr))}
@media (max-width:420px){ .grid.cards{grid-template-columns:1fr} }
@media (min-width:1280px){ .grid.cards{gap:16px} }
.hero-img,.card img.hero{width:100%;aspect-ratio:16/9;object-fit:cover;object-position:center;border-radius:14px;border:1px solid rgba(0,0,0,.08)}

/* ================= MODAL / FORMS ================= */
.form-grid{display:grid;grid-template-columns:1fr;gap:12px}
@media (min-width:720px){ .form-grid{grid-template-columns:1fr 1fr} }
.field{display:flex;flex-direction:column;gap:6px}
label{font-size:.9rem;color:var(--muted)}
input,select{width:100%;padding:12px;border-radius:12px;background:#fff;border:1px solid rgba(0,0,0,.15);color:var(--text)}
.modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.35);backdrop-filter:blur(2px);padding:16px;z-index:12000}
.modal.hidden{display:none}
.modal .dialog{width:min(720px,100%);max-height:90dvh;overflow:auto;background:linear-gradient(180deg,#fff 0%,#f6fff8 100%);border:1px solid rgba(0,0,0,.08);border-radius:18px;padding:12px;box-shadow:0 16px 48px rgba(0,0,0,.15)}
.modal .head{display:flex;align-items:center;justify-content:space-between;padding:6px 6px 10px;border-bottom:1px solid rgba(0,0,0,.06)}
.modal .body{padding:10px 6px}
.modal .foot{display:flex;gap:10px;justify-content:flex-end;padding:8px 6px 4px;border-top:1px solid rgba(0,0,0,.06)}

/* ================= Misc ================= */
.hidden{display:none!important}
.bottom-bar{display:none!important}
@media (prefers-reduced-motion:reduce){ *{animation:none!important;transition:none!important} }
/* ====== SIDEBAR SUPER 3D STYLING (add-on) ====== */

/* Yanada chuqur soyalar ochilganda */
.side-nav.is-open{
  box-shadow: 26px 0 60px rgba(0,0,0,.35), 0 0 0 1px rgba(0,0,0,.12);
}

/* Ichki 3D sahna va qatlamlar (JS qo'shib beradi) */
.side-nav { perspective: 1000px; }
.side-nav-inner{ position:relative; transform-style: preserve-3d; }

/* Parallax qatlamlar */
.sn-l{ 
  position:absolute; inset:-18% -18% -10% -18%;
  pointer-events:none; filter: saturate(1.06) contrast(1.02);
  will-change: transform; border-right: 1px solid transparent;
}
.sn-l1{
  /* bazaviy gradient + texturali conic effekt */
  background:
    radial-gradient(900px 520px at -10% -20%, rgba(255,255,255,.25), transparent 60%),
    radial-gradient(900px 520px at 110% -40%, rgba(255,255,255,.18), transparent 60%),
    conic-gradient(from 220deg at 20% 10%, rgba(255,255,255,.08), rgba(255,255,255,0) 40%),
    linear-gradient(180deg, var(--sb-top), var(--sb));
  transform: translateZ(-60px) scale(1.18);
}
.sn-l2{
  background:
    radial-gradient(620px 380px at 22% 0%, rgba(255,255,255,.16), transparent 60%),
    radial-gradient(620px 380px at 80% -8%, rgba(255,255,255,.12), transparent 60%);
  transform: translateZ(-40px) scale(1.12);
  mix-blend-mode: screen;
}
.sn-l3{
  background: radial-gradient(1100px 280px at 50% 0%, rgba(255,255,255,.10), transparent 70%);
  transform: translateZ(-20px) scale(1.06);
}

/* Ichki “glow” va chetlar */
.sn-glow{
  position:absolute; inset:0; pointer-events:none;
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,.16),
    inset 0 30px 40px -30px rgba(255,255,255,.25);
  border-right: 1px solid var(--sb-border);
  border-radius: 0;
}

/* Linklar — tilt + nefrit yaltirash */
.side-nav .nav-link{
  transform: translateZ(2px);
  position:relative; overflow: hidden;
}
.side-nav .nav-link::before{
  content:""; position:absolute; inset:-40% -20%;
  background: radial-gradient(220px 60px at -10% 50%, rgba(255,255,255,.45), transparent 60%);
  transform: translateX(-120%);
  opacity:.0; pointer-events:none; border-radius:inherit;
}
.side-nav .nav-link:hover::before{
  opacity:.7; transform: translateX(120%); transition: transform .75s ease, opacity .2s ease;
}

/* Reduced-motion hurmati */
@media (prefers-reduced-motion: reduce){
  .side-nav .nav-link,
  .sn-l,
  .side-nav-inner{ transition: none !important; }
}
